(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{1962:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/category/productsByCategory",function(){return l(1004)}])},1004:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>u});var t=l(4848),r=l(6540),i=l(1468),c=l(5580),a=l(6387),n=l(6715),o=l(3270),d=l(7052),h=l(1508);function u(){let e=(0,i.wA)(),s=(0,n.useRouter)(),{products:l,totalPages:u,loading:x,error:m}=(0,i.d4)(e=>e.productsByCategory),{data:p,loading:j,error:g}=(0,i.d4)(e=>e.colors),[v,N]=(0,r.useState)(1),[b,f]=(0,r.useState)("newest"),[_,w]=(0,r.useState)([]),[y,C]=(0,r.useState)(""),{categoryId:k,categoryName:S}=s.query;(0,r.useEffect)(()=>{k&&e((0,c.c)({categoryId:k,page:v,limit:10,sort:b,colorIds:_.join(","),priceRange:y}))},[e,k,v,b,_,y]),(0,r.useEffect)(()=>{e((0,a.n)())},[e]);let V=e=>{w(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]),N(1)};return(0,t.jsxs)(o.A,{children:[(0,t.jsx)(h.A,{}),(0,t.jsx)("div",{className:"mt-6 px-6",children:(0,t.jsx)("div",{className:"hidden md:flex justify-center gap-4",children:(0,t.jsx)(d.A,{})})}),(0,t.jsxs)("div",{className:"w-full px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:S}),m&&(0,t.jsx)("div",{className:"text-red-500 text-center",children:m}),(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"sortFilter",className:"text-gray-700 font-semibold",children:"Sắp xếp theo:"}),(0,t.jsxs)("select",{id:"sortFilter",value:b,onChange:e=>{f(e.target.value),N(1)},className:"border rounded p-2",children:[(0,t.jsx)("option",{value:"featured",children:"Sản phẩm nổi bật"}),(0,t.jsx)("option",{value:"price_asc",children:"Gi\xe1: Tăng dần"}),(0,t.jsx)("option",{value:"price_desc",children:"Gi\xe1: Giảm dần"}),(0,t.jsx)("option",{value:"name_asc",children:"T\xean: A-Z"}),(0,t.jsx)("option",{value:"name_desc",children:"T\xean: Z-A"}),(0,t.jsx)("option",{value:"oldest",children:"Cũ nhất"}),(0,t.jsx)("option",{value:"newest",children:"Mới nhất"})]})]}),(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"priceRangeFilter",className:"text-gray-700 font-semibold",children:"Khoảng gi\xe1:"}),(0,t.jsxs)("select",{id:"priceRangeFilter",value:y,onChange:e=>{C(e.target.value),N(1)},className:"border rounded p-2",children:[(0,t.jsx)("option",{value:"",children:"Tất cả"}),(0,t.jsx)("option",{value:"0-100000",children:"Dưới 100.000 VND"}),(0,t.jsx)("option",{value:"100000-500000",children:"100.000 - 500.000 VND"}),(0,t.jsx)("option",{value:"500000-1000000",children:"500.000 - 1.000.000 VND"}),(0,t.jsx)("option",{value:"1000000-",children:"Tr\xean 1.000.000 VND"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"M\xe0u sắc"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-4",children:p.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"color-".concat(e.id),value:e.id,onChange:()=>V(e.id),className:"cursor-pointer"}),(0,t.jsxs)("label",{htmlFor:"color-".concat(e.id),className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("span",{className:"block w-6 h-6 rounded border border-black",style:{backgroundColor:e.hex_code}}),e.color]})]},e.id))})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:l.map(e=>{var l,r;return(0,t.jsxs)("div",{className:"bg-white rounded shadow p-4 hover:shadow-lg transition cursor-pointer",onClick:()=>s.push("/productdetail/".concat(e.slug)),children:[(0,t.jsx)("img",{src:(null===(r=e.productColors[0])||void 0===r?void 0:null===(l=r.ProductColor)||void 0===l?void 0:l.image)||"https://via.placeholder.com/150",alt:e.product_name,className:"w-full h-80 object-cover rounded"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mt-2",children:e.product_name}),(0,t.jsx)("p",{className:"text-gray-600",children:e.description}),(0,t.jsxs)("p",{className:"text-red-500 font-bold",children:[e.discount_price.toLocaleString("vi-VN")," VND"]}),(0,t.jsxs)("p",{className:"text-gray-500 line-through",children:[e.price.toLocaleString("vi-VN")," VND"]})]},e.id)})}),(0,t.jsx)("div",{className:"flex justify-center mt-6",children:v<u&&(0,t.jsx)("button",{onClick:()=>N(e=>e+1),className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Xem th\xeam"})}),x&&(0,t.jsx)("div",{className:"text-center mt-4",children:"Đang tải..."})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[392,282,636,593,792],()=>s(1962)),_N_E=e.O()}]);