(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{5552:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile",function(){return a(2490)}])},6269:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var n=a(4848);function r(){return(0,n.jsx)("footer",{className:"bg-gray-800 text-white py-6 mt-10",children:(0,n.jsx)("div",{className:"container mx-auto text-center",children:(0,n.jsx)("p",{className:"text-sm",children:"\xa9 2025 Fashion Store. All rights reserved."})})})}},3270:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var n=a(4848),r=a(6540),l=a(1106),t=a.n(l);function i(){return(0,n.jsxs)("aside",{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Danh mục"}),(0,n.jsx)("ul",{className:"space-y-4",children:[{id:1,name:"\xc1o",subCategories:[{id:101,name:"\xc1o Thun"},{id:102,name:"\xc1o Sơ Mi"},{id:103,name:"\xc1o Polo"}]},{id:2,name:"Quần",subCategories:[{id:201,name:"Quần Jeans"},{id:202,name:"Quần Shorts"},{id:203,name:"Quần T\xe2y"}]},{id:3,name:"Gi\xe0y D\xe9p",subCategories:[{id:301,name:"Gi\xe0y Thể Thao"},{id:302,name:"Gi\xe0y Lười"},{id:303,name:"D\xe9p Sandals"}]},{id:4,name:"Phụ Kiện",subCategories:[{id:401,name:"Mũ"},{id:402,name:"Thắt Lưng"},{id:403,name:"Balo"}]}].map(e=>(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:"/category/productsByCategory?categoryId=".concat(e.id,"&categoryName=").concat(e.name),className:"hover:underline block font-bold",children:e.name}),(0,n.jsx)("ul",{className:"pl-4 mt-2 space-y-2",children:e.subCategories.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"/category/productsByCategory?categoryId=".concat(e.id,"&categoryName=").concat(e.name),className:"hover:underline text-gray-600 block",children:e.name})},e.id))})]},e.id))})]})}function o(){let[e,s]=(0,r.useState)(!1),a=()=>{s(!e)};return(0,r.useEffect)(()=>{let e=()=>{window.innerWidth>=768&&s(!1)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:"bg-blue-600 text-white p-4 shadow",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,n.jsx)("button",{className:"md:hidden block focus:outline-none mr-4",onClick:a,children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),(0,n.jsx)(t(),{href:"/",className:"text-2xl font-bold flex-shrink-0",children:"Fashion Store"}),(0,n.jsxs)("nav",{className:"hidden md:flex space-x-6 ml-auto",children:[(0,n.jsx)(t(),{href:"/store-locations",className:"hover:underline",children:"Hệ thống cửa h\xe0ng"}),(0,n.jsx)(t(),{href:"/user-guide",className:"hover:underline",children:"Hướng dẫn sử dụng"}),(0,n.jsx)(t(),{href:"/warranty-policy",className:"hover:underline",children:"Ch\xednh s\xe1ch bảo h\xe0nh"})]}),(0,n.jsx)("nav",{className:"flex space-x-6 md:ml-auto",children:(0,n.jsxs)("ul",{className:"flex space-x-4 items-center",children:[(0,n.jsx)("li",{children:(0,n.jsx)(t(),{href:"/search",className:"hover:underline",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"})})})}),(0,n.jsx)("li",{children:(0,n.jsx)(t(),{href:"/account/profile",className:"hover:underline",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-6 7c0-3.31 2.69-6 6-6s6 2.69 6 6H6z"})})})}),(0,n.jsx)("li",{children:(0,n.jsx)(t(),{href:"/cart",className:"hover:underline",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.5 6m12.5-6l1.5 6m-10-1h8"})})})})]})})]})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-gray-800 bg-opacity-50 transition-opacity duration-300 ".concat(e?"opacity-100 visible":"opacity-0 invisible"),onClick:a}),(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"),children:[(0,n.jsx)("button",{className:"absolute top-4 right-4 text-blue-600 focus:outline-none",onClick:a,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,n.jsx)(i,{}),(0,n.jsxs)("nav",{className:"p-4",children:[(0,n.jsx)(t(),{href:"/store-locations",className:"block py-2 hover:underline",children:"Hệ thống cửa h\xe0ng"}),(0,n.jsx)(t(),{href:"/user-guide",className:"block py-2 hover:underline",children:"Hướng dẫn sử dụng"}),(0,n.jsx)(t(),{href:"/warranty-policy",className:"block py-2 hover:underline",children:"Ch\xednh s\xe1ch bảo h\xe0nh"})]})]})]})}var d=a(6269);function c(e){let{children:s}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)(o,{}),(0,n.jsx)("main",{className:"flex-grow container mx-auto px-4 py-6",children:s}),(0,n.jsx)(d.A,{})]})}},2490:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var n=a(4848),r=a(6540),l=a(1468),t=a(6715),i=a(4358),o=a(9031),d=a(3270),c=a(3914),h=a(6188);function m(e){let{authStep:s,setAuthStep:a,formData:r,setFormData:l,handleChange:t,handleLogin:i,handleRegister:o,handleOtpSubmit:d,otp:m,setOtp:u,passwordVisibility:x,togglePasswordVisibility:p,loading:j}=e;return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-6",children:["login"===s&&(0,n.jsxs)("div",{className:"bg-white p-6 rounded shadow-md max-w-md mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Login"}),(0,n.jsxs)("form",{onSubmit:i,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Email:"}),(0,n.jsx)("input",{type:"email",name:"email",value:r.email,onChange:t,className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Password:"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:x.password?"text":"password",name:"password",value:r.password,onChange:t,className:"w-full border p-2 rounded",required:!0}),(0,n.jsx)("button",{type:"button",className:"absolute right-2 top-2 text-gray-600",onClick:()=>p("password"),children:(0,n.jsx)(c.g,{icon:x.password?h.k6j:h.pS3})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full",disabled:j,children:j?"Logging in...":"Login"})]}),(0,n.jsxs)("p",{className:"mt-4 text-center",children:["Don't have an account?"," ",(0,n.jsx)("button",{onClick:()=>a("register"),className:"text-blue-600 hover:underline",children:"Register"})]})]}),"register"===s&&(0,n.jsxs)("div",{className:"bg-white p-6 rounded shadow-md max-w-md mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Register"}),(0,n.jsxs)("form",{onSubmit:o,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"First Name:"}),(0,n.jsx)("input",{type:"text",name:"firstname",value:r.firstname,onChange:t,className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Last Name:"}),(0,n.jsx)("input",{type:"text",name:"lastname",value:r.lastname,onChange:t,className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Email:"}),(0,n.jsx)("input",{type:"email",name:"email",value:r.email,onChange:t,className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Password:"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:x.password?"text":"password",name:"password",value:r.password,onChange:t,className:"w-full border p-2 rounded",required:!0}),(0,n.jsx)("button",{type:"button",className:"absolute right-2 top-2 text-gray-600",onClick:()=>p("password"),children:(0,n.jsx)(c.g,{icon:x.password?h.k6j:h.pS3})})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Confirm Password:"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:x.confirmPassword?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:t,className:"w-full border p-2 rounded",required:!0}),(0,n.jsx)("button",{type:"button",className:"absolute right-2 top-2 text-gray-600",onClick:()=>p("confirmPassword"),children:(0,n.jsx)(c.g,{icon:x.confirmPassword?h.k6j:h.pS3})})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Phone:"}),(0,n.jsx)("input",{type:"text",name:"phone",value:r.phone,onChange:t,className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Gender:"}),(0,n.jsxs)("select",{name:"gender",value:r.gender,onChange:t,className:"w-full border p-2 rounded",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select"}),(0,n.jsx)("option",{value:"male",children:"Male"}),(0,n.jsx)("option",{value:"female",children:"Female"}),(0,n.jsx)("option",{value:"other",children:"Other"})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full",disabled:j,children:j?"Registering...":"Register"})]})]}),"otp"===s&&(0,n.jsxs)("div",{className:"bg-white p-6 rounded shadow-md max-w-md mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Verify OTP"}),(0,n.jsxs)("form",{onSubmit:d,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{children:"Enter OTP:"}),(0,n.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full border p-2 rounded",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full",disabled:j,children:j?"Verifying...":"Verify OTP"})]})]})]})}function u(e){let{user:s,handleLogout:a,selectedTab:r,setSelectedTab:l}=e;return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Profile"}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,n.jsxs)("div",{className:"md:w-1/4 bg-100 p-4 rounded shadow-md",children:[(0,n.jsx)("button",{className:"w-full text-left px-4 py-2 mb-2 rounded ".concat("info"===r?"bg-blue-600 text-white":"bg-gray-200"),onClick:()=>l("info"),children:"Personal Info"}),(0,n.jsx)("button",{className:"w-full text-left px-4 py-2 mb-2 rounded ".concat("orders"===r?"bg-blue-600 text-white":"bg-gray-200"),onClick:()=>l("orders"),children:"Orders"}),(0,n.jsx)("button",{className:"w-full text-left px-4 py-2 mb-2 rounded ".concat("address"===r?"bg-blue-600 text-white":"bg-gray-200"),onClick:()=>l("address"),children:"Address Book"}),(0,n.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition mt-6",onClick:a,children:"Logout"})]}),(0,n.jsxs)("div",{className:"md:w-3/4 bg-white p-6 rounded shadow-md",children:["info"===r&&s&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"First Name:"})," ",s.firstname||"N/A"]}),(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Last Name:"})," ",s.lastname||"N/A"]}),(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Email:"})," ",s.email||"N/A"]}),(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Phone:"})," ",s.phone||"N/A"]}),(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Gender:"})," ",s.gender||"N/A"]}),(0,n.jsxs)("p",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Joined:"})," ",s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"]})]}),"orders"===r&&(0,n.jsx)("p",{children:"No orders available."}),"address"===r&&(0,n.jsx)("p",{children:"No addresses available."})]})]})]})}function x(){let e=(0,l.wA)();(0,t.useRouter)();let{user:s,loading:a}=(0,l.d4)(e=>e.auth),[c,h]=(0,r.useState)(!1),[x,p]=(0,r.useState)("login"),[j,b]=(0,r.useState)("info"),[g,w]=(0,r.useState)(""),[f,N]=(0,r.useState)({password:!1,confirmPassword:!1}),[v,y]=(0,r.useState)({email:"",password:"",confirmPassword:"",firstname:"",lastname:"",phone:"",gender:""}),[k,C]=(0,r.useState)(null),S=new AbortController;(0,r.useEffect)(()=>((0,o.gf)()&&(h(!0),e((0,i.ug)()).then(()=>{C(null)}).catch(e=>{console.error("Failed to get user info:",e),C(e.message||"Failed to authenticate"),h(!1)})),()=>S.abort()),[e]);let P=async()=>{try{await e((0,i.y4)()).unwrap(),h(!1)}catch(e){console.error("Failed to logout:",e)}},L=async s=>{s.preventDefault(),"fulfilled"===(await e((0,i.Lx)({email:v.email,password:v.password}))).meta.requestStatus&&(h(!0),e((0,i.ug)()))},A=async s=>{if(s.preventDefault(),v.password!==v.confirmPassword){alert("Passwords do not match. Please try again.");return}"fulfilled"===(await e((0,i.DY)(v))).meta.requestStatus&&p("otp")},M=async s=>{s.preventDefault(),"fulfilled"===(await e((0,i.RY)({email:v.email,otp:g}))).meta.requestStatus?(alert("Verification successful! You can now log in."),p("login")):alert("Invalid OTP. Please try again.")};return c?(0,n.jsx)(d.A,{children:(0,n.jsx)(u,{user:s,selectedTab:j,setSelectedTab:b,handleLogout:P})}):(0,n.jsx)(d.A,{children:(0,n.jsx)(m,{authStep:x,setAuthStep:p,formData:v,setFormData:y,handleChange:e=>{y({...v,[e.target.name]:e.target.value})},handleLogin:L,handleRegister:A,handleOtpSubmit:M,otp:g,setOtp:w,passwordVisibility:f,togglePasswordVisibility:e=>{N({...f,[e]:!f[e]})},loading:a})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[69,392,914,636,593,792],()=>s(5552)),_N_E=e.O()}]);