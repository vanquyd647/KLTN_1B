(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{6898:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/productdetail/[slug]",function(){return r(4920)}])},4792:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(4848),l=r(6540),a=r(1106),n=r.n(a);function i(){return(0,t.jsxs)("aside",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Danh mục"}),(0,t.jsx)("ul",{className:"space-y-4",children:["\xc1o Thun","Quần Jeans","V\xe1y","\xc1o Kho\xe1c","Phụ Kiện"].map((e,s)=>(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/products?category=".concat(e),className:"hover:underline block",children:e})},s))})]})}function o(){let[e,s]=(0,l.useState)(!1),r=()=>{s(!e)};return(0,l.useEffect)(()=>{let e=()=>{window.innerWidth>=768&&s(!1)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:"bg-blue-600 text-white p-4 shadow",children:(0,t.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,t.jsx)("button",{className:"md:hidden block focus:outline-none mr-4",onClick:r,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),(0,t.jsx)(n(),{href:"/",className:"text-2xl font-bold flex-shrink-0",children:"Fashion Store"}),(0,t.jsxs)("nav",{className:"hidden md:flex space-x-6 ml-auto",children:[(0,t.jsx)(n(),{href:"/store-locations",className:"hover:underline",children:"Hệ thống cửa h\xe0ng"}),(0,t.jsx)(n(),{href:"/user-guide",className:"hover:underline",children:"Hướng dẫn sử dụng"}),(0,t.jsx)(n(),{href:"/warranty-policy",className:"hover:underline",children:"Ch\xednh s\xe1ch bảo h\xe0nh"})]}),(0,t.jsx)("nav",{className:"flex space-x-6 md:ml-auto",children:(0,t.jsxs)("ul",{className:"flex space-x-4 items-center",children:[(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/search",className:"hover:underline",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/account/profile",className:"hover:underline",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-6 7c0-3.31 2.69-6 6-6s6 2.69 6 6H6z"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/cart",className:"hover:underline",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.5 6m12.5-6l1.5 6m-10-1h8"})})})})]})})]})}),(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-gray-800 bg-opacity-50 transition-opacity duration-300 ".concat(e?"opacity-100 visible":"opacity-0 invisible"),onClick:r}),(0,t.jsxs)("div",{className:"fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"),children:[(0,t.jsx)("button",{className:"absolute top-4 right-4 text-blue-600 focus:outline-none",onClick:r,children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)(i,{}),(0,t.jsxs)("nav",{className:"p-4",children:[(0,t.jsx)(n(),{href:"/store-locations",className:"block py-2 hover:underline",children:"Hệ thống cửa h\xe0ng"}),(0,t.jsx)(n(),{href:"/user-guide",className:"block py-2 hover:underline",children:"Hướng dẫn sử dụng"}),(0,t.jsx)(n(),{href:"/warranty-policy",className:"block py-2 hover:underline",children:"Ch\xednh s\xe1ch bảo h\xe0nh"})]})]})]})}function c(){return(0,t.jsx)("footer",{className:"bg-gray-800 text-white py-6 mt-10",children:(0,t.jsx)("div",{className:"container mx-auto text-center",children:(0,t.jsx)("p",{className:"text-sm",children:"\xa9 2025 Fashion Store. All rights reserved."})})})}function d(e){let{children:s}=e;return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)(o,{}),(0,t.jsx)("main",{className:"flex-grow container mx-auto px-4 py-6",children:s}),(0,t.jsx)(c,{})]})}},4920:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(4848),l=r(6540),a=r(1468),n=r(6715),i=r(9031),o=r(7730),c=r(3257),d=r(4660),h=r(4792);function u(){var e;let s=(0,a.wA)(),{slug:r}=(0,n.useRouter)().query,u=(0,i.Cy)(),{currentProduct:x,loading:m,error:p}=(0,a.d4)(e=>e.products),{reviews:g,averageRating:v,isLoading:b,error:j,pagination:w}=(0,a.d4)(e=>e.reviews),[f,N]=(0,l.useState)(null),[y,k]=(0,l.useState)(null),[C,P]=(0,l.useState)(1),[L,_]=(0,l.useState)(""),[z,S]=(0,l.useState)(5);(0,l.useEffect)(()=>{r&&s((0,o.$s)(r))},[s,r]),(0,l.useEffect)(()=>{(null==x?void 0:x.id)&&(s((0,d.ik)({productId:x.id,page:1,limit:5})),s((0,d.Zx)(x.id)))},[s,x]),(0,l.useEffect)(()=>{var e,s;(null==x?void 0:null===(e=x.productColors)||void 0===e?void 0:e.length)>0&&N(x.productColors[0]),(null==x?void 0:null===(s=x.productSizes)||void 0===s?void 0:s.length)>0&&k(x.productSizes[0])},[x]);let M=async()=>{if(!f||!y){alert("Please select a color and size.");return}try{let e=u;if(!e){let r;if(null==(r=(0,i.gf)()?await s((0,c.fN)()).unwrap():await s((0,c.ci)()).unwrap())?void 0:r.id)e=r.id;else throw Error("Failed to create cart.")}let r={cart_id:e,product_id:null==x?void 0:x.id,color_id:null==f?void 0:f.id,size_id:null==y?void 0:y.id,quantity:C};await s((0,c.Mr)({cartId:e,itemData:r})).unwrap(),alert("Item added to cart successfully!")}catch(e){console.error("Failed to add item to cart:",e),alert("Failed to add item to cart: ".concat(e.message||"An error occurred"))}},A=async()=>{if(!L.trim()){alert("Review text cannot be empty.");return}try{let e={productId:null==x?void 0:x.id,rating:z,reviewText:L};await s((0,d.bx)(e)).unwrap(),_(""),S(5),s((0,d.ik)({productId:x.id,page:w.currentPage,limit:5})),s((0,d.Zx)(x.id))}catch(e){console.error("Failed to submit review:",e),alert("Failed to submit review: ".concat(e.message||"An error occurred"))}},E=e=>{(null==x?void 0:x.id)&&e!==w.currentPage&&s((0,d.ik)({productId:x.id,page:e,limit:5}))};return m?(0,t.jsx)("div",{className:"text-center py-10 text-xl",children:"Loading product details..."}):p?(0,t.jsx)("div",{className:"text-center text-red-500 py-10",children:p}):x?(0,t.jsx)(h.A,{children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,t.jsx)("div",{className:"md:w-1/2 max-h-96 overflow-hidden",children:(0,t.jsx)("img",{src:(null==f?void 0:null===(e=f.ProductColor)||void 0===e?void 0:e.image)||"https://via.placeholder.com/500",alt:x.product_name,className:"w-full h-full object-contain rounded"})}),(0,t.jsxs)("div",{className:"md:w-1/2",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:x.product_name}),(0,t.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:x.description}),(0,t.jsxs)("p",{className:"text-red-500 font-bold text-xl mb-2",children:[x.discount_price.toLocaleString("vi-VN")," VND"]}),(0,t.jsxs)("p",{className:"text-gray-500 line-through mb-4",children:[x.price.toLocaleString("vi-VN")," VND"]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Available Sizes:"}),(0,t.jsx)("div",{className:"flex gap-2",children:x.productSizes.map(e=>(0,t.jsx)("button",{className:"px-4 py-2 border rounded hover:bg-gray-100 transition ".concat((null==y?void 0:y.id)===e.id?"bg-blue-100":""),onClick:()=>k(e),children:e.size},e.id))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Available Colors:"}),(0,t.jsx)("div",{className:"flex gap-2",children:x.productColors.map(e=>(0,t.jsx)("div",{className:"w-8 h-8 rounded-full border cursor-pointer hover:shadow-md ".concat((null==f?void 0:f.id)===e.id?"ring-2 ring-blue-500":""),style:{backgroundColor:e.hex_code},title:e.color,onClick:()=>N(e)},e.id))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Quantity:"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>P(e=>e>1?e-1:1),children:"-"}),(0,t.jsx)("input",{type:"number",className:"w-16 px-2 py-1 border rounded text-center",min:"1",value:C,readOnly:!0}),(0,t.jsx)("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>P(e=>e+1),children:"+"})]})]}),(0,t.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:M,children:"Add to Cart"})]})]}),(0,t.jsx)("div",{children:"th\xeam th\xf4ng tin sản phẩm"}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Reviews"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["Average Rating: ",v||0,"/5"]}),j?(0,t.jsx)("p",{className:"text-red-500",children:"Failed to fetch reviews."}):(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[null==g?void 0:g.map(e=>(0,t.jsxs)("div",{className:"border p-4 rounded shadow-sm bg-white hover:shadow-md",children:[(0,t.jsxs)("p",{className:"font-semibold",children:["User: ",e.user]}),(0,t.jsxs)("p",{className:"text-yellow-500 font-semibold",children:["Rating: ",e.rating,"/5"]}),(0,t.jsx)("p",{children:e.review_text})]},e.id)),(null==g?void 0:g.length)===0&&(0,t.jsx)("p",{children:"No reviews available for this product."})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[(0,t.jsx)("button",{className:"px-2 py-1 text-sm border rounded ".concat(w.currentPage<=1?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),disabled:w.currentPage<=1,onClick:()=>E(1),children:"First"}),(0,t.jsx)("button",{className:"px-2 py-1 text-sm border rounded ".concat(w.currentPage<=1?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),disabled:w.currentPage<=1,onClick:()=>E(w.currentPage-1),children:"Previous"}),Array.from({length:w.totalPages},(e,s)=>s+1).filter(e=>!!(1===e||e===w.totalPages||1>=Math.abs(e-w.currentPage))).map((e,s,r)=>{let l=s>0&&e-r[s-1]>1;return(0,t.jsxs)("span",{children:[l&&(0,t.jsx)("span",{className:"px-2 text-sm",children:"..."}),(0,t.jsx)("button",{className:"px-2 py-1 text-sm border rounded ".concat(w.currentPage===e?"bg-blue-600 text-white":"hover:bg-gray-100"),onClick:()=>E(e),children:e})]},e)}),(0,t.jsx)("button",{className:"px-2 py-1 text-sm border rounded ".concat(w.currentPage>=w.totalPages?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),disabled:w.currentPage>=w.totalPages,onClick:()=>E(w.currentPage+1),children:"Next"}),(0,t.jsx)("button",{className:"px-2 py-1 text-sm border rounded ".concat(w.currentPage>=w.totalPages?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),disabled:w.currentPage>=w.totalPages,onClick:()=>E(w.totalPages),children:"Last"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Add a Review"}),(0,t.jsx)("div",{className:"flex items-center mb-4",children:[1,2,3,4,5].map(e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:e<=z?"currentColor":"none",stroke:"currentColor",strokeWidth:2,className:"w-8 h-8 cursor-pointer ".concat(e<=z?"text-yellow-500":"text-gray-300"),onClick:()=>S(e),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.172l2.828 5.734 6.337.919-4.582 4.46 1.081 6.312L12 17.711 6.336 20.597l1.08-6.312-4.582-4.46 6.337-.919L12 3.172z"})},e))}),(0,t.jsx)("textarea",{value:L,onChange:e=>_(e.target.value),className:"w-full border p-2 rounded mb-4",rows:"4",placeholder:"Write your review here..."}),(0,t.jsx)("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Submit Review"})]})]})]})}):(0,t.jsx)("div",{className:"text-center py-10 text-xl",children:"Product not found"})}}},e=>{var s=s=>e(e.s=s);e.O(0,[392,636,593,792],()=>s(6898)),_N_E=e.O()}]);