{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/node_modules/%40payos/payos-checkout/lib/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.usePayOS = void 0;\nvar PAYOS_CONSTANT = {\n    RESPONSE_IFRAME_TYPE: {\n        STATUS: \"status\",\n        ERROR: \"error\",\n        PAYMENT_RESPONSE: \"payment_response\",\n    },\n    PAYMENT_STATUS: {\n        PENDING: \"PENDING\",\n        PAID: \"PAID\",\n        PROCESSING: \"PROCESSING\",\n        CANCELLED: \"CANCELLED\",\n        DELETED: \"DELETED\",\n    },\n    ORIGIN: [\n        \"https://dev.pay.payos.vn\",\n        \"https://next.dev.pay.payos.vn\",\n        \"https://pay.payos.vn\",\n    ],\n};\nvar PayOSCheckout = /** @class */ (function () {\n    function PayOSCheckout(props) {\n        var _this = this;\n        var _a;\n        this.receiveMessage = function (event) {\n            //check origin\n            if (PAYOS_CONSTANT.ORIGIN.includes(event.origin)) {\n                var data = JSON.parse(event.data);\n                //Người dùng tắt iframe\n                if ([\n                    PAYOS_CONSTANT.RESPONSE_IFRAME_TYPE.STATUS,\n                    PAYOS_CONSTANT.RESPONSE_IFRAME_TYPE.ERROR,\n                ].includes(data === null || data === void 0 ? void 0 : data.type)) {\n                    _this.closeIframe();\n                    _this.onExit(data.data);\n                }\n                //Người dùng bấm Thanh toán hoặc Hủy thanh toán\n                else if ((data === null || data === void 0 ? void 0 : data.type) === PAYOS_CONSTANT.RESPONSE_IFRAME_TYPE.PAYMENT_RESPONSE) {\n                    // Người dùng hủy thanh toán\n                    if ((data === null || data === void 0 ? void 0 : data.data.status) === PAYOS_CONSTANT.PAYMENT_STATUS.CANCELLED) {\n                        _this.closeIframe();\n                        _this.onCancel(data.data);\n                    }\n                    //Thanh toán thành công\n                    if ((data === null || data === void 0 ? void 0 : data.data.status) === PAYOS_CONSTANT.PAYMENT_STATUS.PAID) {\n                        _this.closeIframe();\n                        _this.onSuccess(data.data);\n                    }\n                }\n            }\n        };\n        this.RETURN_URL = props.RETURN_URL;\n        this.ELEMENT_ID = props.ELEMENT_ID;\n        this.CHECKOUT_URL = props.CHECKOUT_URL;\n        this.embedded = (_a = props.embedded) !== null && _a !== void 0 ? _a : false;\n        if (props.onSuccess) {\n            this.onSuccess = props.onSuccess;\n        }\n        if (props.onExit) {\n            this.onExit = props.onExit;\n        }\n        if (props.onCancel) {\n            this.onCancel = props.onCancel;\n        }\n    }\n    PayOSCheckout.prototype.onSuccess = function (event) { };\n    PayOSCheckout.prototype.onExit = function (event) { };\n    PayOSCheckout.prototype.onCancel = function (event) { };\n    PayOSCheckout.prototype.openIframe = function () {\n        window.addEventListener(\"message\", this.receiveMessage, false);\n        var divElement = document.getElementById(this.ELEMENT_ID);\n        if (!divElement) {\n            console.error(\"Element ID:\".concat(this.ELEMENT_ID, \" not exist\"));\n            return;\n        }\n        var iframe = document.createElement(\"iframe\");\n        iframe.allow = \"clipboard-write\";\n        iframe.width = \"100%\";\n        if (this.embedded) {\n            iframe.src = \"\".concat(this.CHECKOUT_URL.replace(\"/web/\", \"/embedded/\"), \"?redirect_uri=\").concat(this.RETURN_URL);\n            iframe.height = \"100%\";\n            divElement.appendChild(iframe);\n            return;\n        }\n        iframe.src = \"\".concat(this.CHECKOUT_URL, \"?iframe=true&redirect_uri=\").concat(this.RETURN_URL);\n        iframe.height = window.innerHeight.toString();\n        iframe.allowFullscreen = true;\n        iframe.style.zIndex = \"1000\";\n        iframe.style.position = \"fixed\";\n        divElement.appendChild(iframe);\n    };\n    PayOSCheckout.prototype.closeIframe = function () {\n        var divElement = document.getElementById(this.ELEMENT_ID);\n        if (!divElement) {\n            console.error(\"Element ID:\".concat(this.ELEMENT_ID, \" not exist\"));\n            return;\n        }\n        var iframe = divElement.querySelector(\"iframe\");\n        if (iframe) {\n            divElement.removeChild(iframe);\n            window.removeEventListener(\"message\", this.receiveMessage, false);\n            return;\n        }\n        console.error(\"No iframe to remove\");\n    };\n    return PayOSCheckout;\n}());\nfunction usePayOS(config) {\n    var payOSCheckout = new PayOSCheckout(config);\n    return {\n        open: payOSCheckout.openIframe.bind(payOSCheckout),\n        exit: payOSCheckout.closeIframe.bind(payOSCheckout),\n    };\n}\nexports.usePayOS = usePayOS;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}