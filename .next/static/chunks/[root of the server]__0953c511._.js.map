{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack]/browser/dev/hmr-client/hmr-client.ts"],"sourcesContent":["/// <reference path=\"../../../shared/runtime-types.d.ts\" />\r\n/// <reference path=\"../../runtime/base/dev-globals.d.ts\" />\r\n/// <reference path=\"../../runtime/base/dev-protocol.d.ts\" />\r\n/// <reference path=\"../../runtime/base/dev-extensions.ts\" />\r\n\r\ntype SendMessage = (msg: any) => void;\r\nexport type WebSocketMessage =\r\n  | {\r\n      type: \"turbopack-connected\";\r\n    }\r\n  | {\r\n      type: \"turbopack-message\";\r\n      data: Record<string, any>;\r\n    };\r\n\r\n\r\nexport type ClientOptions = {\r\n  addMessageListener: (cb: (msg: WebSocketMessage) => void) => void;\r\n  sendMessage: SendMessage;\r\n  onUpdateError: (err: unknown) => void;\r\n};\r\n\r\nexport function connect({\r\n  addMessageListener,\r\n  sendMessage,\r\n  onUpdateError = console.error,\r\n}: ClientOptions) {\r\n  addMessageListener((msg) => {\r\n    switch (msg.type) {\r\n      case \"turbopack-connected\":\r\n        handleSocketConnected(sendMessage);\r\n        break;\r\n      default:\r\n        try {\r\n          if (Array.isArray(msg.data)) {\r\n            for (let i = 0; i < msg.data.length; i++) {\r\n              handleSocketMessage(msg.data[i] as ServerMessage);\r\n            }\r\n          } else {\r\n            handleSocketMessage(msg.data as ServerMessage);\r\n          }\r\n          applyAggregatedUpdates();\r\n        } catch (e: unknown) {\r\n          console.warn(\r\n            \"[Fast Refresh] performing full reload\\n\\n\" +\r\n              \"Fast Refresh will perform a full reload when you edit a file that's imported by modules outside of the React rendering tree.\\n\" +\r\n              \"You might have a file which exports a React component but also exports a value that is imported by a non-React component file.\\n\" +\r\n              \"Consider migrating the non-React component export to a separate file and importing it into both files.\\n\\n\" +\r\n              \"It is also possible the parent component of the component you edited is a class component, which disables Fast Refresh.\\n\" +\r\n              \"Fast Refresh requires at least one parent function component in your React tree.\"\r\n          );\r\n          onUpdateError(e);\r\n          location.reload();\r\n        }\r\n        break;\r\n    }\r\n  });\r\n\r\n  const queued = globalThis.TURBOPACK_CHUNK_UPDATE_LISTENERS;\r\n  if (queued != null && !Array.isArray(queued)) {\r\n    throw new Error(\"A separate HMR handler was already registered\");\r\n  }\r\n  globalThis.TURBOPACK_CHUNK_UPDATE_LISTENERS = {\r\n    push: ([chunkPath, callback]: [ChunkListPath, UpdateCallback]) => {\r\n      subscribeToChunkUpdate(chunkPath, sendMessage, callback);\r\n    },\r\n  };\r\n\r\n  if (Array.isArray(queued)) {\r\n    for (const [chunkPath, callback] of queued) {\r\n      subscribeToChunkUpdate(chunkPath, sendMessage, callback);\r\n    }\r\n  }\r\n}\r\n\r\ntype UpdateCallbackSet = {\r\n  callbacks: Set<UpdateCallback>;\r\n  unsubscribe: () => void;\r\n};\r\n\r\nconst updateCallbackSets: Map<ResourceKey, UpdateCallbackSet> = new Map();\r\n\r\nfunction sendJSON(sendMessage: SendMessage, message: ClientMessage) {\r\n  sendMessage(JSON.stringify(message));\r\n}\r\n\r\ntype ResourceKey = string;\r\n\r\nfunction resourceKey(resource: ResourceIdentifier): ResourceKey {\r\n  return JSON.stringify({\r\n    path: resource.path,\r\n    headers: resource.headers || null,\r\n  });\r\n}\r\n\r\nfunction subscribeToUpdates(\r\n  sendMessage: SendMessage,\r\n  resource: ResourceIdentifier\r\n): () => void {\r\n  sendJSON(sendMessage, {\r\n    type: \"turbopack-subscribe\",\r\n    ...resource,\r\n  });\r\n\r\n  return () => {\r\n    sendJSON(sendMessage, {\r\n      type: \"turbopack-unsubscribe\",\r\n      ...resource,\r\n    });\r\n  };\r\n}\r\n\r\nfunction handleSocketConnected(sendMessage: SendMessage) {\r\n  for (const key of updateCallbackSets.keys()) {\r\n    subscribeToUpdates(sendMessage, JSON.parse(key));\r\n  }\r\n}\r\n\r\n// we aggregate all pending updates until the issues are resolved\r\nconst chunkListsWithPendingUpdates: Map<ResourceKey, PartialServerMessage> =\r\n  new Map();\r\n\r\nfunction aggregateUpdates(msg: PartialServerMessage) {\r\n  const key = resourceKey(msg.resource);\r\n  let aggregated = chunkListsWithPendingUpdates.get(key);\r\n\r\n  if (aggregated) {\r\n    aggregated.instruction = mergeChunkListUpdates(\r\n      aggregated.instruction,\r\n      msg.instruction\r\n    );\r\n  } else {\r\n    chunkListsWithPendingUpdates.set(key, msg);\r\n  }\r\n}\r\n\r\nfunction applyAggregatedUpdates() {\r\n  if (chunkListsWithPendingUpdates.size === 0) return;\r\n  hooks.beforeRefresh();\r\n  for (const msg of chunkListsWithPendingUpdates.values()) {\r\n    triggerUpdate(msg);\r\n  }\r\n  chunkListsWithPendingUpdates.clear();\r\n  finalizeUpdate();\r\n}\r\n\r\nfunction mergeChunkListUpdates(\r\n  updateA: ChunkListUpdate,\r\n  updateB: ChunkListUpdate\r\n): ChunkListUpdate {\r\n  let chunks;\r\n  if (updateA.chunks != null) {\r\n    if (updateB.chunks == null) {\r\n      chunks = updateA.chunks;\r\n    } else {\r\n      chunks = mergeChunkListChunks(updateA.chunks, updateB.chunks);\r\n    }\r\n  } else if (updateB.chunks != null) {\r\n    chunks = updateB.chunks;\r\n  }\r\n\r\n  let merged;\r\n  if (updateA.merged != null) {\r\n    if (updateB.merged == null) {\r\n      merged = updateA.merged;\r\n    } else {\r\n      // Since `merged` is an array of updates, we need to merge them all into\r\n      // one, consistent update.\r\n      // Since there can only be `EcmascriptMergeUpdates` in the array, there is\r\n      // no need to key on the `type` field.\r\n      let update = updateA.merged[0];\r\n      for (let i = 1; i < updateA.merged.length; i++) {\r\n        update = mergeChunkListEcmascriptMergedUpdates(\r\n          update,\r\n          updateA.merged[i]\r\n        );\r\n      }\r\n\r\n      for (let i = 0; i < updateB.merged.length; i++) {\r\n        update = mergeChunkListEcmascriptMergedUpdates(\r\n          update,\r\n          updateB.merged[i]\r\n        );\r\n      }\r\n\r\n      merged = [update];\r\n    }\r\n  } else if (updateB.merged != null) {\r\n    merged = updateB.merged;\r\n  }\r\n\r\n  return {\r\n    type: \"ChunkListUpdate\",\r\n    chunks,\r\n    merged,\r\n  };\r\n}\r\n\r\nfunction mergeChunkListChunks(\r\n  chunksA: Record<ChunkPath, ChunkUpdate>,\r\n  chunksB: Record<ChunkPath, ChunkUpdate>\r\n): Record<ChunkPath, ChunkUpdate> {\r\n  const chunks: Record<ChunkPath, ChunkUpdate> = {};\r\n\r\n  for (const [chunkPath, chunkUpdateA] of Object.entries(chunksA) as Array<[ChunkPath, ChunkUpdate]>) {\r\n    const chunkUpdateB = chunksB[chunkPath];\r\n    if (chunkUpdateB != null) {\r\n      const mergedUpdate = mergeChunkUpdates(chunkUpdateA, chunkUpdateB);\r\n      if (mergedUpdate != null) {\r\n        chunks[chunkPath] = mergedUpdate;\r\n      }\r\n    } else {\r\n      chunks[chunkPath] = chunkUpdateA;\r\n    }\r\n  }\r\n\r\n  for (const [chunkPath, chunkUpdateB] of Object.entries(chunksB) as Array<[ChunkPath, ChunkUpdate]>) {\r\n    if (chunks[chunkPath] == null) {\r\n      chunks[chunkPath] = chunkUpdateB;\r\n    }\r\n  }\r\n\r\n  return chunks;\r\n}\r\n\r\nfunction mergeChunkUpdates(\r\n  updateA: ChunkUpdate,\r\n  updateB: ChunkUpdate\r\n): ChunkUpdate | undefined {\r\n  if (\r\n    (updateA.type === \"added\" && updateB.type === \"deleted\") ||\r\n    (updateA.type === \"deleted\" && updateB.type === \"added\")\r\n  ) {\r\n    return undefined;\r\n  }\r\n\r\n  if (updateA.type === \"partial\") {\r\n    invariant(updateA.instruction, \"Partial updates are unsupported\");\r\n  }\r\n\r\n  if (updateB.type === \"partial\") {\r\n    invariant(updateB.instruction, \"Partial updates are unsupported\");\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nfunction mergeChunkListEcmascriptMergedUpdates(\r\n  mergedA: EcmascriptMergedUpdate,\r\n  mergedB: EcmascriptMergedUpdate\r\n): EcmascriptMergedUpdate {\r\n  const entries = mergeEcmascriptChunkEntries(mergedA.entries, mergedB.entries);\r\n  const chunks = mergeEcmascriptChunksUpdates(mergedA.chunks, mergedB.chunks);\r\n\r\n  return {\r\n    type: \"EcmascriptMergedUpdate\",\r\n    entries,\r\n    chunks,\r\n  };\r\n}\r\n\r\nfunction mergeEcmascriptChunkEntries(\r\n  entriesA: Record<ModuleId, EcmascriptModuleEntry> | undefined,\r\n  entriesB: Record<ModuleId, EcmascriptModuleEntry> | undefined\r\n): Record<ModuleId, EcmascriptModuleEntry> {\r\n  return { ...entriesA, ...entriesB };\r\n}\r\n\r\nfunction mergeEcmascriptChunksUpdates(\r\n  chunksA: Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined,\r\n  chunksB: Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined\r\n): Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined {\r\n  if (chunksA == null) {\r\n    return chunksB;\r\n  }\r\n\r\n  if (chunksB == null) {\r\n    return chunksA;\r\n  }\r\n\r\n  const chunks: Record<ChunkPath, EcmascriptMergedChunkUpdate> = {};\r\n\r\n  for (const [chunkPath, chunkUpdateA] of Object.entries(chunksA) as Array<[ChunkPath, EcmascriptMergedChunkUpdate]>) {\r\n    const chunkUpdateB = chunksB[chunkPath];\r\n    if (chunkUpdateB != null) {\r\n      const mergedUpdate = mergeEcmascriptChunkUpdates(\r\n        chunkUpdateA,\r\n        chunkUpdateB\r\n      );\r\n      if (mergedUpdate != null) {\r\n        chunks[chunkPath] = mergedUpdate;\r\n      }\r\n    } else {\r\n      chunks[chunkPath] = chunkUpdateA;\r\n    }\r\n  }\r\n\r\n  for (const [chunkPath, chunkUpdateB] of Object.entries(chunksB) as Array<[ChunkPath, EcmascriptMergedChunkUpdate]>) {\r\n    if (chunks[chunkPath] == null) {\r\n      chunks[chunkPath] = chunkUpdateB;\r\n    }\r\n  }\r\n\r\n  if (Object.keys(chunks).length === 0) {\r\n    return undefined;\r\n  }\r\n\r\n  return chunks;\r\n}\r\n\r\nfunction mergeEcmascriptChunkUpdates(\r\n  updateA: EcmascriptMergedChunkUpdate,\r\n  updateB: EcmascriptMergedChunkUpdate\r\n): EcmascriptMergedChunkUpdate | undefined {\r\n  if (updateA.type === \"added\" && updateB.type === \"deleted\") {\r\n    // These two completely cancel each other out.\r\n    return undefined;\r\n  }\r\n\r\n  if (updateA.type === \"deleted\" && updateB.type === \"added\") {\r\n    const added = [];\r\n    const deleted = [];\r\n    const deletedModules = new Set(updateA.modules ?? []);\r\n    const addedModules = new Set(updateB.modules ?? []);\r\n\r\n    for (const moduleId of addedModules) {\r\n      if (!deletedModules.has(moduleId)) {\r\n        added.push(moduleId);\r\n      }\r\n    }\r\n\r\n    for (const moduleId of deletedModules) {\r\n      if (!addedModules.has(moduleId)) {\r\n        deleted.push(moduleId);\r\n      }\r\n    }\r\n\r\n    if (added.length === 0 && deleted.length === 0) {\r\n      return undefined;\r\n    }\r\n\r\n    return {\r\n      type: \"partial\",\r\n      added,\r\n      deleted,\r\n    };\r\n  }\r\n\r\n  if (updateA.type === \"partial\" && updateB.type === \"partial\") {\r\n    const added = new Set([...(updateA.added ?? []), ...(updateB.added ?? [])]);\r\n    const deleted = new Set([\r\n      ...(updateA.deleted ?? []),\r\n      ...(updateB.deleted ?? []),\r\n    ]);\r\n\r\n    if (updateB.added != null) {\r\n      for (const moduleId of updateB.added) {\r\n        deleted.delete(moduleId);\r\n      }\r\n    }\r\n\r\n    if (updateB.deleted != null) {\r\n      for (const moduleId of updateB.deleted) {\r\n        added.delete(moduleId);\r\n      }\r\n    }\r\n\r\n    return {\r\n      type: \"partial\",\r\n      added: [...added],\r\n      deleted: [...deleted],\r\n    };\r\n  }\r\n\r\n  if (updateA.type === \"added\" && updateB.type === \"partial\") {\r\n    const modules = new Set([\r\n      ...(updateA.modules ?? []),\r\n      ...(updateB.added ?? []),\r\n    ]);\r\n\r\n    for (const moduleId of updateB.deleted ?? []) {\r\n      modules.delete(moduleId);\r\n    }\r\n\r\n    return {\r\n      type: \"added\",\r\n      modules: [...modules],\r\n    };\r\n  }\r\n\r\n  if (updateA.type === \"partial\" && updateB.type === \"deleted\") {\r\n    // We could eagerly return `updateB` here, but this would potentially be\r\n    // incorrect if `updateA` has added modules.\r\n\r\n    const modules = new Set(updateB.modules ?? []);\r\n\r\n    if (updateA.added != null) {\r\n      for (const moduleId of updateA.added) {\r\n        modules.delete(moduleId);\r\n      }\r\n    }\r\n\r\n    return {\r\n      type: \"deleted\",\r\n      modules: [...modules],\r\n    };\r\n  }\r\n\r\n  // Any other update combination is invalid.\r\n\r\n  return undefined;\r\n}\r\n\r\nfunction invariant(_: never, message: string): never {\r\n  throw new Error(`Invariant: ${message}`);\r\n}\r\n\r\nconst CRITICAL = [\"bug\", \"error\", \"fatal\"];\r\n\r\nfunction compareByList(list: any[], a: any, b: any) {\r\n  const aI = list.indexOf(a) + 1 || list.length;\r\n  const bI = list.indexOf(b) + 1 || list.length;\r\n  return aI - bI;\r\n}\r\n\r\nconst chunksWithIssues: Map<ResourceKey, Issue[]> = new Map();\r\n\r\nfunction emitIssues() {\r\n  const issues = [];\r\n  const deduplicationSet = new Set();\r\n\r\n  for (const [_, chunkIssues] of chunksWithIssues) {\r\n    for (const chunkIssue of chunkIssues) {\r\n      if (deduplicationSet.has(chunkIssue.formatted)) continue;\r\n\r\n      issues.push(chunkIssue);\r\n      deduplicationSet.add(chunkIssue.formatted);\r\n    }\r\n  }\r\n\r\n  sortIssues(issues);\r\n\r\n  hooks.issues(issues);\r\n}\r\n\r\nfunction handleIssues(msg: ServerMessage): boolean {\r\n  const key = resourceKey(msg.resource);\r\n  let hasCriticalIssues = false;\r\n\r\n  for (const issue of msg.issues) {\r\n    if (CRITICAL.includes(issue.severity)) {\r\n      hasCriticalIssues = true;\r\n    }\r\n  }\r\n\r\n  if (msg.issues.length > 0) {\r\n    chunksWithIssues.set(key, msg.issues);\r\n  } else if (chunksWithIssues.has(key)) {\r\n    chunksWithIssues.delete(key);\r\n  }\r\n\r\n  emitIssues();\r\n\r\n  return hasCriticalIssues;\r\n}\r\n\r\nconst SEVERITY_ORDER = [\"bug\", \"fatal\", \"error\", \"warning\", \"info\", \"log\"];\r\nconst CATEGORY_ORDER = [\r\n  \"parse\",\r\n  \"resolve\",\r\n  \"code generation\",\r\n  \"rendering\",\r\n  \"typescript\",\r\n  \"other\",\r\n];\r\n\r\nfunction sortIssues(issues: Issue[]) {\r\n  issues.sort((a, b) => {\r\n    const first = compareByList(SEVERITY_ORDER, a.severity, b.severity);\r\n    if (first !== 0) return first;\r\n    return compareByList(CATEGORY_ORDER, a.category, b.category);\r\n  });\r\n}\r\n\r\nconst hooks = {\r\n  beforeRefresh: () => {},\r\n  refresh: () => {},\r\n  buildOk: () => {},\r\n  issues: (_issues: Issue[]) => {},\r\n};\r\n\r\nexport function setHooks(newHooks: typeof hooks) {\r\n  Object.assign(hooks, newHooks);\r\n}\r\n\r\nfunction handleSocketMessage(msg: ServerMessage) {\r\n  sortIssues(msg.issues);\r\n\r\n  handleIssues(msg);\r\n\r\n  switch (msg.type) {\r\n    case \"issues\":\r\n      // issues are already handled\r\n      break;\r\n    case \"partial\":\r\n      // aggregate updates\r\n      aggregateUpdates(msg);\r\n      break;\r\n    default:\r\n      // run single update\r\n      const runHooks = chunkListsWithPendingUpdates.size === 0;\r\n      if (runHooks) hooks.beforeRefresh();\r\n      triggerUpdate(msg);\r\n      if (runHooks) finalizeUpdate();\r\n      break;\r\n  }\r\n}\r\n\r\nfunction finalizeUpdate() {\r\n  hooks.refresh();\r\n  hooks.buildOk();\r\n\r\n  // This is used by the Next.js integration test suite to notify it when HMR\r\n  // updates have been completed.\r\n  // TODO: Only run this in test environments (gate by `process.env.__NEXT_TEST_MODE`)\r\n  if (globalThis.__NEXT_HMR_CB) {\r\n    globalThis.__NEXT_HMR_CB();\r\n    globalThis.__NEXT_HMR_CB = null;\r\n  }\r\n}\r\n\r\nfunction subscribeToChunkUpdate(\r\n  chunkListPath: ChunkListPath,\r\n  sendMessage: SendMessage,\r\n  callback: UpdateCallback\r\n): () => void {\r\n  return subscribeToUpdate(\r\n    {\r\n      path: chunkListPath,\r\n    },\r\n    sendMessage,\r\n    callback\r\n  );\r\n}\r\n\r\nexport function subscribeToUpdate(\r\n  resource: ResourceIdentifier,\r\n  sendMessage: SendMessage,\r\n  callback: UpdateCallback\r\n) {\r\n  const key = resourceKey(resource);\r\n  let callbackSet: UpdateCallbackSet;\r\n  const existingCallbackSet = updateCallbackSets.get(key);\r\n  if (!existingCallbackSet) {\r\n    callbackSet = {\r\n      callbacks: new Set([callback]),\r\n      unsubscribe: subscribeToUpdates(sendMessage, resource),\r\n    };\r\n    updateCallbackSets.set(key, callbackSet);\r\n  } else {\r\n    existingCallbackSet.callbacks.add(callback);\r\n    callbackSet = existingCallbackSet;\r\n  }\r\n\r\n  return () => {\r\n    callbackSet.callbacks.delete(callback);\r\n\r\n    if (callbackSet.callbacks.size === 0) {\r\n      callbackSet.unsubscribe();\r\n      updateCallbackSets.delete(key);\r\n    }\r\n  };\r\n}\r\n\r\nfunction triggerUpdate(msg: ServerMessage) {\r\n  const key = resourceKey(msg.resource);\r\n  const callbackSet = updateCallbackSets.get(key);\r\n  if (!callbackSet) {\r\n    return;\r\n  }\r\n\r\n  for (const callback of callbackSet.callbacks) {\r\n    callback(msg);\r\n  }\r\n\r\n  if (msg.type === \"notFound\") {\r\n    // This indicates that the resource which we subscribed to either does not exist or\r\n    // has been deleted. In either case, we should clear all update callbacks, so if a\r\n    // new subscription is created for the same resource, it will send a new \"subscribe\"\r\n    // message to the server.\r\n    // No need to send an \"unsubscribe\" message to the server, it will have already\r\n    // dropped the update stream before sending the \"notFound\" message.\r\n    updateCallbackSets.delete(key);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/utils/storage.js"],"sourcesContent":["import Cookies from 'js-cookie';\r\n\r\nconst TOKEN_KEY = 'token';\r\nconst REFRESH_TOKEN_KEY = 'refreshToken';\r\nconst USER_ID_KEY = 'userId';\r\nconst SESSION_ID_KEY = 'sessionId';\r\nconst CART_ID_KEY = 'cartId';\r\nconst ROLE = 'role';\r\n\r\n// Set token in cookies\r\nexport const setToken = (token) => Cookies.set(TOKEN_KEY, token, { expires: 7, secure: true, sameSite: 'Strict' });\r\n\r\n// Get token from cookies\r\nexport const getToken = () => Cookies.get(TOKEN_KEY);\r\n\r\n// Remove token from cookies\r\nexport const removeToken = () => Cookies.remove(TOKEN_KEY);\r\n\r\n// Set refresh token in cookies\r\nexport const setRefreshToken = (token) => Cookies.set(REFRESH_TOKEN_KEY, token, { expires: 7, secure: true, sameSite: 'Strict' });\r\n\r\n// Get refresh token from cookies\r\nexport const getRefreshToken = () => Cookies.get(REFRESH_TOKEN_KEY);\r\n\r\n// Remove refresh token from cookies\r\nexport const removeRefreshToken = () => Cookies.remove(REFRESH_TOKEN_KEY);\r\n\r\n// Set user ID in cookies\r\nexport const setUserId = (userId) => Cookies.set(USER_ID_KEY, userId, { expires: 7, secure: true, sameSite: 'Strict' });\r\n\r\n// Get user ID from cookies\r\nexport const getUserId = () => Cookies.get(USER_ID_KEY);\r\n\r\n// Remove user ID from cookies\r\nexport const removeUserId = () => Cookies.remove(USER_ID_KEY);\r\n\r\n// Set session ID in cookies\r\nexport const setSessionId = (sessionId) =>\r\n    Cookies.set(SESSION_ID_KEY, sessionId, { expires: 7, secure: false, sameSite: 'Strict' });\r\n\r\n// Get session ID from cookies\r\nexport const getSessionId = () => Cookies.get(SESSION_ID_KEY);\r\n\r\n// Remove session ID from cookies\r\nexport const removeSessionId = () => Cookies.remove(SESSION_ID_KEY);\r\n\r\n// Set cart ID in cookies\r\nexport const setCartId = (cartId) => Cookies.set(CART_ID_KEY, cartId, { expires: 7, secure: false, sameSite: 'Strict' });\r\n\r\n// Get cart ID from cookies\r\nexport const getCartId = () => Cookies.get(CART_ID_KEY);\r\n\r\n// Remove cart ID from cookies\r\nexport const removeCartId = () => Cookies.remove(CART_ID_KEY);\r\n\r\n// Set role in cookies\r\nexport const setRole = (role) => Cookies.set(ROLE, role, { expires: 7, secure: false, sameSite: 'Strict' });\r\n\r\n// Get role from cookies\r\nexport const getRole = () => Cookies.get(ROLE);\r\n\r\n// Remove role from cookies\r\nexport const removeRole = () => Cookies.remove(ROLE);\r\n\r\n// Clear all cookies\r\nexport const clearAllCookies = () => {\r\n    Cookies.remove(TOKEN_KEY);\r\n    Cookies.remove(REFRESH_TOKEN_KEY);\r\n    Cookies.remove(USER_ID_KEY);\r\n    Cookies.remove(SESSION_ID_KEY);\r\n    Cookies.remove(CART_ID_KEY);\r\n    Cookies.remove(ROLE);\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,YAAY;AAClB,MAAM,oBAAoB;AAC1B,MAAM,cAAc;AACpB,MAAM,iBAAiB;AACvB,MAAM,cAAc;AACpB,MAAM,OAAO;AAGN,MAAM,WAAW,CAAC,QAAU,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,WAAW,OAAO;QAAE,SAAS;QAAG,QAAQ;QAAM,UAAU;IAAS;AAGzG,MAAM,WAAW,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAGnC,MAAM,cAAc,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAGzC,MAAM,kBAAkB,CAAC,QAAU,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,mBAAmB,OAAO;QAAE,SAAS;QAAG,QAAQ;QAAM,UAAU;IAAS;AAGxH,MAAM,kBAAkB,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAG1C,MAAM,qBAAqB,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAGhD,MAAM,YAAY,CAAC,SAAW,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,aAAa,QAAQ;QAAE,SAAS;QAAG,QAAQ;QAAM,UAAU;IAAS;AAG9G,MAAM,YAAY,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAGpC,MAAM,eAAe,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAG1C,MAAM,eAAe,CAAC,YACzB,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,gBAAgB,WAAW;QAAE,SAAS;QAAG,QAAQ;QAAO,UAAU;IAAS;AAGpF,MAAM,eAAe,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAGvC,MAAM,kBAAkB,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAG7C,MAAM,YAAY,CAAC,SAAW,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,aAAa,QAAQ;QAAE,SAAS;QAAG,QAAQ;QAAO,UAAU;IAAS;AAG/G,MAAM,YAAY,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAGpC,MAAM,eAAe,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAG1C,MAAM,UAAU,CAAC,OAAS,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,MAAM,MAAM;QAAE,SAAS;QAAG,QAAQ;QAAO,UAAU;IAAS;AAGlG,MAAM,UAAU,IAAM,iJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;AAGlC,MAAM,aAAa,IAAM,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AAGxC,MAAM,kBAAkB;IAC3B,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACf,iJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;AACnB","debugId":null}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/store/slices/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { userApi } from '../../utils/apiClient.js';\r\n\r\n// Async actions\r\nexport const registerUser = createAsyncThunk(\r\n    'auth/registerUser',\r\n    async (userData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await userApi.register(userData);\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || error.message);\r\n        }\r\n    }\r\n);\r\n\r\nexport const verifyOtp = createAsyncThunk(\r\n    'auth/verifyOtp',\r\n    async (otpData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await userApi.verifyOtp(otpData);\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || error.message);\r\n        }\r\n    }\r\n);\r\n\r\nexport const loginUser = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async (credentials, { rejectWithValue }) => {\r\n        try {\r\n            const response = await userApi.login(credentials);\r\n            return response;\r\n        } catch (error) {\r\n            // Chuẩn hóa thông báo lỗi\r\n            return rejectWithValue({\r\n                status: 'error',\r\n                code: error.response?.data?.code || 400,\r\n                message: error.response?.data?.message === \"User not found\" || \r\n                        error.response?.data?.message === \"Invalid password\"\r\n                    ? \"Tài khoản hoặc mật khẩu không đúng\"\r\n                    : error.response?.data?.message || \"Đã có lỗi xảy ra\",\r\n                data: null\r\n            });\r\n        }\r\n    }\r\n);\r\n\r\nexport const logoutUser = createAsyncThunk(\r\n    'auth/logoutUser',\r\n    async (_, { rejectWithValue }) => {\r\n        try {\r\n            await userApi.logout();\r\n            return true;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || error.message);\r\n        }\r\n    }\r\n);\r\n\r\nexport const getUserInfo = createAsyncThunk(\r\n    'auth/getUserInfo',\r\n    async (_, { rejectWithValue }) => {\r\n        try {\r\n            const response = await userApi.getUserProfile();\r\n            return response; // Trả về dữ liệu người dùng\r\n        } catch (error) {\r\n            // Xử lý lỗi từ apiClient\r\n            console.error('Error fetching user info:', error);\r\n            return rejectWithValue(error.message || 'Failed to fetch user info');\r\n        }\r\n    }\r\n);\r\n\r\nexport const updateProfile = createAsyncThunk(\r\n    'auth/updateProfile',\r\n    async (userData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await userApi.updateUserProfile(userData);\r\n            // Đảm bảo trả về đúng dữ liệu user đã cập nhật\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue({\r\n                message: error.response?.data?.message || 'Không thể cập nhật thông tin.'\r\n            });\r\n        }\r\n    }\r\n);\r\n\r\n// Slice\r\nconst userSlice = createSlice({\r\n    name: 'auth',\r\n    initialState: {\r\n        user: null,\r\n        token: null,\r\n        loading: false,\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        resetAuthState: (state) => {\r\n            state.user = null;\r\n            state.token = null;\r\n            state.loading = false;\r\n            state.error = null;\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        // Register\r\n        builder.addCase(registerUser.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n        });\r\n        builder.addCase(registerUser.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.user = action.payload.user;\r\n        });\r\n        builder.addCase(registerUser.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n        });\r\n        // Verify OTP\r\n        builder.addCase(verifyOtp.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n        });\r\n        builder.addCase(verifyOtp.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.user = action.payload.user;\r\n        });\r\n        builder.addCase(verifyOtp.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n        });\r\n\r\n        // Login\r\n        builder.addCase(loginUser.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n        });\r\n        builder.addCase(loginUser.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.accessToken; \r\n        });\r\n        builder.addCase(loginUser.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n        });\r\n\r\n        // Logout\r\n        builder.addCase(logoutUser.pending, (state) => {\r\n            state.loading = true;\r\n        });\r\n        builder.addCase(logoutUser.fulfilled, (state) => {\r\n            state.user = null;\r\n            state.token = null;\r\n            state.loading = false;\r\n        });\r\n        builder.addCase(logoutUser.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n        });\r\n\r\n        // Get User Info\r\n        builder.addCase(getUserInfo.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n        });\r\n        builder.addCase(getUserInfo.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.user = action.payload;\r\n        });\r\n        builder.addCase(getUserInfo.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload || 'Failed to fetch user info';\r\n        });\r\n\r\n        // Update Profile\r\n        builder.addCase(updateProfile.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n        });\r\n        // Sửa lại reducer updateProfile.fulfilled\r\n        builder.addCase(updateProfile.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            // Cập nhật state với dữ liệu mới\r\n            state.user = {\r\n                ...state.user,\r\n                ...action.payload\r\n            };\r\n            state.error = null;\r\n        });\r\n        builder.addCase(updateProfile.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n        });\r\n    },\r\n});\r\n\r\n// Export actions và reducer\r\nexport const { resetAuthState } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/utils/apiClient.js"],"sourcesContent":["import axios from 'axios';\r\nimport {\r\n    getToken,\r\n    setToken,\r\n    getRefreshToken,\r\n    setRefreshToken,\r\n    getUserId,\r\n    setSessionId,\r\n    getSessionId,\r\n    removeSessionId,\r\n    removeRefreshToken,\r\n    removeUserId,\r\n    removeToken,\r\n    setCartId,\r\n    getCartId,\r\n    removeCartId,\r\n    clearAllCookies,\r\n    removeRole,\r\n    setRole,\r\n} from './storage';\r\nimport { resetAuthState } from '../store/slices/userSlice';\r\n\r\n// https://kltn-1a.onrender.com hihi, http://localhost:5551/v1/api/, https://c918-118-71-16-139.ngrok-free.app\r\n\r\nconst apiClient = axios.create({\r\n    baseURL: 'http://localhost:5551/v1/api/',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'ngrok-skip-browser-warning': 'true'\r\n    },\r\n    withCredentials: true\r\n});\r\n\r\n// **Request Interceptor**\r\napiClient.interceptors.request.use(\r\n    async (config) => {\r\n        try {\r\n            // Retrieve access token and session ID from cookies\r\n            const accessToken = getToken();\r\n            const sessionId = getSessionId();\r\n\r\n            // Add Authorization header if token exists\r\n            if (accessToken) {\r\n                config.headers['Authorization'] = `Bearer ${accessToken}`;\r\n            }\r\n\r\n            // Add session ID header if session ID exists\r\n            if (sessionId) {\r\n                config.headers['x-session-id'] = sessionId; // Add session ID to headers\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding headers:', error);\r\n        }\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\nconst MAX_RETRY_COUNT = 5; // Giới hạn số lần retry\r\n\r\n// Hàm delay với backoff logic\r\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n// Interceptor xử lý response\r\napiClient.interceptors.response.use(\r\n    (response) => {\r\n        console.log('Response received:', response);\r\n\r\n        // Lưu session ID nếu có trong response headers\r\n        const sessionId = response.headers?.['x-session-id'];\r\n        if (sessionId) {\r\n            setSessionId(sessionId); // Lưu vào cookie hoặc storage\r\n            console.log('Session ID saved from response:', sessionId);\r\n        }\r\n\r\n        return response;\r\n    },\r\n    async (error) => {\r\n        const originalRequest = error.config;\r\n\r\n        console.log('Error response:', error.response || 'No response available');\r\n\r\n        // Thêm thuộc tính _retryCount nếu chưa có\r\n        if (!originalRequest._retryCount) {\r\n            originalRequest._retryCount = 0;\r\n        }\r\n\r\n        // Kiểm tra lỗi từ Refresh Token\r\n        if (\r\n            error.response?.status === 403 &&\r\n            error.response?.data?.message === \"Refresh Token không tồn tại\"\r\n        ) {\r\n            console.log('Refresh token does not exist. Logging out...');\r\n            clearAllCookies(); // Xóa tất cả cookies\r\n            store.dispatch(resetAuthState()); // Reset trạng thái auth\r\n            return new Promise(() => { }); // Trả về Promise không lỗi\r\n        }\r\n\r\n        // Dừng retry nếu là request tới /users/refresh-token\r\n        if (originalRequest.url.includes('/users/refresh-token')) {\r\n            console.log('Refresh token request failed. Stopping retries.');\r\n            removeSessionId(); // Xóa session ID\r\n            store.dispatch(resetAuthState()); // Reset trạng thái auth\r\n            return new Promise(() => { }); // Trả về Promise không lỗi\r\n        }\r\n\r\n        // Nếu lỗi 403 và chưa đạt giới hạn retry\r\n        if (error.response?.status === 403 && originalRequest._retryCount < MAX_RETRY_COUNT) {\r\n            originalRequest._retryCount += 1; // Tăng số lần retry\r\n            console.log(`Retrying request (${originalRequest._retryCount}/${MAX_RETRY_COUNT})...`);\r\n\r\n            try {\r\n                // Lấy token mới\r\n                const newAccessToken = await userApi.refreshToken();\r\n                // Gắn token mới vào header\r\n                originalRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\r\n                return apiClient(originalRequest); // Retry request\r\n            } catch (refreshError) {\r\n                console.log('Error during token refresh:', refreshError);\r\n                return new Promise(() => { }); // Trả về Promise không lỗi\r\n            }\r\n        }\r\n\r\n        // Nếu vượt quá số lần retry\r\n        if (originalRequest._retryCount >= MAX_RETRY_COUNT) {\r\n            console.log('Maximum retry attempts reached.');\r\n            return new Promise(() => { }); // Trả về Promise không lỗi\r\n        }\r\n\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n\r\n// **User API**\r\nconst userApi = {\r\n    // Register user\r\n    register: async (userData) => {\r\n        try {\r\n            const response = await apiClient.post('users/register', userData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    resend_otp: async (email) => {\r\n        try {\r\n            const response = await apiClient.post('users/resend-otp', { email });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Verify OTP for registration\r\n    verifyOtp: async (otpData) => {\r\n        try {\r\n            const response = await apiClient.post('users/verify-otp', otpData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Login user\r\n    login: async (credentials) => {\r\n        try {\r\n            const response = await apiClient.post('users/login', credentials);\r\n            const { accessToken, refreshToken, user } = response.data.data;\r\n\r\n            if (accessToken && refreshToken) {\r\n                // Lấy cart_id trực tiếp từ user object\r\n                const cart_id = user.cart_id;\r\n\r\n                // Lưu các thông tin cần thiết\r\n\r\n                setRole('');\r\n                setToken(accessToken);\r\n                setRefreshToken(refreshToken);\r\n                removeCartId(); // Xóa cart ID cũ nếu có\r\n                // setCartId(cart_id); // Lưu cart ID mới\r\n            }\r\n\r\n            // Kiểm tra và lưu session ID từ headers\r\n            const sessionId = response.headers['x-session-id'];\r\n            if (sessionId) {\r\n                setSessionId(sessionId);\r\n                console.log('Session ID received and saved during login:', sessionId);\r\n            }\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Logout user\r\n    logout: async () => {\r\n        try {\r\n            const refreshToken = getRefreshToken();\r\n            const userId = getUserId();\r\n            await apiClient.post('users/logout', { refreshToken, userId });\r\n            // Clear all stored tokens and session ID\r\n            removeSessionId();\r\n            removeRefreshToken();\r\n            removeUserId();\r\n            removeSessionId();\r\n            removeToken();\r\n            removeCartId();\r\n            removeRole();\r\n\r\n            return { message: 'Logout successful' };\r\n        } catch (error) {\r\n            throw error.response?.data || 'Logout failed';\r\n        }\r\n    },\r\n\r\n    // Get user profile\r\n    getUserProfile: async () => {\r\n        try {\r\n            const response = await apiClient.get('users/profile');\r\n            return response.data.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch user profile';\r\n        }\r\n    },\r\n\r\n    // Refresh token\r\n    refreshToken: async () => {\r\n        try {\r\n            const get_refreshToken = getRefreshToken();\r\n            const get_userId = getUserId();\r\n            const response = await apiClient.post('users/refresh-token', { get_refreshToken });\r\n\r\n            const { accessToken, refreshToken: newRefreshToken } = response.data.data;\r\n\r\n            if (accessToken && newRefreshToken) {\r\n                setToken(accessToken); // Update access token\r\n                setRefreshToken(newRefreshToken); // Update refresh token\r\n            }\r\n\r\n            return accessToken; // Return the new access token\r\n        } catch (error) {\r\n            throw new Error('Token refresh failed. Please log in again.');\r\n        }\r\n    },\r\n\r\n    // Cập nhật thông tin profile người dùng\r\n    updateUserProfile: async (userData) => {\r\n        try {\r\n            const response = await apiClient.put('users/profile', userData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật thông tin người dùng.';\r\n        }\r\n    },\r\n\r\n    /**\r\n * Request password reset OTP\r\n * @param {Object} data - Request data\r\n * @param {string} data.email - User's email address\r\n * @returns {Promise<Object>} - API response\r\n */\r\n    forgotPassword: async (data) => {\r\n        try {\r\n            const response = await apiClient.post('users/forgot-password', data);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể gửi yêu cầu đặt lại mật khẩu.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset password using OTP\r\n     * @param {Object} data - Reset password data\r\n     * @param {string} data.email - User's email\r\n     * @param {string} data.otp - One-time password\r\n     * @param {string} data.newPassword - New password\r\n     * @returns {Promise<Object>} - API response\r\n     */\r\n    resetPassword: async (data) => {\r\n        try {\r\n            const response = await apiClient.post('users/reset-password', data);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể đặt lại mật khẩu.';\r\n        }\r\n    },\r\n\r\n};\r\n\r\nconst adminApi = {\r\n    /**\r\n     * Đăng nhập admin\r\n     * @param {Object} credentials - Dữ liệu đăng nhập (email và password)\r\n     * @returns {Promise<Object>} - Phản hồi từ API\r\n     */\r\n    loginForAdmin: async (credentials) => {\r\n        try {\r\n            const response = await apiClient.post('users/login-admin', credentials);\r\n\r\n            // Lấy token và vai trò từ phản hồi\r\n            const { accessToken, refreshToken, role } = response.data.data;\r\n\r\n            // Lưu token và role\r\n            if (accessToken && refreshToken) {\r\n                setToken(accessToken);\r\n                setRefreshToken(refreshToken);\r\n                setRole(role);\r\n\r\n            }\r\n\r\n            // Lưu session ID nếu có trong header\r\n            const sessionId = response.headers['x-session-id'];\r\n            if (sessionId) {\r\n                setSessionId(sessionId);\r\n            }\r\n\r\n            return { user: response.data.user, role }; // Trả về thông tin người dùng và vai trò\r\n        } catch (error) {\r\n            throw error.response?.data || error.message;\r\n        }\r\n    },\r\n\r\n    // Get all users (Admin only) \r\n    getAllUsers: async (params = {}) => {\r\n        try {\r\n            const { page = 1, limit = 10, email, phone, name } = params;\r\n            const query = new URLSearchParams({\r\n                page: String(page),\r\n                limit: String(limit)\r\n            });\r\n\r\n            if (email) query.append('email', email);\r\n            if (phone) query.append('phone', phone);\r\n            if (name) query.append('name', name);\r\n\r\n            const response = await apiClient.get(`users/admin/users?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch users list';\r\n        }\r\n    },\r\n\r\n    // Create new user (Admin only)\r\n    createUser: async (userData) => {\r\n        try {\r\n            const response = await apiClient.post('users/admin/users', userData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create user';\r\n        }\r\n    },\r\n\r\n    // Update user (Admin only) \r\n    updateUser: async (userId, userData) => {\r\n        try {\r\n            const response = await apiClient.put(`users/admin/users/${userId}`, userData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update user';\r\n        }\r\n    },\r\n\r\n    deleteUser: async (userId) => {\r\n        try {\r\n            const response = await apiClient.delete(`users/admin/users/${userId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to delete user';\r\n        }\r\n    },\r\n\r\n};\r\n\r\n// **Product API**\r\nconst productApi = {\r\n    // Create a new product\r\n    createProduct: async (productData) => {\r\n        const response = await apiClient.post('products/', productData);\r\n        return response.data;\r\n    },\r\n\r\n    // Get all products\r\n    getProducts: async () => {\r\n        const response = await apiClient.get('products');\r\n        return response.data.data;\r\n    },\r\n\r\n    // Get product details by slug\r\n    getProductDetail: async (slug) => {\r\n        const response = await apiClient.get(`products/${slug}`);\r\n        return response.data.data;\r\n    },\r\n\r\n    // Update product by slug\r\n    updateProduct: async (slug, productData) => {\r\n        const response = await apiClient.put(`products/${slug}`, productData);\r\n        return response.data;\r\n    },\r\n\r\n    // Delete product by slug\r\n    deleteProduct: async (slug) => {\r\n        const response = await apiClient.delete(`products/${slug}`);\r\n        return response.data;\r\n    },\r\n\r\n    // Get products with pagination\r\n    getProductsByPagination: async (params = {}) => {\r\n        try {\r\n            const {\r\n                page = 1,\r\n                limit = 20,\r\n                name,\r\n                categories,\r\n                colorIds,\r\n                sizes,\r\n                priceRange,\r\n                sort = 'newest'\r\n            } = params;\r\n\r\n            // Xây dựng query parameters\r\n            const queryParams = new URLSearchParams({\r\n                page: String(page),\r\n                limit: String(limit)\r\n            });\r\n\r\n            // Thêm các filter tùy chọn\r\n            if (name) queryParams.append('name', name);\r\n            if (categories) queryParams.append('categories', categories);\r\n            if (colorIds) queryParams.append('colors', colorIds);\r\n            if (sizes) queryParams.append('sizes', sizes);\r\n            if (priceRange) queryParams.append('priceRange', priceRange);\r\n            if (sort) queryParams.append('sort', sort);\r\n\r\n            console.log('API call to:', `products/pagination?${queryParams.toString()}`);\r\n\r\n            const response = await apiClient.get(`products/pagination?${queryParams.toString()}`);\r\n            console.log('API response:', response.data);\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching products:', error);\r\n            throw error.response?.data || 'Failed to fetch products.';\r\n        }\r\n    },\r\n\r\n    // Get new products with pagination\r\n    getNewProductsByPagination: async (page, limit, sort, priceRange, colorIds) => {\r\n        try {\r\n            const query = new URLSearchParams({\r\n                page,\r\n                limit,\r\n                sort,\r\n                priceRange: priceRange || '',\r\n                colorIds: colorIds || '',\r\n            }).toString();\r\n\r\n            const response = await apiClient.get(`products/new?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching new products:', error);\r\n            throw error.response?.data || 'Failed to fetch new products.';\r\n        }\r\n    },\r\n\r\n    // Get featured products with pagination\r\n    getFeaturedProductsByPagination: async (page, limit, sort, priceRange, colorIds) => {\r\n        try {\r\n            const query = new URLSearchParams({\r\n                page,\r\n                limit,\r\n                sort,\r\n                priceRange: priceRange || '',\r\n                colorIds: colorIds || '',\r\n            }).toString();\r\n\r\n            const response = await apiClient.get(`products/featured?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching featured products:', error);\r\n            throw error.response?.data || 'Failed to fetch featured products.';\r\n        }\r\n    },\r\n\r\n    searchProductsByNameAndColor: async (keyword, options = {}) => {\r\n        try {\r\n            const {\r\n                page = 1,\r\n                limit = 20,\r\n                sort = 'newest'\r\n            } = options;\r\n\r\n            const query = new URLSearchParams({\r\n                keyword: keyword || '',\r\n                page: String(page),\r\n                limit: String(limit),\r\n                sort\r\n            }).toString();\r\n\r\n            const response = await apiClient.get(`products/search/name-color?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error searching products:', error);\r\n            throw error.response?.data || 'Không thể tìm kiếm sản phẩm.';\r\n        }\r\n    },\r\n\r\n};\r\n\r\n\r\nconst cartApi = {\r\n    // Tạo giỏ hàng cho khách\r\n    createCartForGuest: async (cartData) => {\r\n        try {\r\n            const response = await apiClient.post('carts/guest', cartData);\r\n            const { id } = response.data.data;\r\n            if (id) {\r\n                console.log('Cart ID:', id);\r\n                setCartId(id); // Lưu cart ID vào cookie hoặc storage\r\n            }\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create cart for guest.';\r\n        }\r\n    },\r\n\r\n    // Tạo hoặc lấy giỏ hàng cho người dùng đã đăng nhập\r\n    createCartForUser: async () => {\r\n        try {\r\n            const response = await apiClient.post('carts/user');\r\n            const { id } = response.data.data;\r\n            if (id) {\r\n                console.log('Cart ID:', id);\r\n                setCartId(id); // Lưu cart ID vào cookie hoặc storage\r\n            }\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create or retrieve cart for user.';\r\n        }\r\n    },\r\n\r\n    // Lấy chi tiết giỏ hàng theo ID\r\n    getCartById: async (cartId) => {\r\n        try {\r\n            const response = await apiClient.get(`carts/${cartId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch cart details.';\r\n        }\r\n    },\r\n\r\n    // Thêm sản phẩm vào giỏ hàng\r\n    addItemToCart: async (cartId, itemData) => {\r\n        try {\r\n            const response = await apiClient.post(`carts/${cartId}/items`, itemData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to add item to cart.';\r\n        }\r\n    },\r\n\r\n\r\n    // Xóa sản phẩm khỏi giỏ hàng\r\n    removeCartItem: async (itemId) => {\r\n        try {\r\n            const response = await apiClient.delete(`carts/items/${itemId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to remove item from cart.';\r\n        }\r\n    },\r\n\r\n    // Lấy tất cả sản phẩm trong giỏ hàng\r\n    getCartItems: async (cartId) => {\r\n        try {\r\n            const response = await apiClient.get(`carts/${cartId}/items`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch cart items.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật số lượng sản phẩm trong giỏ hàng\r\n    updateCartItemQuantity: async (itemId, quantity) => {\r\n        try {\r\n            const response = await apiClient.put(`carts/item/${itemId}`, { quantity });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update cart item quantity.';\r\n        }\r\n    },\r\n};\r\n\r\nconst reviewApi = {\r\n    // Tạo mới một review\r\n    createReview: async (reviewData) => {\r\n        try {\r\n            const response = await apiClient.post('reviews/', reviewData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create review.';\r\n        }\r\n    },\r\n\r\n    // Lấy danh sách review của một sản phẩm\r\n    getReviewsByProduct: async (productId, page, limit) => {\r\n        try {\r\n            const response = await apiClient.get(`reviews/product/${productId}?page=${page}&limit=${limit}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch reviews.';\r\n        }\r\n    },\r\n\r\n    // Lấy điểm trung bình của một sản phẩm\r\n    getAverageRating: async (productId) => {\r\n        try {\r\n            const response = await apiClient.get(`reviews/product/${productId}/average-rating`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch average rating.';\r\n        }\r\n    },\r\n\r\n    // Xóa một review\r\n    deleteReview: async (reviewId) => {\r\n        try {\r\n            const response = await apiClient.delete(`reviews/${reviewId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to delete review.';\r\n        }\r\n    },\r\n};\r\n\r\nconst productsByCategoryApi = {\r\n    // Fetch all products by category\r\n    getProductsByCategory: async (categoryId, page, limit, sort, priceRange, colorIds) => {\r\n        try {\r\n            const query = new URLSearchParams({\r\n                page,\r\n                limit,\r\n                sort,\r\n                priceRange: priceRange || '',\r\n                colorIds: colorIds || '',\r\n            }).toString();\r\n\r\n            const response = await apiClient.get(`products-by-category/${categoryId}?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch products by category.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật danh mục cho sản phẩm\r\n    updateProductCategories: async (productId, categoryIds) => {\r\n        try {\r\n            // Validate input\r\n            if (!Array.isArray(categoryIds)) {\r\n                throw new Error('categoryIds phải là một mảng');\r\n            }\r\n\r\n            if (categoryIds.length === 0) {\r\n                throw new Error('Phải có ít nhất một danh mục');\r\n            }\r\n\r\n            const response = await apiClient.put(\r\n                `products-by-category/product/${productId}/categories`,\r\n                { categoryIds }\r\n            );\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            // Xử lý các loại lỗi cụ thể\r\n            if (error.response) {\r\n                switch (error.response.status) {\r\n                    case 400:\r\n                        throw new Error(error.response.data.message || 'Dữ liệu đầu vào không hợp lệ');\r\n                    case 404:\r\n                        throw new Error(error.response.data.message || 'Không tìm thấy sản phẩm hoặc danh mục');\r\n                    case 500:\r\n                        throw new Error(error.response.data.message || 'Lỗi máy chủ khi cập nhật danh mục sản phẩm');\r\n                    default:\r\n                        throw new Error(error.response.data.message || 'Lỗi không xác định');\r\n                }\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n\r\n\r\nconst colorsApi = {\r\n    // Fetch all colors\r\n    getColors: async () => {\r\n        try {\r\n            const response = await apiClient.get('colors');\r\n            return response.data.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch colors.';\r\n        }\r\n    },\r\n}\r\n\r\nconst indexApi = {\r\n    getNewProducts: async (page, limit) => {\r\n        const response = await apiClient.get('/products/news', {\r\n            params: { page, limit },\r\n        });\r\n        return response.data;\r\n    },\r\n    getFeaturedProducts: async (page, limit) => {\r\n        const response = await apiClient.get('/products/featureds', {\r\n            params: { page, limit },\r\n        });\r\n        return response.data;\r\n    },\r\n};\r\n\r\nconst orderApi = {\r\n    /**\r\n     * Create a new order\r\n     * @param {Object} orderData - Order details\r\n     * @returns {Promise<Object>} - Created order response\r\n     */\r\n    createOrder: async (orderData) => {\r\n        try {\r\n            const response = await apiClient.post('orders', orderData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create order.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get an order by ID\r\n     * @param {number} orderId - ID of the order\r\n     * @returns {Promise<Object>} - Order details\r\n     */\r\n    getOrderById: async (orderId) => {\r\n        try {\r\n            const response = await apiClient.get(`orders/${orderId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch order details.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update order status\r\n     * @param {number} orderId - ID of the order\r\n     * @param {string} status - New status ('pending', 'completed', 'canceled', etc.)\r\n     * @returns {Promise<Object>} - Response status\r\n     */\r\n    updateOrderStatus: async (orderId, status) => {\r\n        try {\r\n            const response = await apiClient.patch(`orders/${orderId}/status`, { status });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update order status.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Cancel expired orders\r\n     * @returns {Promise<Object>} - Response status\r\n     */\r\n    cancelExpiredOrders: async () => {\r\n        try {\r\n            const response = await apiClient.post('orders/cancel-expired');\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to cancel expired orders.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Complete an order\r\n     * @param {number} orderId - ID of the order\r\n     * @returns {Promise<Object>} - Response status\r\n     */\r\n    completeOrder: async (orderId) => {\r\n        try {\r\n            const response = await apiClient.post(`orders/${orderId}/complete`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to complete order.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Delete an order by ID\r\n     * @param {number} orderId - ID of the order\r\n     * @returns {Promise<Object>} - Response status\r\n     */\r\n    deleteOrder: async (orderId) => {\r\n        try {\r\n            const response = await apiClient.delete(`orders/${orderId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to delete order.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get orders by user with pagination\r\n     * @param {Object} params - Query parameters\r\n     * @param {number} params.page - Page number\r\n     * @param {number} params.limit - Items per page\r\n     * @returns {Promise<Object>} - Paginated user orders\r\n     */\r\n    getOrdersByUser: async ({ page = 1, limit = 10 }) => {\r\n        try {\r\n            const response = await apiClient.get(`orders/user`, {\r\n                params: { page, limit }\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách đơn hàng.';\r\n        }\r\n    },\r\n\r\n    getAllOrders: async ({\r\n        page = 1,\r\n        limit = 10,\r\n        status,\r\n        startDate,\r\n        endDate,\r\n        orderId,           // Thêm filter mã đơn hàng\r\n        customerName,      // Thêm filter tên khách hàng  \r\n        customerEmail,     // Thêm filter email\r\n        customerPhone      // Thêm filter số điện thoại\r\n    }) => {\r\n        try {\r\n            // Tạo query params\r\n            const params = new URLSearchParams({\r\n                page: String(page),\r\n                limit: String(limit)\r\n            });\r\n\r\n            // Thêm các filter hiện tại\r\n            if (status) {\r\n                params.append('status', status);\r\n            }\r\n            if (startDate) {\r\n                params.append('startDate', startDate);\r\n            }\r\n            if (endDate) {\r\n                params.append('endDate', endDate);\r\n            }\r\n\r\n            // Thêm các filter mới\r\n            if (orderId) {\r\n                params.append('orderId', orderId);\r\n            }\r\n            if (customerName) {\r\n                params.append('customerName', customerName);\r\n            }\r\n            if (customerEmail) {\r\n                params.append('customerEmail', customerEmail);\r\n            }\r\n            if (customerPhone) {\r\n                params.append('customerPhone', customerPhone);\r\n            }\r\n\r\n            const response = await apiClient.get(`orders?${params}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách đơn hàng.';\r\n        }\r\n    },\r\n\r\n    /**\r\n * Gửi email xác nhận đơn hàng\r\n * @param {Object} data - Dữ liệu đơn hàng\r\n * @param {Array} data.checkoutItems - Danh sách sản phẩm đặt hàng\r\n * @param {Object} data.orderDetails - Chi tiết đơn hàng\r\n * @returns {Promise<Object>} - Kết quả gửi email\r\n */\r\n    sendOrderConfirmation: async (data) => {\r\n        try {\r\n            const response = await apiClient.post('orders/send-order-confirmation', data);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể gửi email xác nhận đơn hàng.';\r\n        }\r\n    },\r\n};\r\n\r\nconst paymentApi = {\r\n    /**\r\n     * Tạo thanh toán qua PayOS\r\n     * @param {Object} paymentData - Dữ liệu thanh toán\r\n     * @returns {Promise<Object>} - Thông tin thanh toán\r\n     */\r\n    createPayOSPayment: async (paymentData) => {\r\n        try {\r\n            const response = await apiClient.post('payments/payos', paymentData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tạo thanh toán PayOS.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Tạo thanh toán COD (Cash On Delivery)\r\n     * @param {Object} codData - Dữ liệu thanh toán COD\r\n     * @returns {Promise<Object>} - Thông tin thanh toán COD\r\n     */\r\n    createCODPayment: async (codData) => {\r\n        try {\r\n            const response = await apiClient.post('payments/cod', codData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tạo thanh toán COD.';\r\n        }\r\n    },\r\n\r\n    updatePaymentStatus: async (statusData) => {\r\n        try {\r\n            const response = await apiClient.post('payments/payos-webhook', statusData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật trạng thái thanh toán.';\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Cập nhật trạng thái thanh toán\r\n     * @param {Object} statusData - Dữ liệu cập nhật trạng thái\r\n     * @param {string} statusData.orderId - ID đơn hàng\r\n     * @param {string} statusData.paymentMethod - Phương thức thanh toán ('payos' hoặc 'cash_on_delivery')\r\n     * @param {string} statusData.paymentStatus - Trạng thái thanh toán ('pending', 'processing', 'paid', 'cancelled')\r\n     * @returns {Promise<Object>} - Kết quả cập nhật\r\n     */\r\n    updatePaymentMethodStatus: async (statusData) => {\r\n        try {\r\n            const response = await apiClient.put('payments/update-status', statusData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật trạng thái thanh toán.';\r\n        }\r\n    }\r\n};\r\n\r\nconst stockApi = {\r\n    // Lấy thông tin tồn kho\r\n    getProductStocks: async () => {\r\n        try {\r\n            const response = await apiClient.get('product-stocks');\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch product stocks.';\r\n        }\r\n    },\r\n\r\n    updateStock: async (stockId, stockData) => {\r\n        try {\r\n            const response = await apiClient.put(`product-stocks/${stockId}`, stockData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update stock.';\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst carrierApi = {\r\n    // Tạo nhà vận chuyển mới\r\n    createCarrier: async (carrierData) => {\r\n        try {\r\n            const response = await apiClient.post('carriers', carrierData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to create carrier.';\r\n        }\r\n    },\r\n\r\n    // Lấy danh sách nhà vận chuyển\r\n    getCarriers: async (query = {}) => {\r\n        try {\r\n            const { page = 1, limit = 10 } = query;\r\n            const queryString = new URLSearchParams({ page, limit }).toString();\r\n            const response = await apiClient.get(`carriers?${queryString}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch carriers.';\r\n        }\r\n    },\r\n\r\n    // Lấy chi tiết nhà vận chuyển\r\n    getCarrierById: async (id) => {\r\n        try {\r\n            const response = await apiClient.get(`carriers/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to fetch carrier details.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật thông tin nhà vận chuyển\r\n    updateCarrier: async (id, carrierData) => {\r\n        try {\r\n            const response = await apiClient.put(`carriers/${id}`, carrierData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update carrier.';\r\n        }\r\n    },\r\n\r\n    // Xóa nhà vận chuyển\r\n    deleteCarrier: async (id) => {\r\n        try {\r\n            const response = await apiClient.delete(`carriers/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to delete carrier.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật trạng thái nhà vận chuyển\r\n    updateCarrierStatus: async (id, status) => {\r\n        try {\r\n            const response = await apiClient.patch(`carriers/${id}/status`, { status });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Failed to update carrier status.';\r\n        }\r\n    }\r\n};\r\n\r\nconst addressApi = {\r\n    // Lấy danh sách địa chỉ của người dùng\r\n    getAddresses: async () => {\r\n        try {\r\n            const response = await apiClient.get('addresses');\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách địa chỉ.';\r\n        }\r\n    },\r\n\r\n    // Tạo địa chỉ mới\r\n    createAddress: async (addressData) => {\r\n        try {\r\n            const response = await apiClient.post('addresses', addressData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tạo địa chỉ mới.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật địa chỉ\r\n    updateAddress: async (addressId, addressData) => {\r\n        try {\r\n            const response = await apiClient.put(`addresses/${addressId}`, addressData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật địa chỉ.';\r\n        }\r\n    },\r\n\r\n    // Xóa địa chỉ\r\n    deleteAddress: async (addressId) => {\r\n        try {\r\n            const response = await apiClient.delete(`addresses/${addressId}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể xóa địa chỉ.';\r\n        }\r\n    },\r\n\r\n    // Đặt địa chỉ làm mặc định\r\n    setDefaultAddress: async (addressId) => {\r\n        try {\r\n            const response = await apiClient.put(`addresses/${addressId}/default`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể đặt địa chỉ mặc định.';\r\n        }\r\n    }\r\n};\r\n\r\nconst favoriteApi = {\r\n    // Kiểm tra trạng thái yêu thích của sản phẩm\r\n    checkFavoriteStatus: async (productId) => {\r\n        try {\r\n            const response = await apiClient.get(`favorites/products/${productId}/favorite`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể kiểm tra trạng thái yêu thích.';\r\n        }\r\n    },\r\n\r\n    // Lấy danh sách sản phẩm yêu thích\r\n    getFavorites: async (page = 1, limit = 10) => {\r\n        try {\r\n            const response = await apiClient.get('favorites/favorites', {\r\n                params: { page, limit }\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách yêu thích.';\r\n        }\r\n    },\r\n\r\n    // Thêm sản phẩm vào danh sách yêu thích\r\n    addToFavorite: async (productId) => {\r\n        try {\r\n            const response = await apiClient.post(`favorites/products/${productId}/favorite`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể thêm vào yêu thích.';\r\n        }\r\n    },\r\n\r\n    // Xóa sản phẩm khỏi danh sách yêu thích\r\n    removeFromFavorite: async (productId) => {\r\n        try {\r\n            const response = await apiClient.delete(`favorites/products/${productId}/favorite`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể xóa khỏi yêu thích.';\r\n        }\r\n    },\r\n\r\n    // Chuyển danh sách yêu thích từ session sang tài khoản\r\n    transferFavorites: async () => {\r\n        try {\r\n            const response = await apiClient.post('favorites/favorites/transfer');\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể chuyển danh sách yêu thích.';\r\n        }\r\n    }\r\n};\r\n\r\nconst orderTrackingApi = {\r\n    /**\r\n     * Tra cứu thông tin đơn hàng\r\n     * @param {string} orderId - Mã đơn hàng\r\n     * @param {string} identifier - Email hoặc số điện thoại người đặt\r\n     * @returns {Promise<Object>} - Thông tin đơn hàng\r\n     */\r\n    trackOrder: async (orderId, identifier) => {\r\n        try {\r\n            const response = await apiClient.get(`order-tracking/${orderId}`, {\r\n                params: { identifier }\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tra cứu thông tin đơn hàng.';\r\n        }\r\n    }\r\n};\r\n\r\nconst couponApi = {\r\n    // Tạo mã giảm giá mới (Admin)\r\n    createCoupon: async (couponData) => {\r\n        try {\r\n            const response = await apiClient.post('coupons', couponData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tạo mã giảm giá.';\r\n        }\r\n    },\r\n\r\n    // Lấy danh sách mã giảm giá (Admin)\r\n    getAllCoupons: async (params = {}) => {\r\n        try {\r\n            const {\r\n                page = 1,\r\n                limit = 10,\r\n                search,\r\n                is_active,\r\n                startDate,\r\n                endDate,\r\n                minAmount,\r\n                maxAmount,\r\n                sortBy = 'created_at',\r\n                sortOrder = 'DESC'\r\n            } = params;\r\n\r\n            // Xây dựng query parameters\r\n            const query = new URLSearchParams({\r\n                page: String(page),\r\n                limit: String(limit)\r\n            });\r\n\r\n            // Thêm các filter tùy chọn\r\n            if (search) {\r\n                query.append('search', search);\r\n            }\r\n\r\n            if (typeof is_active !== 'undefined') {\r\n                query.append('is_active', is_active);\r\n            }\r\n\r\n            if (startDate) {\r\n                query.append('startDate', startDate);\r\n            }\r\n\r\n            if (endDate) {\r\n                query.append('endDate', endDate);\r\n            }\r\n\r\n            if (minAmount) {\r\n                query.append('minAmount', minAmount);\r\n            }\r\n\r\n            if (maxAmount) {\r\n                query.append('maxAmount', maxAmount);\r\n            }\r\n\r\n            if (sortBy) {\r\n                query.append('sortBy', sortBy);\r\n            }\r\n\r\n            if (sortOrder) {\r\n                query.append('sortOrder', sortOrder);\r\n            }\r\n\r\n            const response = await apiClient.get(`coupons?${query}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách mã giảm giá.';\r\n        }\r\n    },\r\n\r\n    // Lấy chi tiết mã giảm giá (Admin)\r\n    getCouponById: async (id) => {\r\n        try {\r\n            const response = await apiClient.get(`coupons/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy thông tin mã giảm giá.';\r\n        }\r\n    },\r\n\r\n    // Kiểm tra mã giảm giá (Public)\r\n    validateCoupon: async (code, orderAmount) => {\r\n        try {\r\n            const response = await apiClient.post('coupons/validate', { code, orderAmount });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Mã giảm giá không hợp lệ.';\r\n        }\r\n    },\r\n\r\n    // Áp dụng mã giảm giá (Public)\r\n    applyCoupon: async (code, orderAmount) => {\r\n        try {\r\n            const response = await apiClient.post('coupons/apply', { code, orderAmount });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể áp dụng mã giảm giá.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật mã giảm giá (Admin)\r\n    updateCoupon: async (id, updateData) => {\r\n        try {\r\n            const response = await apiClient.put(`coupons/${id}`, updateData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật mã giảm giá.';\r\n        }\r\n    },\r\n\r\n    // Xóa mã giảm giá (Admin)\r\n    deleteCoupon: async (id) => {\r\n        try {\r\n            const response = await apiClient.delete(`coupons/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể xóa mã giảm giá.';\r\n        }\r\n    }\r\n};\r\n\r\nconst revenueApi = {\r\n    // Lấy thống kê doanh thu\r\n    getRevenueStats: async (filters = {}) => {\r\n        try {\r\n            console.log('Calling getRevenueStats API...');\r\n            const queryParams = new URLSearchParams();\r\n            if (filters.startDate) {\r\n                queryParams.append('startDate', filters.startDate);\r\n            }\r\n            if (filters.endDate) {\r\n                queryParams.append('endDate', filters.endDate);\r\n            }\r\n\r\n            const response = await apiClient.get(`revenue/stats?${queryParams}`);\r\n            console.log('Raw API response:', response);\r\n            return response;\r\n        } catch (error) {\r\n            console.error('Error in getRevenueStats:', error);\r\n            // Ném ra error object đầy đủ thay vì chỉ message\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Lấy doanh thu theo ngày\r\n    getDailyRevenue: async (date) => {\r\n        try {\r\n            const response = await apiClient.get('revenue/daily', {\r\n                params: { date }\r\n            });\r\n            return response;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy doanh thu theo ngày.';\r\n        }\r\n    },\r\n\r\n    // Lấy doanh thu theo tháng\r\n    getMonthlyRevenue: async (year, month) => {\r\n        try {\r\n            const response = await apiClient.get('revenue/monthly', {\r\n                params: { year, month }\r\n            });\r\n            return response;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy doanh thu theo tháng.';\r\n        }\r\n    }\r\n};\r\n\r\nconst invoiceApi = {\r\n    // Tạo hóa đơn mới từ đơn hàng đã hoàn thành\r\n    // POST /api/invoices/create\r\n    createInvoice: (orderData) => apiClient.post('/invoices/create', orderData),\r\n\r\n    // Lấy chi tiết hóa đơn theo ID\r\n    // GET /api/invoices/:id\r\n    getInvoiceById: (id) => apiClient.get(`/invoices/${id}`),\r\n\r\n    // Lấy tất cả hóa đơn với phân trang\r\n    // GET /api/invoices?page=1&limit=10\r\n    getAllInvoices: (params) => apiClient.get('/invoices', { params }),\r\n\r\n    // Tìm kiếm hóa đơn\r\n    // GET /api/invoices/search?invoiceNumber=IV&page=1&limit=10\r\n    searchInvoices: (params) => apiClient.get('/invoices/search', { params }),\r\n\r\n    // Tạo và tải file PDF cho hóa đơn\r\n    // GET /api/invoices/:id/pdf\r\n    generateInvoicePDF: async (id, orderId) => {\r\n        try {\r\n            const response = await apiClient.get(`/invoices/${id}/pdf/${orderId}`, {\r\n                responseType: 'blob'\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || error.message;\r\n        }\r\n    }\r\n};\r\n\r\nconst categoriesApi = {\r\n    // Lấy tất cả danh mục\r\n    getAllCategories: async () => {\r\n        try {\r\n            const response = await apiClient.get('categories');\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy danh sách danh mục.';\r\n        }\r\n    },\r\n\r\n    // Lấy danh mục theo ID\r\n    getCategoryById: async (id) => {\r\n        try {\r\n            const response = await apiClient.get(`categories/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể lấy thông tin danh mục.';\r\n        }\r\n    },\r\n\r\n    // Tạo danh mục mới (Admin only)\r\n    createCategory: async (categoryData) => {\r\n        try {\r\n            const response = await apiClient.post('categories', categoryData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể tạo danh mục mới.';\r\n        }\r\n    },\r\n\r\n    // Cập nhật danh mục (Admin only)\r\n    updateCategory: async (id, categoryData) => {\r\n        try {\r\n            const response = await apiClient.put(`categories/${id}`, categoryData);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể cập nhật danh mục.';\r\n        }\r\n    },\r\n\r\n    // Xóa danh mục (Admin only) \r\n    deleteCategory: async (id) => {\r\n        try {\r\n            const response = await apiClient.delete(`categories/${id}`);\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || 'Không thể xóa danh mục.';\r\n        }\r\n    }\r\n};\r\n\r\n\r\n// export { apiClient, userApi, productApi, cartApi, reviewApi, productsByCategoryApi, colorsApi, indexApi, adminApi, orderApi, paymentApi, stockApi, carrierApi, addressApi, favoriteApi, orderTrackingApi, couponApi };\r\nexport {\r\n    apiClient,\r\n    userApi,\r\n    productApi,\r\n    cartApi,\r\n    reviewApi,\r\n    productsByCategoryApi,\r\n    colorsApi,\r\n    indexApi,\r\n    adminApi,\r\n    orderApi,\r\n    paymentApi,\r\n    stockApi,\r\n    carrierApi,\r\n    addressApi,\r\n    favoriteApi,\r\n    orderTrackingApi,\r\n    couponApi,\r\n    revenueApi,\r\n    invoiceApi,\r\n    categoriesApi\r\n};\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/store/slices/productSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { productApi } from '../../utils/apiClient'; // Import API client\r\n\r\n// **Async Actions**\r\n\r\n// Fetch all products\r\nexport const fetchProducts = createAsyncThunk(\r\n    'products/fetchProducts',\r\n    async (_, { rejectWithValue }) => {\r\n        try {\r\n            const products = await productApi.getProducts();\r\n            return products;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch products');\r\n        }\r\n    }\r\n);\r\n\r\n// Fetch products with pagination\r\nexport const fetchProductsByPagination = createAsyncThunk(\r\n    'products/fetchProductsByPagination',\r\n    async (params, { rejectWithValue }) => {\r\n        try {\r\n            console.log('Calling fetchProductsByPagination with params:', params);\r\n            const response = await productApi.getProductsByPagination(params);\r\n            console.log('API Response:', response);\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch products with pagination');\r\n        }\r\n    }\r\n);\r\n\r\n\r\n// Fetch new products with pagination\r\nexport const fetchNewProductsByPagination = createAsyncThunk(\r\n    'products/fetchNewProductsByPagination',\r\n    async ({ page, limit, sort, priceRange, colorIds }, { rejectWithValue }) => {\r\n        try {\r\n            const newProducts = await productApi.getNewProductsByPagination(page, limit, sort, priceRange, colorIds);\r\n            return newProducts;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch new products');\r\n        }\r\n    }\r\n);\r\n\r\nexport const fetchFeaturedProductsByPagination = createAsyncThunk(\r\n    'products/fetchFeaturedProductsByPagination',\r\n    async ({ page, limit, sort, priceRange, colorIds }, { rejectWithValue }) => {\r\n        try {\r\n            const featuredProducts = await productApi.getFeaturedProductsByPagination(page, limit, sort, priceRange, colorIds);\r\n            return featuredProducts;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch featured products');\r\n        }\r\n    }\r\n);\r\n\r\n\r\n\r\n// Fetch product details\r\nexport const fetchProductDetail = createAsyncThunk(\r\n    'products/fetchProductDetail',\r\n    async (slug, { rejectWithValue }) => {\r\n        try {\r\n            const product = await productApi.getProductDetail(slug);\r\n            return product;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch product details');\r\n        }\r\n    }\r\n);\r\n\r\n// Create a new product\r\nexport const createProduct = createAsyncThunk(\r\n    'products/createProduct',\r\n    async (productData, { rejectWithValue }) => {\r\n        try {\r\n            const newProduct = await productApi.createProduct(productData);\r\n            return newProduct;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to create product');\r\n        }\r\n    }\r\n);\r\n\r\n// Update a product\r\nexport const updateProduct = createAsyncThunk(\r\n    'products/updateProduct',\r\n    async ({ slug, productData }, { rejectWithValue }) => {\r\n        try {\r\n            const updatedProduct = await productApi.updateProduct(slug, productData);\r\n            return updatedProduct;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to update product');\r\n        }\r\n    }\r\n);\r\n\r\n// Delete a product\r\nexport const deleteProduct = createAsyncThunk(\r\n    'products/deleteProduct',\r\n    async (slug, { rejectWithValue }) => {\r\n        try {\r\n            const result = await productApi.deleteProduct(slug);\r\n            return result;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to delete product');\r\n        }\r\n    }\r\n);\r\n\r\nexport const searchProductsByNameAndColor = createAsyncThunk(\r\n    'products/searchProductsByNameAndColor',\r\n    async ({ keyword, page, limit, sort }, { rejectWithValue }) => {\r\n        try {\r\n            const searchResults = await productApi.searchProductsByNameAndColor(keyword, {\r\n                page,\r\n                limit,\r\n                sort\r\n            });\r\n            return searchResults;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Không thể tìm kiếm sản phẩm');\r\n        }\r\n    }\r\n);\r\n\r\n// **Slice**\r\nconst productSlice = createSlice({\r\n    name: 'products',\r\n    initialState: {\r\n        newProducts: {\r\n            items: [], // All new products\r\n            pagination: {\r\n                totalItems: 0,\r\n                totalPages: 0,\r\n                currentPage: 1,\r\n                pageSize: 10,\r\n            },\r\n        },\r\n        visibleNewProducts: [], // New products visible on the index page\r\n        featuredProducts: {\r\n            items: [], // All featured products\r\n            pagination: {\r\n                totalItems: 0,\r\n                totalPages: 0,\r\n                currentPage: 1,\r\n                pageSize: 10,\r\n            },\r\n        },\r\n        searchResults: {\r\n            items: [],\r\n            pagination: {\r\n                totalItems: 0,\r\n                totalPages: 0,\r\n                currentPage: 1,\r\n                pageSize: 10,\r\n            },\r\n        },\r\n        pagination: {\r\n            items: [],\r\n            totalItems: 0,\r\n            totalPages: 0,\r\n            currentPage: 1,\r\n            pageSize: 10,\r\n            filters: {\r\n                name: '',\r\n                categories: null,\r\n                colors: null,\r\n                sizes: null,\r\n                priceRange: null,\r\n                sort: 'newest'\r\n            }\r\n        },\r\n        visibleFeaturedProducts: [], // Featured products visible on the index page\r\n        loading: false,\r\n        fetchLoading: false,    // loading cho fetch data\r\n        submitLoading: false,   // loading cho create/update/delete\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        // Set visible products for index page\r\n        setVisibleNewProducts: (state, action) => {\r\n            state.visibleNewProducts = action.payload;\r\n        },\r\n        setVisibleFeaturedProducts: (state, action) => {\r\n            state.visibleFeaturedProducts = action.payload;\r\n        },\r\n        // Clear product state\r\n        clearProductState: (state) => {\r\n            state.newProducts = {\r\n                items: [],\r\n                pagination: {\r\n                    totalItems: 0,\r\n                    totalPages: 0,\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                },\r\n            };\r\n            state.visibleNewProducts = [];\r\n            state.featuredProducts = {\r\n                items: [],\r\n                pagination: {\r\n                    totalItems: 0,\r\n                    totalPages: 0,\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                },\r\n            };\r\n            state.searchResults = {\r\n                items: [],\r\n                pagination: {\r\n                    totalItems: 0,\r\n                    totalPages: 0,\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                },\r\n            };\r\n            state.visibleFeaturedProducts = [];\r\n            state.loading = false;\r\n            state.error = null;\r\n        },\r\n        updateFilters: (state, action) => {\r\n            state.pagination.filters = {\r\n                ...state.pagination.filters,\r\n                ...action.payload\r\n            };\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        // Fetch all products\r\n        builder\r\n            .addCase(fetchProducts.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchProducts.fulfilled, (state, action) => {\r\n                state.items = action.payload;\r\n                state.loading = false;\r\n            })\r\n            .addCase(fetchProducts.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n\r\n        // Fetch products with pagination\r\n        builder\r\n            .addCase(fetchProductsByPagination.pending, (state) => {\r\n                state.fetchLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchProductsByPagination.fulfilled, (state, action) => {\r\n                const { products, pagination } = action.payload.data;\r\n                state.pagination = {\r\n                    ...state.pagination,\r\n                    items: products || [],\r\n                    totalItems: pagination.totalItems || 0,\r\n                    totalPages: pagination.totalPages || 0,\r\n                    currentPage: pagination.currentPage || 1,\r\n                    pageSize: pagination.pageSize || 10\r\n                };\r\n                state.fetchLoading = false;\r\n            })\r\n            .addCase(fetchProductsByPagination.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.fetchLoading = false;\r\n            });\r\n\r\n        // Fetch new products with pagination\r\n        builder\r\n            .addCase(fetchNewProductsByPagination.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchNewProductsByPagination.fulfilled, (state, action) => {\r\n                const { products, pagination } = action.payload.data;\r\n\r\n                if (pagination.currentPage === 1) {\r\n                    // Thay thế toàn bộ danh sách sản phẩm nếu là trang đầu tiên\r\n                    state.newProducts.items = products;\r\n                } else {\r\n                    // Thêm sản phẩm mới nếu không phải trang đầu tiên\r\n                    const uniqueProducts = products.filter(\r\n                        (product) => !state.newProducts.items.some((existing) => existing.id === product.id)\r\n                    );\r\n                    state.newProducts.items = [...state.newProducts.items, ...uniqueProducts];\r\n                }\r\n\r\n                state.newProducts.pagination = {\r\n                    totalItems: pagination.totalItems || 0,\r\n                    totalPages: pagination.totalPages || 0,\r\n                    currentPage: pagination.currentPage || 1,\r\n                    pageSize: pagination.pageSize || 10,\r\n                };\r\n\r\n                // Cập nhật sản phẩm hiển thị (có thể không cần thiết nếu không dùng `visibleNewProducts`)\r\n                state.visibleNewProducts = state.newProducts.items.slice(\r\n                    0,\r\n                    state.newProducts.pagination.pageSize\r\n                );\r\n\r\n                state.loading = false;\r\n            })\r\n            .addCase(fetchNewProductsByPagination.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n\r\n        // Fetch featured products with pagination\r\n        builder\r\n            .addCase(fetchFeaturedProductsByPagination.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchFeaturedProductsByPagination.fulfilled, (state, action) => {\r\n                const { products, pagination } = action.payload.data;\r\n\r\n                if (pagination.currentPage === 1) {\r\n                    // Thay thế toàn bộ danh sách sản phẩm nếu là trang đầu tiên\r\n                    state.featuredProducts.items = products;\r\n                } else {\r\n                    // Thêm sản phẩm mới nếu không phải trang đầu tiên\r\n                    const uniqueProducts = products.filter(\r\n                        (product) => !state.featuredProducts.items.some((existing) => existing.id === product.id)\r\n                    );\r\n                    state.featuredProducts.items = [...state.featuredProducts.items, ...uniqueProducts];\r\n                }\r\n\r\n                state.featuredProducts.pagination = {\r\n                    totalItems: pagination.totalItems || 0,\r\n                    totalPages: pagination.totalPages || 0,\r\n                    currentPage: pagination.currentPage || 1,\r\n                    pageSize: pagination.pageSize || 10,\r\n                };\r\n\r\n                // Cập nhật sản phẩm hiển thị (nếu cần)\r\n                state.visibleFeaturedProducts = state.featuredProducts.items.slice(\r\n                    0,\r\n                    state.featuredProducts.pagination.pageSize\r\n                );\r\n\r\n                state.loading = false;\r\n            })\r\n            .addCase(fetchFeaturedProductsByPagination.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n        // Fetch product details\r\n        builder\r\n            .addCase(fetchProductDetail.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchProductDetail.fulfilled, (state, action) => {\r\n                state.currentProduct = action.payload;\r\n                state.loading = false;\r\n            })\r\n            .addCase(fetchProductDetail.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n        // Create product\r\n        builder\r\n            .addCase(createProduct.pending, (state) => {\r\n                state.submitLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(createProduct.fulfilled, (state, action) => {\r\n                // Kiểm tra cấu trúc response và cập nhật state phù hợp\r\n                const newProduct = Array.isArray(action.payload.data)\r\n                    ? action.payload.data[0]\r\n                    : action.payload.data;\r\n\r\n                if (state.items) {\r\n                    state.items.push(newProduct);\r\n                } else {\r\n                    state.items = [newProduct];\r\n                }\r\n                state.submitLoading = false;\r\n                state.error = null;\r\n            })\r\n            .addCase(createProduct.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.submitLoading = false;\r\n            });\r\n        // Update product\r\n        builder\r\n            .addCase(updateProduct.pending, (state) => {\r\n                state.submitLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(updateProduct.fulfilled, (state, action) => {\r\n                // Cập nhật sản phẩm trong danh sách\r\n                if (state.pagination && state.pagination.items) {\r\n                    const index = state.pagination.items.findIndex(\r\n                        item => item.slug === action.payload.data.slug\r\n                    );\r\n                    if (index !== -1) {\r\n                        state.pagination.items[index] = action.payload.data;\r\n                    }\r\n                }\r\n                state.submitLoading = false;\r\n                state.error = null;\r\n            })\r\n            .addCase(updateProduct.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.submitLoading = false;\r\n            });\r\n        // Delete product\r\n        builder\r\n            .addCase(deleteProduct.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(deleteProduct.fulfilled, (state, action) => {\r\n                // Kiểm tra và cập nhật pagination.items thay vì items\r\n                if (state.pagination && state.pagination.items) {\r\n                    state.pagination.items = state.pagination.items.filter(\r\n                        (item) => item.slug !== action.meta.arg\r\n                    );\r\n                }\r\n                state.loading = false;\r\n            })\r\n            .addCase(deleteProduct.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n        // Trong phần extraReducers, thêm các cases xử lý search\r\n        builder\r\n            .addCase(searchProductsByNameAndColor.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(searchProductsByNameAndColor.fulfilled, (state, action) => {\r\n                const { products, pagination } = action.payload.data;\r\n\r\n                state.searchResults = {\r\n                    items: products,\r\n                    pagination: {\r\n                        totalItems: pagination.totalItems || 0,\r\n                        totalPages: pagination.totalPages || 0,\r\n                        currentPage: pagination.currentPage || 1,\r\n                        pageSize: pagination.pageSize || 10,\r\n                    },\r\n                };\r\n                state.loading = false;\r\n            })\r\n            .addCase(searchProductsByNameAndColor.rejected, (state, action) => {\r\n                state.error = action.payload;\r\n                state.loading = false;\r\n            });\r\n\r\n    },\r\n});\r\n\r\nexport const { setVisibleNewProducts, setVisibleFeaturedProducts, clearProductState } = productSlice.actions;\r\nexport default productSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2393, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/store/slices/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { cartApi } from '../../utils/apiClient';\r\n\r\n// **Async thunks**\r\n\r\n// Tạo giỏ hàng cho khách\r\nexport const createCartForGuest = createAsyncThunk(\r\n    'cart/createCartForGuest',\r\n    async (cartData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.createCartForGuest(cartData);\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to create cart for guest.');\r\n        }\r\n    }\r\n);\r\n\r\n// Tạo hoặc lấy giỏ hàng cho người dùng đã đăng nhập\r\nexport const createCartForUser = createAsyncThunk(\r\n    'cart/createCartForUser',\r\n    async (_, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.createCartForUser();\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to create or retrieve cart for user.');\r\n        }\r\n    }\r\n);\r\n\r\n// Lấy chi tiết giỏ hàng theo ID\r\nexport const getCartById = createAsyncThunk(\r\n    'cart/getCartById',\r\n    async (cartId, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.getCartById(cartId);\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch cart details.');\r\n        }\r\n    }\r\n);\r\n\r\n// Thêm sản phẩm vào giỏ hàng\r\nexport const addItemToCart = createAsyncThunk(\r\n    'cart/addItemToCart',\r\n    async ({ cartId, itemData }, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.addItemToCart(cartId, itemData);\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to add item to cart.');\r\n        }\r\n    }\r\n);\r\n\r\n// Xóa sản phẩm khỏi giỏ hàng\r\nexport const removeCartItem = createAsyncThunk(\r\n    'cart/removeCartItem',\r\n    async (itemId, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.removeCartItem(itemId);\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to remove item from cart.');\r\n        }\r\n    }\r\n);\r\n\r\n// Lấy tất cả sản phẩm trong giỏ hàng\r\nexport const getCartItems = createAsyncThunk(\r\n    'cart/getCartItems',\r\n    async (cartId, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.getCartItems(cartId);\r\n            return response.data; // Lấy phần `data` từ kết quả API\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to fetch cart items.');\r\n        }\r\n    }\r\n);\r\n\r\n// Cập nhật số lượng sản phẩm trong giỏ hàng\r\nexport const updateCartItemQuantity = createAsyncThunk(\r\n    'cart/updateCartItemQuantity',\r\n    async ({ itemId, quantity }, { rejectWithValue }) => {\r\n        try {\r\n            const response = await cartApi.updateCartItemQuantity(itemId, quantity);\r\n            return response.data; // Đảm bảo trả về đầy đủ dữ liệu sản phẩm\r\n        } catch (error) {\r\n            return rejectWithValue(error.response?.data || 'Failed to update cart item quantity.');\r\n        }\r\n    }\r\n);\r\n\r\n\r\n// **Slice**\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState: {\r\n        cart: null,\r\n        items: [],\r\n        loading: false,\r\n        updating: {}, // Theo dõi trạng thái cập nhật cho từng sản phẩm\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        resetCartState: (state) => {\r\n            state.cart = null;\r\n            state.items = [];\r\n            state.loading = false;\r\n            state.updating = {};\r\n            state.error = null;\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            // Create cart for guest\r\n            .addCase(createCartForGuest.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(createCartForGuest.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.cart = action.payload;\r\n            })\r\n            .addCase(createCartForGuest.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload;\r\n            })\r\n\r\n            // Create or retrieve cart for user\r\n            .addCase(createCartForUser.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(createCartForUser.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.cart = action.payload;\r\n            })\r\n            .addCase(createCartForUser.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload;\r\n            })\r\n\r\n            // Get cart by ID\r\n            .addCase(getCartById.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(getCartById.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.cart = action.payload;\r\n            })\r\n            .addCase(getCartById.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload;\r\n            })\r\n\r\n            // Add item to cart\r\n            .addCase(addItemToCart.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(addItemToCart.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.items.push(action.payload);\r\n            })\r\n            .addCase(addItemToCart.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload;\r\n            })\r\n\r\n            // Remove item from cart\r\n            // Remove item from cart\r\n            .addCase(removeCartItem.pending, (state, action) => {\r\n                const itemId = action.meta.arg; // Capture the item ID being removed\r\n                state.updating[itemId] = true; // Mark the specific item as updating\r\n                state.error = null;\r\n            })\r\n            .addCase(removeCartItem.fulfilled, (state, action) => {\r\n                const itemId = action.meta.arg; // Retrieve the ID of the removed item\r\n                state.items = state.items.filter((item) => item.id !== itemId); // Remove the item from the state\r\n                delete state.updating[itemId]; // Remove the \"updating\" flag for the item\r\n            })\r\n            .addCase(removeCartItem.rejected, (state, action) => {\r\n                const itemId = action.meta.arg; // Retrieve the ID of the item that failed to be removed\r\n                state.updating[itemId] = false; // Reset the \"updating\" flag\r\n                state.error = action.payload; // Store the error message\r\n            })\r\n\r\n            // Get cart items\r\n            .addCase(getCartItems.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(getCartItems.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                if (JSON.stringify(state.items) !== JSON.stringify(action.payload)) {\r\n                    state.items = action.payload;\r\n                }\r\n            })\r\n            .addCase(getCartItems.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload;\r\n            })\r\n            // Update cart item quantity\r\n            .addCase(updateCartItemQuantity.pending, (state, action) => {\r\n                const { itemId } = action.meta.arg;\r\n                state.updating[itemId] = true; // Đánh dấu sản phẩm đang cập nhật\r\n                state.error = null;\r\n            })\r\n            .addCase(updateCartItemQuantity.fulfilled, (state, action) => {\r\n                const updatedItem = action.payload;\r\n                const itemIndex = state.items.findIndex((item) => item.id === updatedItem.id);\r\n                if (itemIndex !== -1) {\r\n                    state.items[itemIndex] = {\r\n                        ...state.items[itemIndex],\r\n                        ...updatedItem, // Cập nhật dữ liệu sản phẩm\r\n                    };\r\n                }\r\n                delete state.updating[updatedItem.id]; // Xóa trạng thái cập nhật\r\n            })\r\n            .addCase(updateCartItemQuantity.rejected, (state, action) => {\r\n                const { itemId } = action.meta.arg;\r\n                state.updating[itemId] = false; // Đánh dấu cập nhật thất bại\r\n                state.error = action.payload;\r\n            });\r\n    },\r\n});\r\n\r\n// Export actions and reducer\r\nexport const { resetCartState } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2583, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/store/slices/reviewsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { reviewApi } from '../../utils/apiClient';\r\n\r\n// Async thunks for API calls\r\n// Async thunk for fetching reviews with pagination\r\nexport const fetchReviewsByProduct = createAsyncThunk(\r\n    'reviews/fetchReviewsByProduct',\r\n    async ({ productId, page, limit }, thunkAPI) => {\r\n        try {\r\n            // API call to fetch paginated reviews\r\n            const response = await reviewApi.getReviewsByProduct(productId, page, limit);\r\n\r\n            // Ensure response matches the structure from `getProductReviewsHandler`\r\n            if (response.status === 'success') {\r\n                return {\r\n                    reviews: response.data,\r\n                    meta: response.meta,\r\n                };\r\n            } else {\r\n                throw new Error('Unexpected API response');\r\n            }\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(\r\n                error.response?.data?.message || 'Failed to fetch reviews'\r\n            );\r\n        }\r\n    }\r\n);\r\n\r\nexport const fetchAverageRating = createAsyncThunk(\r\n    'reviews/fetchAverageRating',\r\n    async (productId, thunkAPI) => {\r\n        try {\r\n            const response = await reviewApi.getAverageRating(productId);\r\n\r\n            if (response.status === 'success' && response.data?.averageRating) {\r\n                return {\r\n                    averageRating: parseFloat(response.data.averageRating.averageRating) || 0,\r\n                    totalReviews: parseInt(response.data.averageRating.totalReviews, 10) || 0,\r\n                };\r\n            } else {\r\n                throw new Error('Invalid API response structure');\r\n            }\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(\r\n                error.response?.data?.message || 'Failed to fetch average rating'\r\n            );\r\n        }\r\n    }\r\n);\r\n\r\n\r\nexport const createReview = createAsyncThunk(\r\n    'reviews/createReview',\r\n    async (reviewData, thunkAPI) => {\r\n        try {\r\n            const response = await reviewApi.createReview(reviewData);\r\n            return response.data;\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(error.response?.data || 'Failed to create review');\r\n        }\r\n    }\r\n);\r\n\r\nexport const deleteReview = createAsyncThunk(\r\n    'reviews/deleteReview',\r\n    async (reviewId, thunkAPI) => {\r\n        try {\r\n            const response = await reviewApi.deleteReview(reviewId);\r\n            return response.data;\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(error.response?.data || 'Failed to delete review');\r\n        }\r\n    }\r\n);\r\n\r\n// Initial state\r\nconst initialState = {\r\n    reviews: [],\r\n    averageRating: 0,\r\n    isLoading: false,\r\n    error: null,\r\n    pagination: {\r\n        totalReviews: 0,\r\n        totalPages: 1,\r\n        currentPage: 1,\r\n    },\r\n};\r\n\r\n// Reviews slice\r\nconst reviewsSlice = createSlice({\r\n    name: 'reviews',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        // Handle `fetchReviewsByProduct`\r\n        builder\r\n            .addCase(fetchReviewsByProduct.pending, (state) => {\r\n                state.isLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchReviewsByProduct.fulfilled, (state, action) => {\r\n                state.isLoading = false;\r\n                state.reviews = action.payload.reviews || [];\r\n                state.pagination = {\r\n                    totalReviews: action.payload.meta?.totalReviews || 0,\r\n                    totalPages: action.payload.meta?.totalPages || 1,\r\n                    currentPage: action.payload.meta?.currentPage || 1,\r\n                };\r\n            })\r\n            .addCase(fetchReviewsByProduct.rejected, (state, action) => {\r\n                state.isLoading = false;\r\n                state.error = action.payload;\r\n            });\r\n\r\n        // Fetch average rating\r\n        builder\r\n            .addCase(fetchAverageRating.pending, (state) => {\r\n                state.isLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(fetchAverageRating.fulfilled, (state, action) => {\r\n                state.isLoading = false;\r\n                state.averageRating = action.payload?.averageRating || 0;\r\n                state.pagination.totalReviews = action.payload?.totalReviews || 0;\r\n            })\r\n            .addCase(fetchAverageRating.rejected, (state, action) => {\r\n                state.isLoading = false;\r\n                state.error = action.payload;\r\n            });\r\n        // Create review\r\n        builder\r\n            .addCase(createReview.pending, (state) => {\r\n                state.isLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(createReview.fulfilled, (state, action) => {\r\n                state.isLoading = false;\r\n                state.reviews.unshift(action.payload);\r\n                state.pagination.totalReviews += 1;\r\n                if (state.reviews.length > 10) {\r\n                    state.reviews.pop(); // Ensure review list doesn't grow beyond the limit\r\n                }\r\n            })\r\n            .addCase(createReview.rejected, (state, action) => {\r\n                state.isLoading = false;\r\n                state.error = action.payload;\r\n            });\r\n\r\n        // Delete review\r\n        builder\r\n            .addCase(deleteReview.pending, (state) => {\r\n                state.isLoading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(deleteReview.fulfilled, (state, action) => {\r\n                state.isLoading = false;\r\n                state.reviews = state.reviews.filter((review) => review.id !== action.meta.arg);\r\n                state.pagination.totalReviews = Math.max(0, state.pagination.totalReviews - 1);\r\n            })\r\n            .addCase(deleteReview.rejected, (state, action) => {\r\n                state.isLoading = false;\r\n                state.error = action.payload;\r\n            });\r\n    },\r\n});\r\n\r\nexport default reviewsSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2727, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/store/slices/favoriteSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { createSelector } from '@reduxjs/toolkit';\r\nimport { favoriteApi } from '../../utils/apiClient';\r\n\r\n// Async Thunks\r\nexport const getFavorites = createAsyncThunk(\r\n    'favorites/getFavorites',\r\n    async ({ page = 1, limit = 10 }, { rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.getFavorites(page, limit);\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const forceUpdateFavorites = createAsyncThunk(\r\n    'favorites/forceUpdate',\r\n    async ({ page = 1, limit = 10 }, { dispatch, rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.getFavorites(page, limit);\r\n            return response;\r\n        } catch (error) {\r\n            console.error('Error fetching favorites:', error);\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\n// Thêm selector mới\r\nexport const selectFavoriteState = state => state.favorites;\r\n\r\nexport const checkFavoriteStatus = createAsyncThunk(\r\n    'favorites/checkStatus',\r\n    async (productId, { rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.checkFavoriteStatus(productId);\r\n            return { productId, ...response };\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const addToFavorite = createAsyncThunk(\r\n    'favorites/add',\r\n    async (productId, { dispatch, rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.addToFavorite(productId);\r\n            await dispatch(forceUpdateFavorites({ page: 1, limit: 10 }));\r\n            return { productId, ...response };\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const removeFromFavorite = createAsyncThunk(\r\n    'favorites/remove',\r\n    async (productId, { dispatch, rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.removeFromFavorite(productId);\r\n            await dispatch(forceUpdateFavorites({ page: 1, limit: 10 }));\r\n            return { productId, ...response };\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const transferFavorites = createAsyncThunk(\r\n    'favorites/transfer',\r\n    async (_, { dispatch, rejectWithValue }) => {\r\n        try {\r\n            const response = await favoriteApi.transferFavorites();\r\n            await dispatch(forceUpdateFavorites({ page: 1, limit: 10 }));\r\n            return response;\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    }\r\n);\r\n\r\nconst initialState = {\r\n    items: [],\r\n    pagination: {\r\n        total: 0,\r\n        page: 1,\r\n        limit: 10,\r\n        totalPages: 1\r\n    },\r\n    loading: false,\r\n    error: null,\r\n    favoriteStatuses: {}\r\n};\r\n\r\nexport const selectFavoriteCount = (state) => state.favorites.pagination.total || 0;\r\nexport const selectFavoriteItems = state => state.favorites.items;\r\nexport const selectFavoriteTotal = (state) => state.favorites.pagination.total || 0;\r\n\r\nexport const selectFavoriteStatuses = createSelector(\r\n    [selectFavoriteItems],\r\n    (items) => items.reduce((acc, item) => {\r\n        acc[item.product_id] = true;\r\n        return acc;\r\n    }, {})\r\n);\r\n\r\nconst favoriteSlice = createSlice({\r\n    name: 'favorites',\r\n    initialState,\r\n    reducers: {\r\n        resetFavoriteState: () => initialState\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(getFavorites.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(getFavorites.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.items = action.payload.data;\r\n                state.pagination = action.payload.pagination;\r\n                state.error = null;\r\n                // Cập nhật favoriteStatuses\r\n                state.favoriteStatuses = action.payload.data.reduce((acc, item) => {\r\n                    acc[item.product_id] = true;\r\n                    return acc;\r\n                }, {});\r\n            })\r\n            .addCase(getFavorites.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload?.message || 'Có lỗi xảy ra';\r\n            })\r\n            .addCase(forceUpdateFavorites.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(forceUpdateFavorites.fulfilled, (state, action) => {\r\n                state.loading = false;\r\n                state.items = action.payload.data;\r\n                state.pagination = action.payload.pagination;\r\n                state.error = null;\r\n                // Cập nhật favoriteStatuses\r\n                state.favoriteStatuses = action.payload.data.reduce((acc, item) => {\r\n                    acc[item.product_id] = true;\r\n                    return acc;\r\n                }, {});\r\n            })\r\n            .addCase(forceUpdateFavorites.rejected, (state, action) => {\r\n                state.loading = false;\r\n                state.error = action.payload?.message || 'Failed to update favorites';\r\n            })\r\n            .addCase(checkFavoriteStatus.fulfilled, (state, action) => {\r\n                state.favoriteStatuses[action.payload.productId] = action.payload.data;\r\n            })\r\n            .addCase(addToFavorite.fulfilled, (state, action) => {\r\n                const newItem = {\r\n                    product_id: action.payload.productId,\r\n                };\r\n                if (!state.items.find(item => item.product_id === newItem.product_id)) {\r\n                    state.items.push(newItem);\r\n                    state.favoriteStatuses[action.payload.productId] = true;\r\n                    state.pagination.total += 1;\r\n                }\r\n            })\r\n            .addCase(removeFromFavorite.fulfilled, (state, action) => {\r\n                state.items = state.items.filter(item => item.product_id !== action.payload.productId);\r\n                delete state.favoriteStatuses[action.payload.productId];\r\n                state.pagination.total = Math.max(0, state.pagination.total - 1);\r\n            });\r\n    }\r\n});\r\n\r\nexport const { resetFavoriteState } = favoriteSlice.actions;\r\nexport default favoriteSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2908, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/Sidebar.js"],"sourcesContent":["import React from 'react'\r\nimport Link from 'next/link';\r\n\r\nexport default function Sidebar({ isMobile }) {\r\n    const categories = [\r\n        {\r\n            id: 8,\r\n            name: 'Thời Trang Nam',\r\n            subCategories: [\r\n                \r\n            ],\r\n        },\r\n        {\r\n            id: 9,\r\n            name: 'Thời Trang Nữ',\r\n            subCategories: [\r\n                \r\n            ],\r\n        },\r\n        {\r\n            id: 1,\r\n            name: 'Áo',\r\n            subCategories: [\r\n                { id: 2, name: 'Áo Thun' },\r\n                { id: 13, name: 'Áo Sơ Mi' },\r\n                { id: 10, name: 'Áo Polo' },\r\n                { id: 32, name: 'Áo Nam' },\r\n                { id: 33, name: 'Áo Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 15,\r\n            name: 'Quần',\r\n            subCategories: [\r\n                { id: 18, name: 'Quần Jeans' },\r\n                { id: 20, name: 'Quần Shorts' },\r\n                { id: 28, name: 'Quần Tây' },\r\n                { id: 39, name: 'Quần Nam' },\r\n                { id: 30, name: 'Quần Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 2,\r\n            name: 'Áo Thun',\r\n            subCategories: [\r\n                { id: 4, name: 'Áo Thun Nam' },\r\n                { id: 6, name: 'Áo Thun Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 10,\r\n            name: 'Áo Polo',\r\n            subCategories: [\r\n                { id: 11, name: 'Áo Polo Nam' },\r\n                { id: 12, name: 'Áo Polo Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 24,\r\n            name: 'Áo Khoác',\r\n            subCategories: [\r\n                { id: 34, name: 'Áo Khoác Nam' },\r\n                { id: 25, name: 'Áo Khoác Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 13,\r\n            name: 'Áo Sơ Mi',\r\n            subCategories: [\r\n                { id: 14, name: 'Áo Sơ Mi Nam' },\r\n                { id: 26, name: 'Áo Sơ Mi Nữ' },\r\n            ],\r\n        },\r\n        {\r\n            id: 38,\r\n            name: 'Phụ Kiện',\r\n            subCategories: [\r\n                { id: 35, name: 'Mũ' },\r\n                { id: 36, name: 'Thắt Lưng' },\r\n                { id: 37, name: 'Ví' },\r\n            ],\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div className={`\r\n            ${isMobile\r\n                ? 'fixed inset-0 z-50 bg-white overflow-y-auto h-screen pt-16'\r\n                : 'hidden md:block w-64'\r\n            }\r\n        `}>\r\n            <aside className={`${isMobile ? 'py-2' : 'p-6'}`}>\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4 px-4\">Danh mục sản phẩm</h3>\r\n                <ul className=\"space-y-1\">\r\n                    {categories.map((category) => (\r\n                        <li key={category.id} className=\"group\">\r\n                            {/* Danh mục cha */}\r\n                            <a\r\n                                href={`/category/productsByCategory?categoryId=${category.id}&categoryName=${category.name}`}\r\n                                className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 \r\n                                        transition-colors duration-200 font-medium group-hover:text-gray-600\"\r\n                            >\r\n                                <span>{category.name}</span>\r\n                            </a>\r\n                            {/* Danh mục con */}\r\n                            <ul className=\"\">\r\n                                {category.subCategories.map((subCategory) => (\r\n                                    <li key={subCategory.id}>\r\n                                        <a\r\n                                            href={`/category/productsByCategory?categoryId=${subCategory.id}&categoryName=${subCategory.name}`}\r\n                                            className=\"block px-8 py-2 text-sm text-gray-600 hover:bg-gray-50 \r\n                                                    hover:text-gray-600 transition-colors duration-200\"\r\n                                        >\r\n                                            {subCategory.name}\r\n                                        </a>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </aside>\r\n            <nav className=\"py-2\">\r\n                <Link\r\n                    href=\"/TrackOrder\"\r\n                    className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n\r\n                >\r\n                    <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                            d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\r\n                    </svg>\r\n                    Tra cứu đơn hàng\r\n                </Link>\r\n                <Link\r\n                    href=\"/store-locations\"\r\n                    className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n\r\n                >\r\n                    <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                            d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                            d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                    </svg>\r\n                    Hệ thống cửa hàng\r\n                </Link>\r\n                <Link\r\n                    href=\"/user-guide\"\r\n                    className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n\r\n                >\r\n                    <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                            d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                    </svg>\r\n                    Hướng dẫn sử dụng\r\n                </Link>\r\n                <Link\r\n                    href=\"/warranty-policy\"\r\n                    className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n\r\n                >\r\n                    <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                            d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n                    </svg>\r\n                    Chính sách bảo hành\r\n                </Link>\r\n            </nav>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3295, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/AnnouncementBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nexport default function AnnouncementBar() {\r\n    const [isVisible, setIsVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const announcementHidden = localStorage.getItem('hideShippingAnnouncement');\r\n        if (announcementHidden && new Date().getTime() < parseInt(announcementHidden)) {\r\n            setIsVisible(false);\r\n        }\r\n    }, []);\r\n\r\n    const hideAnnouncement = () => {\r\n        const expireTime = new Date().getTime() + 24 * 60 * 60 * 1000;\r\n        localStorage.setItem('hideShippingAnnouncement', expireTime.toString());\r\n        setIsVisible(false);\r\n    };\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n        <div className=\"bg-gray-800 text-white relative overflow-hidden\">\r\n            <div className=\"flex items-center justify-center py-2 px-4\">\r\n                <div className=\"whitespace-nowrap animate-marquee\">\r\n                    <span className=\"mr-2\">🚚</span>\r\n                    <p className=\"text-sm font-medium inline-block\">\r\n                        MIỄN PHÍ VẬN CHUYỂN CHO ĐƠN HÀNG TỪ 200K\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <button\r\n                onClick={hideAnnouncement}\r\n                className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-200\"\r\n                aria-label=\"Đóng thông báo\"\r\n            >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;AAEe,SAAS;;IACpB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD;qCAAE;YACN,MAAM,qBAAqB,aAAa,OAAO,CAAC;YAChD,IAAI,sBAAsB,IAAI,OAAO,OAAO,KAAK,SAAS,qBAAqB;gBAC3E,aAAa;YACjB;QACJ;oCAAG,EAAE;IAEL,MAAM,mBAAmB;QACrB,MAAM,aAAa,IAAI,OAAO,OAAO,KAAK,KAAK,KAAK,KAAK;QACzD,aAAa,OAAO,CAAC,4BAA4B,WAAW,QAAQ;QACpE,aAAa;IACjB;IAEA,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACI,0JAAC;QAAI,WAAU;;0BACX,0JAAC;gBAAI,WAAU;0BACX,cAAA,0JAAC;oBAAI,WAAU;;sCACX,0JAAC;4BAAK,WAAU;sCAAO;;;;;;sCACvB,0JAAC;4BAAE,WAAU;sCAAmC;;;;;;;;;;;;;;;;;0BAKxD,0JAAC;gBACG,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,0JAAC;oBAAI,OAAM;oBAA6B,WAAU;oBAAU,SAAQ;oBAAY,MAAK;8BACjF,cAAA,0JAAC;wBAAK,UAAS;wBAAU,GAAE;wBAAqM,UAAS;;;;;;;;;;;;;;;;;;;;;;AAK7P;GAvCwB;KAAA","debugId":null}},
    {"offset": {"line": 3403, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/Header.js"],"sourcesContent":["import React, { memo } from 'react';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { debounce } from 'lodash';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { productApi } from '../utils/apiClient';\r\nimport { selectFavoriteTotal, forceUpdateFavorites } from '../store/slices/favoriteSlice';\r\nimport Sidebar from './Sidebar';\r\nimport AnnouncementBar from './AnnouncementBar';\r\nimport {\r\n    UserIcon,\r\n    HeartIcon,\r\n    ShoppingBagIcon,\r\n    MagnifyingGlassIcon\r\n} from '@heroicons/react/24/outline';\r\n\r\nconst Header = memo(function Header({ isCartPage }) {\r\n    const [isDrawerOpen, setIsDrawerOpen] = useState(false);\r\n    const { items } = useSelector((state) => state.cart);\r\n    const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n\r\n    const searchRef = useRef(null);\r\n    const searchInputRef = useRef(null);\r\n    const router = useRouter();\r\n\r\n    // Tính toán số lượng item trong giỏ hàng\r\n    const totalItems = items?.reduce((sum, item) => {\r\n        if (item && typeof item.quantity === 'number') {\r\n            return sum + item.quantity;\r\n        }\r\n        return sum;\r\n    }, 0) || 0;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    // Lấy trực tiếp total từ selector \r\n    const favoriteCount = useSelector(selectFavoriteTotal);\r\n\r\n    // Thêm effect để tự động cập nhật\r\n    useEffect(() => {\r\n        // Cập nhật ngay khi mount\r\n        dispatch(forceUpdateFavorites({ page: 1, limit: 10 }));\r\n\r\n        // Cập nhật định kỳ mỗi 30s\r\n        const interval = setInterval(() => {\r\n            dispatch(forceUpdateFavorites({ page: 1, limit: 10 }));\r\n        }, 300000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [dispatch]);\r\n    // Xử lý drawer sidebar\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (window.innerWidth >= 768) {\r\n                setIsDrawerOpen(false);\r\n            }\r\n        };\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    // Xử lý click outside để đóng search\r\n    useEffect(() => {\r\n        function handleClickOutside(event) {\r\n            if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n                setIsSearchOpen(false);\r\n                setSearchTerm('');\r\n                setSearchResults([]);\r\n            }\r\n        }\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    // Tách riêng logic search\r\n    const performSearch = async (term) => {\r\n        if (term.trim().length >= 2) {\r\n            try {\r\n                const result = await productApi.searchProductsByNameAndColor(term.trim(), {\r\n                    page: 1,\r\n                    limit: 10,\r\n                    sort: 'newest'\r\n                });\r\n\r\n                if (result.data?.products) {\r\n                    setSearchResults(result.data.products);\r\n                }\r\n            } catch (error) {\r\n                console.error('Search error:', error);\r\n                setSearchResults([]);\r\n            }\r\n        } else {\r\n            setSearchResults([]);\r\n        }\r\n    };\r\n\r\n    // Sử dụng debounce\r\n    const debouncedSearch = useRef(debounce((term) => performSearch(term), 300)).current;\r\n\r\n    useEffect(() => {\r\n        debouncedSearch(searchTerm);\r\n        return () => debouncedSearch.cancel();\r\n    }, [searchTerm]);\r\n\r\n    // Handler cho việc mở search\r\n    const handleSearchClick = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsSearchOpen(!isSearchOpen);\r\n        if (!isSearchOpen && searchInputRef.current) {\r\n            setTimeout(() => {\r\n                searchInputRef.current.focus();\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    // Handler cho việc nhập search\r\n    const handleSearchInput = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setSearchTerm(e.target.value);\r\n    };\r\n\r\n    // Handler cho phím Enter\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault(); // Ngăn chặn reload trang\r\n            e.stopPropagation();\r\n\r\n            if (searchTerm.trim().length >= 2) {\r\n                router.push(`/search?keyword=${encodeURIComponent(searchTerm.trim())}`);\r\n                setIsSearchOpen(false);\r\n                setSearchTerm('');\r\n                setSearchResults([]);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Handler cho việc đóng drawer\r\n    const toggleDrawer = () => {\r\n        setIsDrawerOpen(!isDrawerOpen);\r\n    };\r\n\r\n    const searchSection = (\r\n        <li className=\"relative w-6 h-6\" ref={searchRef}>\r\n            <button\r\n                type=\"button\"\r\n                onClick={handleSearchClick}\r\n                className=\"hover:underline focus:outline-none\"\r\n                aria-label=\"Search\"\r\n            >\r\n                <MagnifyingGlassIcon className=\"h-6 w-6 text-black\" />\r\n            </button>\r\n\r\n            {isSearchOpen && (\r\n                <div className=\"fixed md:absolute top-0 md:top-full left-0 md:left-auto right-0 md:right-0 h-screen md:h-auto w-full md:w-96 bg-white md:rounded-lg shadow-xl z-[60] md:mt-2\">\r\n                    <div className=\"p-4\">\r\n                        <div className=\"flex items-center justify-between p-4 md:hidden border-b border-gray-200\">\r\n                            <h2 className=\"text-lg font-medium text-gray-900\">Tìm kiếm</h2>\r\n                            <button\r\n                                onClick={() => {\r\n                                    setIsSearchOpen(false);\r\n                                    setSearchTerm('');\r\n                                    setSearchResults([]);\r\n                                }}\r\n                                className=\"p-2 -mr-2\"\r\n                            >\r\n                                <svg\r\n                                    className=\"w-5 h-5 text-gray-500\"\r\n                                    fill=\"none\"\r\n                                    strokeLinecap=\"round\"\r\n                                    strokeLinejoin=\"round\"\r\n                                    strokeWidth=\"2\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    stroke=\"currentColor\"\r\n                                >\r\n                                    <path d=\"M6 18L18 6M6 6l12 12\"></path>\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                        <div id=\"header-search-container\">\r\n                            <input\r\n                                ref={searchInputRef}\r\n                                type=\"search\"\r\n                                placeholder=\"Tìm kiếm sản phẩm...\"\r\n                                className=\"w-full p-4 md:p-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:border-gray-500 text-gray-900 text-base\"\r\n                                value={searchTerm}\r\n                                onChange={handleSearchInput}\r\n                                onKeyDown={handleKeyDown}\r\n                                autoComplete=\"off\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"max-h-[400px] overflow-y-auto mt-2\">\r\n                            {searchResults.slice(0, 4).map((product) => (\r\n                                <Link\r\n                                    key={product.id}\r\n                                    href={`/productdetail/${product.slug}`}\r\n                                    className=\"flex items-center space-x-4 p-2 hover:bg-gray-50 rounded-lg\"\r\n                                    onClick={() => {\r\n                                        setIsSearchOpen(false);\r\n                                        setSearchTerm('');\r\n                                        setSearchResults([]);\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        src={product.productColors[0]?.ProductColor?.image || '/placeholder-image.jpg'}\r\n                                        alt={product.product_name}\r\n                                        className=\"w-12 h-12 object-cover rounded\"\r\n                                    />\r\n                                    <div>\r\n                                        <p className=\"text-sm font-medium text-black\">\r\n                                            {product.product_name}\r\n                                        </p>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {product.discount_price ? (\r\n                                                <>\r\n                                                    <p className=\"text-sm line-through text-gray-400\">\r\n                                                        {product.price.toLocaleString('vi-VN')}đ\r\n                                                    </p>\r\n                                                    <p className=\"text-sm font-medium text-red-500\">\r\n                                                        {product.discount_price.toLocaleString('vi-VN')}đ\r\n                                                    </p>\r\n                                                </>\r\n                                            ) : (\r\n                                                <p className=\"text-sm text-gray-500\">\r\n                                                    {product.price.toLocaleString('vi-VN')}đ\r\n                                                </p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n\r\n                            {searchResults.length > 4 && (\r\n                                <Link\r\n                                    href={`/search?keyword=${encodeURIComponent(searchTerm.trim())}`}\r\n                                    className=\"block w-full text-center py-2 mt-2 text-gray-600 hover:text-gray-700 font-medium border-t\"\r\n                                    onClick={(e) => {\r\n                                        e.preventDefault();\r\n                                        e.stopPropagation();\r\n                                        setIsSearchOpen(false);\r\n                                        setSearchTerm('');\r\n                                        setSearchResults([]);\r\n                                        router.push(`/search?keyword=${encodeURIComponent(searchTerm.trim())}`);\r\n                                    }}\r\n                                >\r\n                                    Xem thêm sản phẩm\r\n                                </Link>\r\n                            )}\r\n\r\n                            {searchTerm.trim().length >= 2 && searchResults.length === 0 && (\r\n                                <div className=\"mt-4 text-center text-gray-500\">\r\n                                    Không tìm thấy sản phẩm phù hợp\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </li>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <AnnouncementBar />\r\n            <header className=\"bg-white-800 text-black p-4 shadow\">\r\n                <div className=\"container mx-auto flex justify-between items-center\">\r\n                    {/* Drawer Toggle Button for Sidebar */}\r\n                    <button\r\n                        className=\"md:hidden block focus:outline-none mr-4\"\r\n                        onClick={toggleDrawer}\r\n                    >\r\n                        <svg\r\n                            className=\"w-6 h-6\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                            <path\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                strokeWidth={2}\r\n                                d=\"M4 6h16M4 12h16m-7 6h7\"\r\n                            />\r\n                        </svg>\r\n                    </button>\r\n\r\n                    {/* Logo */}\r\n                    <Link href=\"/\" className=\"flex items-center space-x-2 font-bold flex-shrink-0\">\r\n                        <img\r\n                            src=\"https://firebasestorage.googleapis.com/v0/b/red89-f8933.appspot.com/o/KLTN%2FDALL%C2%B7E%202025-01-20%2014.48.34%20-%20A%20minimalistic%20logo%20for%20a%20Fashion%20Store%2C%20designed%20for%20use%20as%20a%20website%20favicon.%20The%20logo%20features%20a%20sleek%20and%20modern%20design%20with%20an%20abstract%20represent.webp?alt=media&token=da1ff9d9-3a6e-44ca-ba4c-6de1a45b80fc\"\r\n                            alt=\"Fashion Store Logo\"\r\n                            className=\"h-8 w-8 object-contain\"\r\n                        />\r\n                        <span className=\"text-2xl text-black\">Fashion Store</span>\r\n                    </Link>\r\n\r\n\r\n                    {/* Navigation Links */}\r\n                    <nav className=\"hidden md:flex space-x-8 ml-auto text-base font-medium tracking-wide\">\r\n                        <Link\r\n                            href=\"/onsale\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Sale\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/category/productsByCategory?categoryId=8&categoryName=Thời%20Trang%20Nam\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Thời trang nam\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/category/productsByCategory?categoryId=9&categoryName=Thời%20Trang%20Nữ\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Thời trang nữ\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/vouchers\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Ưu đãi\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/store-locations\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Hệ thống cửa hàng\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/TrackOrder\"\r\n                            className=\"text-black hover:underline transition-colors duration-200 font-sans\"\r\n                            style={{ fontSize: '15px' }}\r\n                        >\r\n                            Tra cứu đơn hàng\r\n                        </Link>\r\n                    </nav>\r\n\r\n                    {/* Navigation Icons */}\r\n                    <nav className=\"flex space-x-6 md:ml-auto\">\r\n                        <ul className=\"flex space-x-4 items-center\">\r\n                            {/* Search Icon */}\r\n                            {searchSection}\r\n\r\n                            {/* User Icon */}\r\n                            <li>\r\n                                <Link href=\"/account/profile\" className=\"hover:underline\">\r\n                                    <UserIcon className=\"h-6 w-6 text-black\" />\r\n                                </Link>\r\n                            </li>\r\n\r\n                            {/* Favorites Icon with Counter */}\r\n                            <li className=\"relative\">\r\n                                <Link href=\"/favorites\" className=\"hover:underline\">\r\n                                    <HeartIcon className=\"h-6 w-6 text-black\" />\r\n                                    {favoriteCount > 0 && (\r\n                                        <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold\">\r\n                                            {favoriteCount}\r\n                                        </span>\r\n                                    )}\r\n                                </Link>\r\n                            </li>\r\n\r\n                            {/* Cart Icon with Counter */}\r\n                            <li className=\"relative\">\r\n                                <Link href=\"/cart\" className=\"hover:underline\">\r\n                                    <ShoppingBagIcon className=\"h-6 w-6 text-black\" />\r\n                                    {totalItems > 0 && (\r\n                                        <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold\">\r\n                                            {totalItems}\r\n                                        </span>\r\n                                    )}\r\n                                </Link>\r\n                            </li>\r\n                        </ul>\r\n                    </nav>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Drawer Sidebar */}\r\n            <div\r\n                className={`fixed inset-0 z-50 bg-gray-800 bg-opacity-50 transition-opacity duration-300 ${isDrawerOpen ? 'opacity-100 visible' : 'opacity-0 invisible'\r\n                    }`}\r\n                onClick={toggleDrawer}\r\n            ></div>\r\n            <div\r\n                className={`fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50 transform transition-transform duration-300 ${isDrawerOpen ? 'translate-x-0' : '-translate-x-full'\r\n                    }`}\r\n            >\r\n                {/* Close Button */}\r\n                <button\r\n                    className=\"absolute top-4 right-4 text-gray-600 focus:outline-none\"\r\n                    onClick={toggleDrawer}\r\n                >\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        className=\"w-6 h-6\"\r\n                        fill=\"none\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth={2}\r\n                    >\r\n                        <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M6 18L18 6M6 6l12 12\"\r\n                        />\r\n                    </svg>\r\n                </button>\r\n\r\n                {/* Sidebar Content */}\r\n                <div className=\"divide-y divide-gray-200\">\r\n                    <Sidebar isMobile={true} />\r\n\r\n                    {/* Additional Links */}\r\n                    {/* <nav className=\"py-2\">\r\n                        <Link\r\n                            href=\"/TrackOrder\"\r\n                            className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n                            onClick={toggleDrawer}\r\n                        >\r\n                            <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\r\n                            </svg>\r\n                            Tra cứu đơn hàng\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/store-locations\"\r\n                            className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n                            onClick={toggleDrawer}\r\n                        >\r\n                            <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            </svg>\r\n                            Hệ thống cửa hàng\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/user-guide\"\r\n                            className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n                            onClick={toggleDrawer}\r\n                        >\r\n                            <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                            </svg>\r\n                            Hướng dẫn sử dụng\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/warranty-policy\"\r\n                            className=\"flex items-center px-4 py-2.5 text-gray-700 hover:bg-gray-50 hover:text-gray-600\"\r\n                            onClick={toggleDrawer}\r\n                        >\r\n                            <svg className=\"w-5 h-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n                            </svg>\r\n                            Chính sách bảo hành\r\n                        </Link>\r\n                    </nav> */}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Header;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4162, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/Footer.js"],"sourcesContent":["// components/Footer.js\r\nimport Link from \"next/link\";\r\nexport default function Footer() {\r\n    return (\r\n        <footer className=\"bg-gray-800 text-white py-12\">\r\n            <div className=\"container mx-auto px-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\r\n                    {/* Về chúng tôi */}\r\n                    <div>\r\n                        <h3 className=\"text-xl font-bold mb-4\">FASHION STORE</h3>\r\n                        <p className=\"text-gray-300 mb-4\">\r\n                            Hệ thống thời trang hàng đầu Việt Nam, hướng tới phong cách lịch lãm và trẻ trung.\r\n                        </p>\r\n                        <div className=\"space-y-2\">\r\n                            <p className=\"flex items-center\">\r\n                                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                </svg>\r\n                                Văn phòng: Tp. HCM\r\n                            </p>\r\n                            <p className=\"flex items-center\">\r\n                                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\r\n                                </svg>\r\n                                0999 999 999\r\n                            </p>\r\n                            <p className=\"flex items-center\">\r\n                                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                                cskh@fashionstore.vn\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex space-x-4 mt-4\">\r\n                            <a href=\"#\" className=\"hover:text-blue-400\">\r\n                                <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                                </svg>\r\n                            </a>\r\n                            <a href=\"#\" className=\"hover:text-blue-400\">\r\n                                <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\" />\r\n                                </svg>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chính sách */}\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold mb-4\">Chính sách</h3>\r\n                        <ul className=\"space-y-2\">\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Tìm kiếm</a></li>\r\n                            <li>\r\n                                <Link href=\"/about\" className=\"hover:text-blue-400\">\r\n                                    Giới thiệu\r\n                                </Link>\r\n                            </li>\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Cơ hội việc làm</a></li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Hỗ trợ khách hàng */}\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold mb-4\">Hỗ trợ khách hàng</h3>\r\n                        <ul className=\"space-y-2\">\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Hướng dẫn mua hàng</a></li>\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Hướng dẫn sử dụng</a></li>\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Chi tiết kích cỡ</a></li>\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Chính sách đổi trả & bảo hành</a></li>\r\n                            <li><a href=\"#\" className=\"hover:text-blue-400\">Quy trình giao nhận và thanh toán</a></li>\r\n                            <li>\r\n                                <Link href=\"/TrackOrder\" className=\"hover:text-blue-400\">Tra cứu đơn hàng</Link>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Phương thức thanh toán */}\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold mb-4\">Phương thức thanh toán</h3>\r\n                        <div className=\"mb-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                {/* VietQR */}\r\n                                <div className=\"bg-white p-2 rounded\">\r\n                                    <img\r\n                                        src=\"https://firebasestorage.googleapis.com/v0/b/red89-f8933.appspot.com/o/KLTN%2Fdownload%20(1).png?alt=media&token=511aa9a9-ee31-4052-b34c-33678688b64a\"\r\n                                        alt=\"VietQR\"\r\n                                        className=\"h-12 object-contain mx-auto\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* COD */}\r\n                                <div className=\"bg-white p-2 rounded\">\r\n                                    <img\r\n                                        src=\"https://firebasestorage.googleapis.com/v0/b/red89-f8933.appspot.com/o/KLTN%2Fdownload.png?alt=media&token=2864ee90-34ec-45a7-a3a7-90cb82e7639e\"\r\n                                        alt=\"COD\"\r\n                                        className=\"h-12 object-contain mx-auto\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"border-t border-gray-700 mt-8 pt-8 text-center\">\r\n                    <p className=\"text-sm text-gray-400\">\r\n                        &copy; 2025 Fashion Store. All rights reserved.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4653, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/BackToTop.js"],"sourcesContent":["// components/BackToTop.js\r\nimport { useState, useEffect } from 'react';\r\n\r\nconst BackToTop = () => {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    // Kiểm tra vị trí scroll để hiển thị/ẩn nút\r\n    const toggleVisibility = () => {\r\n        if (window.pageYOffset > 300) {\r\n            setIsVisible(true);\r\n        } else {\r\n            setIsVisible(false);\r\n        }\r\n    };\r\n\r\n    // Xử lý scroll to top\r\n    const scrollToTop = () => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth'\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', toggleVisibility);\r\n\r\n        return () => {\r\n            window.removeEventListener('scroll', toggleVisibility);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {isVisible && (\r\n                <button\r\n                    onClick={scrollToTop}\r\n                    className=\"fixed bottom-8 right-8 bg-gray-600 hover:bg-gray-700 \r\n                             text-white w-12 h-12 rounded-full shadow-lg \r\n                             transition-all duration-300 ease-in-out \r\n                             flex items-center justify-center\r\n                             z-50 group\"\r\n                    aria-label=\"Về đầu trang\"\r\n                >\r\n                    <svg\r\n                        className=\"w-6 h-6 group-hover:-translate-y-1 transition-transform duration-300\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            strokeWidth=\"2.5\"\r\n                            d=\"M5 10l7-7m0 0l7 7m-7-7v18\"\r\n                        />\r\n                    </svg>\r\n                </button>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default BackToTop;\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAC1B;;;;AAEA,MAAM,YAAY;;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,4CAA4C;IAC5C,MAAM,mBAAmB;QACrB,IAAI,OAAO,WAAW,GAAG,KAAK;YAC1B,aAAa;QACjB,OAAO;YACH,aAAa;QACjB;IACJ;IAEA,sBAAsB;IACtB,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC;YACZ,KAAK;YACL,UAAU;QACd;IACJ;IAEA,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD;+BAAE;YACN,OAAO,gBAAgB,CAAC,UAAU;YAElC;uCAAO;oBACH,OAAO,mBAAmB,CAAC,UAAU;gBACzC;;QACJ;8BAAG,EAAE;IAEL,qBACI;kBACK,2BACG,0JAAC;YACG,SAAS;YACT,WAAU;YAKV,cAAW;sBAEX,cAAA,0JAAC;gBACG,WAAU;gBACV,MAAK;gBACL,QAAO;gBACP,SAAQ;gBACR,OAAM;0BAEN,cAAA,0JAAC;oBACG,eAAc;oBACd,gBAAe;oBACf,aAAY;oBACZ,GAAE;;;;;;;;;;;;;;;;;AAO9B;GA1DM;KAAA;uCA4DS","debugId":null}},
    {"offset": {"line": 4737, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/ServiceFeatures.js"],"sourcesContent":["// components/ServiceFeatures.js\r\nconst ServiceFeatures = () => {\r\n    const features = [\r\n        {\r\n            id: 1,\r\n            title: 'Miễn phí vận chuyển',\r\n            description: 'Áp dụng cho mọi đơn hàng từ 500k',\r\n            icon: (\r\n                <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n                </svg>\r\n            )\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Đổi hàng dễ dàng',\r\n            description: '7 ngày đổi hàng vì bất kì lí do gì',\r\n            icon: (\r\n                <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\r\n                </svg>\r\n            )\r\n        },\r\n        {\r\n            id: 3,\r\n            title: 'Hỗ trợ nhanh chóng',\r\n            description: 'HOTLINE 24/7: 0999999999',\r\n            icon: (\r\n                <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"></path>\r\n                </svg>\r\n            )\r\n        },\r\n        {\r\n            id: 4,\r\n            title: 'Thanh toán đa dạng',\r\n            description: 'Thanh toán khi nhận hàng, VietQR, Chuyển Khoản',\r\n            icon: (\r\n                <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"></path>\r\n                </svg>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"bg-gray-50 py-12\">\r\n            <div className=\"container mx-auto px-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\r\n                    {features.map((feature) => (\r\n                        <div\r\n                            key={feature.id}\r\n                            className=\"bg-white p-6 rounded-lg shadow-md \r\n                                     hover:shadow-lg transition-shadow duration-300\r\n                                     flex flex-col items-center text-center\"\r\n                        >\r\n                            <div className=\"text-gray-600 mb-4\">\r\n                                {feature.icon}\r\n                            </div>\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\r\n                                {feature.title}\r\n                            </h3>\r\n                            <p className=\"text-gray-600\">\r\n                                {feature.description}\r\n                            </p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ServiceFeatures;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;AAChC,MAAM,kBAAkB;IACpB,MAAM,WAAW;QACb;YACI,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBACI,0JAAC;gBAAI,WAAU;gBAAU,MAAK;gBAAO,QAAO;gBAAe,SAAQ;gBAAY,OAAM;0BACjF,cAAA,0JAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAY;oBAAI,GAAE;;;;;;;;;;;QAGjF;QACA;YACI,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBACI,0JAAC;gBAAI,WAAU;gBAAU,MAAK;gBAAO,QAAO;gBAAe,SAAQ;gBAAY,OAAM;0BACjF,cAAA,0JAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAY;oBAAI,GAAE;;;;;;;;;;;QAGjF;QACA;YACI,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBACI,0JAAC;gBAAI,WAAU;gBAAU,MAAK;gBAAO,QAAO;gBAAe,SAAQ;gBAAY,OAAM;0BACjF,cAAA,0JAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAY;oBAAI,GAAE;;;;;;;;;;;QAGjF;QACA;YACI,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBACI,0JAAC;gBAAI,WAAU;gBAAU,MAAK;gBAAO,QAAO;gBAAe,SAAQ;gBAAY,OAAM;0BACjF,cAAA,0JAAC;oBAAK,eAAc;oBAAQ,gBAAe;oBAAQ,aAAY;oBAAI,GAAE;;;;;;;;;;;QAGjF;KACH;IAED,qBACI,0JAAC;QAAI,WAAU;kBACX,cAAA,0JAAC;YAAI,WAAU;sBACX,cAAA,0JAAC;gBAAI,WAAU;0BACV,SAAS,GAAG,CAAC,CAAC,wBACX,0JAAC;wBAEG,WAAU;;0CAIV,0JAAC;gCAAI,WAAU;0CACV,QAAQ,IAAI;;;;;;0CAEjB,0JAAC;gCAAG,WAAU;0CACT,QAAQ,KAAK;;;;;;0CAElB,0JAAC;gCAAE,WAAU;0CACR,QAAQ,WAAW;;;;;;;uBAZnB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;AAoB3C;KAtEM;uCAwES","debugId":null}},
    {"offset": {"line": 4918, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/Layout.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport { getCartItems } from '../store/slices/cartSlice';\r\nimport { forceUpdateFavorites, transferFavorites } from '../store/slices/favoriteSlice';\r\nimport { getCartId } from '../utils/storage';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport BackToTop from './BackToTop';\r\nimport ServiceFeatures from './ServiceFeatures';\r\n\r\nexport default function Layout({ children }) {\r\n    const dispatch = useDispatch();\r\n    const router = useRouter();\r\n    const isCartPage = router.pathname === '/cart';\r\n    const hasFetchedCart = useRef(false);\r\n    const hasFetchedFavorites = useRef(false);\r\n\r\n    // Initial fetch favorites và transfer\r\n    useEffect(() => {\r\n        const initializeFavorites = async () => {\r\n            if (!hasFetchedFavorites.current) {\r\n                try {\r\n                    // Đầu tiên thực hiện transfer favorites\r\n                    await dispatch(transferFavorites()).unwrap();\r\n\r\n                    // Sau đó fetch dữ liệu mới\r\n                    await dispatch(forceUpdateFavorites({ page: 1, limit: 10 })).unwrap();\r\n\r\n                    hasFetchedFavorites.current = true;\r\n                } catch (error) {\r\n                    console.error('Failed to initialize favorites:', error);\r\n                    hasFetchedFavorites.current = false;\r\n                }\r\n            }\r\n        };\r\n\r\n        initializeFavorites();\r\n    }, [dispatch]);\r\n\r\n    // Route change với transfer và update\r\n    useEffect(() => {\r\n        let timeoutId;\r\n        const handleRouteChange = async () => {\r\n            clearTimeout(timeoutId);\r\n            timeoutId = setTimeout(async () => {\r\n                try {\r\n                    // Transfer trước khi update\r\n                    await dispatch(transferFavorites()).unwrap();\r\n                    await dispatch(forceUpdateFavorites({ page: 1, limit: 10 })).unwrap();\r\n                } catch (error) {\r\n                    console.error('Failed to update favorites on route change:', error);\r\n                }\r\n            }, 300000);\r\n        };\r\n\r\n        router.events.on('routeChangeComplete', handleRouteChange);\r\n        return () => {\r\n            router.events.off('routeChangeComplete', handleRouteChange);\r\n            clearTimeout(timeoutId);\r\n        };\r\n    }, [dispatch, router.events]);\r\n\r\n    // Cart logic giữ nguyên\r\n    useEffect(() => {\r\n        const cartId = getCartId();\r\n        if (cartId && !isCartPage && !hasFetchedCart.current) {\r\n            hasFetchedCart.current = true;\r\n            dispatch(getCartItems(cartId));\r\n        }\r\n        return () => {\r\n            hasFetchedCart.current = false;\r\n        };\r\n    }, [dispatch, isCartPage]);\r\n\r\n    useEffect(() => {\r\n        const updateFavorites = async () => {\r\n            try {\r\n                await dispatch(transferFavorites()).unwrap();\r\n                await dispatch(forceUpdateFavorites({ page: 1, limit: 10 })).unwrap();\r\n            } catch (error) {\r\n                console.error('Failed to update favorites:', error);\r\n            }\r\n        };\r\n\r\n        updateFavorites();\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex flex-col\">\r\n            <Header isCartPage={isCartPage} />\r\n\r\n            <main className=\"flex-grow\">\r\n                {children}\r\n            </main>\r\n            \r\n            <BackToTop />\r\n            <ServiceFeatures />\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5109, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/slugs/ProductReviews.js"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function ProductReviews({\r\n    reviews,\r\n    averageRating,\r\n    pagination,\r\n    reviewsError,\r\n    handlePageChange,\r\n    handleSubmitReview,\r\n    reviewRating,\r\n    setReviewRating,\r\n    reviewText,\r\n    setReviewText,\r\n    getToken,\r\n    router,\r\n}) {\r\n    return (\r\n        <div className=\"mt-8\">\r\n            <h2 className=\"text-2xl font-bold mb-4\">Đánh giá sản phẩm</h2>\r\n            <div className=\"mb-4\">\r\n                <h3 className=\"text-lg font-semibold mb-2\">\r\n                    ĐIỂM ĐÁNH GIÁ {averageRating || 0}/5 DỰA TRÊN {pagination.totalReviews} ĐÁNH GIÁ\r\n                </h3>\r\n                {reviewsError ? (\r\n                    <p className=\"text-red-500\">Failed to fetch reviews.</p>\r\n                ) : (\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        {reviews?.map((review) => (\r\n                            <div key={review.id} className=\"border p-4 rounded shadow-sm bg-white hover:shadow-md\">\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"currentColor\"\r\n                                            className=\"w-6 h-6 text-gray-500\"\r\n                                        >\r\n                                            <path\r\n                                                fillRule=\"evenodd\"\r\n                                                d=\"M12 2a10 10 0 100 20 10 10 0 000-20zM8.25 9a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM5.95 16.86a7.5 7.5 0 0112.1 0 8.5 8.5 0 10-12.1 0z\"\r\n                                                clipRule=\"evenodd\"\r\n                                            />\r\n                                        </svg>\r\n                                    </div>\r\n                                    <p className=\"font-semibold\">{review.user}</p>\r\n                                </div>\r\n                                <div className=\"flex items-center mb-2\">\r\n                                    {[1, 2, 3, 4, 5].map((rating) => (\r\n                                        <svg\r\n                                            key={rating}\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill={rating <= review.rating ? 'currentColor' : 'none'}\r\n                                            stroke=\"currentColor\"\r\n                                            strokeWidth={2}\r\n                                            className={`w-6 h-6 ${rating <= review.rating ? 'text-yellow-500' : 'text-gray-300'\r\n                                                }`}\r\n                                        >\r\n                                            <path\r\n                                                strokeLinecap=\"round\"\r\n                                                strokeLinejoin=\"round\"\r\n                                                d=\"M12 3.172l2.828 5.734 6.337.919-4.582 4.46 1.081 6.312L12 17.711 6.336 20.597l1.08-6.312-4.582-4.46 6.337-.919L12 3.172z\"\r\n                                            />\r\n                                        </svg>\r\n                                    ))}\r\n                                </div>\r\n                                <p>{review.review_text}</p>\r\n                            </div>\r\n                        ))}\r\n                        {reviews?.length === 0 && <p>Không có đánh giá nào cho sản phẩm này.</p>}\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className=\"flex flex-wrap justify-center items-center gap-2 mt-4\">\r\n                <button\r\n                    className={`px-2 py-1 text-sm border rounded ${pagination.currentPage <= 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'\r\n                        }`}\r\n                    disabled={pagination.currentPage <= 1}\r\n                    onClick={() => handlePageChange(1)}\r\n                >\r\n                    First\r\n                </button>\r\n                <button\r\n                    className={`px-2 py-1 text-sm border rounded ${pagination.currentPage <= 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'\r\n                        }`}\r\n                    disabled={pagination.currentPage <= 1}\r\n                    onClick={() => handlePageChange(pagination.currentPage - 1)}\r\n                >\r\n                    Previous\r\n                </button>\r\n                {Array.from({ length: pagination.totalPages }, (_, index) => index + 1)\r\n                    .filter((page) => Math.abs(page - pagination.currentPage) <= 1)\r\n                    .map((page) => (\r\n                        <button\r\n                            key={page}\r\n                            className={`px-2 py-1 text-sm border rounded ${pagination.currentPage === page ? 'bg-gray-600 text-white' : 'hover:bg-gray-100'\r\n                                }`}\r\n                            onClick={() => handlePageChange(page)}\r\n                        >\r\n                            {page}\r\n                        </button>\r\n                    ))}\r\n                <button\r\n                    className={`px-2 py-1 text-sm border rounded ${pagination.currentPage >= pagination.totalPages ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'\r\n                        }`}\r\n                    disabled={pagination.currentPage >= pagination.totalPages}\r\n                    onClick={() => handlePageChange(pagination.currentPage + 1)}\r\n                >\r\n                    Next\r\n                </button>\r\n                <button\r\n                    className={`px-2 py-1 text-sm border rounded ${pagination.currentPage >= pagination.totalPages ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'\r\n                        }`}\r\n                    disabled={pagination.currentPage >= pagination.totalPages}\r\n                    onClick={() => handlePageChange(pagination.totalPages)}\r\n                >\r\n                    Last\r\n                </button>\r\n            </div>\r\n            <div className=\"mt-6\">\r\n                <h3 className=\"text-lg font-semibold mb-2\">THÊM ĐÁNH GIÁ</h3>\r\n                {!getToken() ? (\r\n                    <button\r\n                        onClick={() => router.push('/account/profile')}\r\n                        className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition\"\r\n                    >\r\n                        Vui lòng đăng nhập để đánh giá sản phẩm\r\n                    </button>\r\n                ) : (\r\n                    <>\r\n                        <form id=\"product-review-form\" onSubmit={(e) => {\r\n                            e.preventDefault();\r\n                            handleSubmitReview();\r\n                        }}>\r\n                            <div className=\"flex items-center mb-4\">\r\n                                {[1, 2, 3, 4, 5].map((rating) => (\r\n                                    <svg\r\n                                        key={rating}\r\n                                        id={`rating-star-${rating}`}\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill={rating <= reviewRating ? 'currentColor' : 'none'}\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth={2}\r\n                                        className={`w-8 h-8 cursor-pointer ${rating <= reviewRating ? 'text-yellow-500' : 'text-gray-300'\r\n                                            }`}\r\n                                        onClick={() => setReviewRating(rating)}\r\n                                    >\r\n                                        <path\r\n                                            strokeLinecap=\"round\"\r\n                                            strokeLinejoin=\"round\"\r\n                                            d=\"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z\"\r\n                                        />\r\n                                    </svg>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <textarea\r\n                                id=\"review-text-area\"\r\n                                value={reviewText}\r\n                                onChange={(e) => setReviewText(e.target.value)}\r\n                                className=\"w-full border p-2 rounded mb-4\"\r\n                                rows=\"4\"\r\n                                placeholder=\"Write your review here...\"\r\n                            ></textarea>\r\n                            <button\r\n                                id=\"submit-review-button\"\r\n                                type=\"submit\"\r\n                                className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition\"\r\n                            >\r\n                                Gửi Đánh giá\r\n                            </button>\r\n                        </form>\r\n\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5444, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/slugs/ProductDescription.js"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function ProductDescription({\r\n    description,\r\n    productType = 'clothing', // 'clothing', 'accessory', 'footwear'\r\n    material,\r\n    careInstructions,\r\n    features\r\n}) {\r\n    // Mô tả mặc định theo loại sản phẩm\r\n    const getDefaultDescription = () => {\r\n        const descriptions = {\r\n            clothing: `Sản phẩm thời trang cao cấp được thiết kế theo xu hướng mới nhất, mang đến vẻ ngoài hiện đại và phong cách. Được may từ chất liệu chọn lọc, tạo cảm giác thoải mái khi mặc và dễ dàng phối với nhiều trang phục khác nhau.`,\r\n\r\n            accessory: `Phụ kiện thời trang tinh tế, là điểm nhấn hoàn hảo cho trang phục của bạn. Thiết kế hiện đại, dễ dàng kết hợp với nhiều phong cách khác nhau, giúp tôn lên vẻ đẹp cá nhân và thể hiện gu thẩm mỹ độc đáo.`,\r\n\r\n            footwear: `Giày dép thời trang được thiết kế tỉ mỉ, kết hợp giữa phong cách hiện đại và sự thoải mái. Đế giày chắc chắn, hỗ trợ tốt cho bàn chân trong mọi hoạt động hàng ngày.`\r\n        };\r\n\r\n        return descriptions[productType] || descriptions.clothing;\r\n    };\r\n\r\n    // Hướng dẫn bảo quản mặc định\r\n    const getDefaultCareInstructions = () => {\r\n        const instructions = {\r\n            clothing: [\r\n                \"Giặt máy ở nhiệt độ thấp hoặc giặt tay nhẹ nhàng\",\r\n                \"Không sử dụng chất tẩy mạnh\",\r\n                \"Phơi trong bóng râm để tránh phai màu\",\r\n                \"Ủi ở nhiệt độ thấp hoặc trung bình\",\r\n                \"Không vắt mạnh\"\r\n            ],\r\n\r\n            accessory: [\r\n                \"Tránh tiếp xúc với nước và hóa chất\",\r\n                \"Lau nhẹ nhàng bằng khăn mềm\",\r\n                \"Bảo quản trong hộp hoặc túi riêng\",\r\n                \"Tránh va đập mạnh\",\r\n                \"Không để dưới ánh nắng trực tiếp\"\r\n            ],\r\n\r\n            footwear: [\r\n                \"Làm sạch bằng bàn chải mềm\",\r\n                \"Để khô tự nhiên, tránh các nguồn nhiệt trực tiếp\",\r\n                \"Sử dụng xi đánh giày phù hợp với chất liệu\",\r\n                \"Không giặt máy\",\r\n                \"Bảo quản ở nơi khô ráo, thoáng mát\"\r\n            ]\r\n        };\r\n\r\n        return instructions[productType] || instructions.clothing;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <section>\r\n                <h2 className=\"text-2xl font-bold mb-4\">Mô tả sản phẩm</h2>\r\n                <div className=\"prose prose-lg max-w-none text-gray-700\">\r\n                    {description || getDefaultDescription()}\r\n                </div>\r\n            </section>\r\n\r\n            {material && (\r\n                <section>\r\n                    <h3 className=\"text-xl font-semibold mb-2\">Chất liệu</h3>\r\n                    <p className=\"text-gray-700\">{material}</p>\r\n                </section>\r\n            )}\r\n\r\n            {features && features.length > 0 && (\r\n                <section>\r\n                    <h3 className=\"text-xl font-semibold mb-2\">Đặc điểm nổi bật</h3>\r\n                    <ul className=\"list-disc pl-5 text-gray-700 space-y-1\">\r\n                        {features.map((feature, index) => (\r\n                            <li key={index}>{feature}</li>\r\n                        ))}\r\n                    </ul>\r\n                </section>\r\n            )}\r\n\r\n            <section>\r\n                <h3 className=\"text-xl font-semibold mb-2\">Hướng dẫn bảo quản</h3>\r\n                <ul className=\"list-disc pl-5 text-gray-700 space-y-1\">\r\n                    {(careInstructions || getDefaultCareInstructions()).map((instruction, index) => (\r\n                        <li key={index}>{instruction}</li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n\r\n            {productType === 'clothing' && (\r\n                <section className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <h3 className=\"text-lg font-semibold mb-2\">Lưu ý khi chọn size</h3>\r\n                    <p className=\"text-gray-700\">\r\n                        Vui lòng tham khảo bảng size để chọn được sản phẩm phù hợp nhất.\r\n                        Nếu bạn đang cân nhắc giữa hai kích cỡ, nên chọn size lớn hơn để thoải mái hơn.\r\n                    </p>\r\n                </section>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,mBAAmB,EACvC,WAAW,EACX,cAAc,UAAU,EACxB,QAAQ,EACR,gBAAgB,EAChB,QAAQ,EACX;IACG,oCAAoC;IACpC,MAAM,wBAAwB;QAC1B,MAAM,eAAe;YACjB,UAAU,CAAC,0NAA0N,CAAC;YAEtO,WAAW,CAAC,yMAAyM,CAAC;YAEtN,UAAU,CAAC,oKAAoK,CAAC;QACpL;QAEA,OAAO,YAAY,CAAC,YAAY,IAAI,aAAa,QAAQ;IAC7D;IAEA,8BAA8B;IAC9B,MAAM,6BAA6B;QAC/B,MAAM,eAAe;YACjB,UAAU;gBACN;gBACA;gBACA;gBACA;gBACA;aACH;YAED,WAAW;gBACP;gBACA;gBACA;gBACA;gBACA;aACH;YAED,UAAU;gBACN;gBACA;gBACA;gBACA;gBACA;aACH;QACL;QAEA,OAAO,YAAY,CAAC,YAAY,IAAI,aAAa,QAAQ;IAC7D;IAEA,qBACI,0JAAC;QAAI,WAAU;;0BACX,0JAAC;;kCACG,0JAAC;wBAAG,WAAU;kCAA0B;;;;;;kCACxC,0JAAC;wBAAI,WAAU;kCACV,eAAe;;;;;;;;;;;;YAIvB,0BACG,0JAAC;;kCACG,0JAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,0JAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;YAIrC,YAAY,SAAS,MAAM,GAAG,mBAC3B,0JAAC;;kCACG,0JAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,0JAAC;wBAAG,WAAU;kCACT,SAAS,GAAG,CAAC,CAAC,SAAS,sBACpB,0JAAC;0CAAgB;+BAAR;;;;;;;;;;;;;;;;0BAMzB,0JAAC;;kCACG,0JAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,0JAAC;wBAAG,WAAU;kCACT,CAAC,oBAAoB,4BAA4B,EAAE,GAAG,CAAC,CAAC,aAAa,sBAClE,0JAAC;0CAAgB;+BAAR;;;;;;;;;;;;;;;;YAKpB,gBAAgB,4BACb,0JAAC;gBAAQ,WAAU;;kCACf,0JAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,0JAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;;AAQjD;KAlGwB","debugId":null}},
    {"offset": {"line": 5643, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/SizeGuide.js"],"sourcesContent":["// components/SizeGuide.js\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { Fragment, useState } from 'react'\r\n\r\nexport default function SizeGuide({ isOpen, closeModal }) {\r\n    const [activeTab, setActiveTab] = useState('shirt');\r\n\r\n    const tabs = [\r\n        { id: 'shirt', label: 'Áo' },\r\n        { id: 'pants', label: 'Quần' },\r\n        { id: 'shoes', label: 'Giày' },\r\n    ];\r\n\r\n    const sizeGuides = {\r\n        shirt: {\r\n            title: 'Bảng Size Áo',\r\n            headers: ['Size', 'Chiều cao (cm)', 'Cân nặng (kg)', 'Ngực (cm)', 'Vai (cm)', 'Dài tay (cm)'],\r\n            data: [\r\n                ['S', '150-160', '45-52', '82-86', '36-38', '58-60'],\r\n                ['M', '155-165', '53-60', '86-90', '38-40', '60-62'],\r\n                ['L', '160-170', '61-68', '90-94', '40-42', '62-64'],\r\n                ['XL', '165-175', '69-76', '94-98', '42-44', '64-66'],\r\n            ]\r\n        },\r\n        pants: {\r\n            title: 'Bảng Size Quần',\r\n            headers: ['Size', 'Chiều cao (cm)', 'Cân nặng (kg)', 'Vòng eo (cm)', 'Vòng mông (cm)', 'Dài quần (cm)'],\r\n            data: [\r\n                ['S', '150-160', '45-52', '64-68', '86-90', '95-97'],\r\n                ['M', '155-165', '53-60', '68-72', '90-94', '97-99'],\r\n                ['L', '160-170', '61-68', '72-76', '94-98', '99-101'],\r\n                ['XL', '165-175', '69-76', '76-80', '98-102', '101-103'],\r\n            ]\r\n        },\r\n        shoes: {\r\n            title: 'Bảng Size Giày',\r\n            headers: ['Size US', 'Size EU', 'Size UK', 'Chiều dài chân (cm)'],\r\n            data: [\r\n                ['6', '39', '5.5', '24.5'],\r\n                ['7', '40', '6.5', '25.5'],\r\n                ['8', '41', '7.5', '26.5'],\r\n                ['9', '42', '8.5', '27.5'],\r\n                ['10', '43', '9.5', '28.5'],\r\n            ]\r\n        }\r\n    };\r\n\r\n    const currentGuide = sizeGuides[activeTab];\r\n\r\n    return (\r\n        <Transition appear show={isOpen} as={Fragment}>\r\n            <Dialog as=\"div\" className=\"relative z-50\" onClose={closeModal}>\r\n                <Transition.Child\r\n                    as={Fragment}\r\n                    enter=\"ease-out duration-300\"\r\n                    enterFrom=\"opacity-0\"\r\n                    enterTo=\"opacity-100\"\r\n                    leave=\"ease-in duration-200\"\r\n                    leaveFrom=\"opacity-100\"\r\n                    leaveTo=\"opacity-0\"\r\n                >\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n                </Transition.Child>\r\n\r\n                <div className=\"fixed inset-0 overflow-y-auto\">\r\n                    <div className=\"flex min-h-full items-center justify-center p-4\">\r\n                        <Transition.Child\r\n                            as={Fragment}\r\n                            enter=\"ease-out duration-300\"\r\n                            enterFrom=\"opacity-0 scale-95\"\r\n                            enterTo=\"opacity-100 scale-100\"\r\n                            leave=\"ease-in duration-200\"\r\n                            leaveFrom=\"opacity-100 scale-100\"\r\n                            leaveTo=\"opacity-0 scale-95\"\r\n                        >\r\n                            <Dialog.Panel className=\"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all\">\r\n                                <Dialog.Title as=\"h3\" className=\"text-lg font-medium leading-6 text-gray-900 mb-4\">\r\n                                    Hướng dẫn chọn size\r\n                                </Dialog.Title>\r\n\r\n                                {/* Tabs */}\r\n                                <div className=\"border-b border-gray-200 mb-4\">\r\n                                    <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\r\n                                        {tabs.map((tab) => (\r\n                                            <button\r\n                                                key={tab.id}\r\n                                                onClick={() => setActiveTab(tab.id)}\r\n                                                className={`\r\n                          ${activeTab === tab.id\r\n                                                        ? 'border-blue-500 text-blue-600'\r\n                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                                                    }\r\n                          whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\r\n                        `}\r\n                                            >\r\n                                                {tab.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </nav>\r\n                                </div>\r\n\r\n                                <div className=\"mt-2 overflow-x-auto\">\r\n                                    <table className=\"min-w-full border-collapse border border-gray-200\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                {currentGuide.headers.map((header, index) => (\r\n                                                    <th key={index} className=\"border border-gray-200 px-4 py-2 bg-gray-50\">\r\n                                                        {header}\r\n                                                    </th>\r\n                                                ))}\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {currentGuide.data.map((row, rowIndex) => (\r\n                                                <tr key={rowIndex}>\r\n                                                    {row.map((cell, cellIndex) => (\r\n                                                        <td key={cellIndex} className=\"border border-gray-200 px-4 py-2 text-center\">\r\n                                                            {cell}\r\n                                                        </td>\r\n                                                    ))}\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                    <div className=\"mt-4 space-y-2 text-sm text-gray-600\">\r\n                                        <p className=\"font-medium\">Cách đo:</p>\r\n                                        {activeTab === 'shirt' && (\r\n                                            <ul className=\"list-disc pl-5 space-y-1\">\r\n                                                <li>Ngực: Đo vòng ngực tại điểm rộng nhất</li>\r\n                                                <li>Vai: Đo từ đầu vai trái đến đầu vai phải</li>\r\n                                                <li>Dài tay: Đo từ đầu vai đến cổ tay</li>\r\n                                            </ul>\r\n                                        )}\r\n                                        {activeTab === 'pants' && (\r\n                                            <ul className=\"list-disc pl-5 space-y-1\">\r\n                                                <li>Vòng eo: Đo vòng eo tại vị trí thon nhất</li>\r\n                                                <li>Vòng mông: Đo vòng mông tại điểm rộng nhất</li>\r\n                                                <li>Dài quần: Đo từ eo đến mắt cá chân</li>\r\n                                            </ul>\r\n                                        )}\r\n                                        {activeTab === 'shoes' && (\r\n                                            <ul className=\"list-disc pl-5 space-y-1\">\r\n                                                <li>Đo chiều dài chân vào cuối ngày</li>\r\n                                                <li>Đứng thẳng khi đo</li>\r\n                                                <li>Nên chọn size lớn hơn 0.5-1cm so với chiều dài chân</li>\r\n                                            </ul>\r\n                                        )}\r\n                                        <p className=\"mt-4 text-yellow-600\">* Bảng size chỉ mang tính chất tham khảo</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mt-4\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none\"\r\n                                        onClick={closeModal}\r\n                                    >\r\n                                        Đóng\r\n                                    </button>\r\n                                </div>\r\n                            </Dialog.Panel>\r\n                        </Transition.Child>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n        </Transition>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6122, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/NotFound.js"],"sourcesContent":["// components/NotFound.jsx\r\nimport React from 'react';\r\nimport Link from 'next/link'; // Changed to Next.js Link\r\nimport { useRouter } from 'next/router'; // Added for navigation\r\n\r\nconst NotFound = ({ \r\n    message = \"Oops! Trang không tồn tại\", \r\n    description = \"Trang bạn đang tìm kiếm có thể đã bị xóa, đổi tên hoặc tạm thời không truy cập được.\"\r\n}) => {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n            <div className=\"text-center px-4\">\r\n                <div className=\"mb-8\">\r\n                    <h1 className=\"text-9xl font-bold text-gray-800\">404</h1>\r\n                </div>\r\n                \r\n                <div className=\"mb-8\">\r\n                    <h2 className=\"text-2xl md:text-3xl font-semibold text-gray-700 mb-3\">\r\n                        {message}\r\n                    </h2>\r\n                    <p className=\"text-gray-600\">\r\n                        {description}\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"space-x-4\">\r\n                    <Link\r\n                        href=\"/\"\r\n                        className=\"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200\"\r\n                    >\r\n                        Về Trang Chủ\r\n                    </Link>\r\n                    <button\r\n                        onClick={() => router.back()}\r\n                        className=\"inline-block px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition duration-200\"\r\n                    >\r\n                        Quay Lại\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"mt-8 text-sm text-gray-500\">\r\n                    <p>\r\n                        Cần hỗ trợ? Liên hệ{' '}\r\n                        <a href=\"mailto:support@example.com\" className=\"text-blue-600 hover:underline\">\r\n                            support@example.com\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotFound;\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAC1B;AACA,qNAA8B,0BAA0B;AACxD,yNAAyC,uBAAuB;;;;;;AAEhE,MAAM,WAAW,CAAC,EACd,UAAU,2BAA2B,EACrC,cAAc,sFAAsF,EACvG;;IACG,MAAM,SAAS,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD;IAEvB,qBACI,0JAAC;QAAI,WAAU;kBACX,cAAA,0JAAC;YAAI,WAAU;;8BACX,0JAAC;oBAAI,WAAU;8BACX,cAAA,0JAAC;wBAAG,WAAU;kCAAmC;;;;;;;;;;;8BAGrD,0JAAC;oBAAI,WAAU;;sCACX,0JAAC;4BAAG,WAAU;sCACT;;;;;;sCAEL,0JAAC;4BAAE,WAAU;sCACR;;;;;;;;;;;;8BAIT,0JAAC;oBAAI,WAAU;;sCACX,0JAAC,wHAAA,CAAA,UAAI;4BACD,MAAK;4BACL,WAAU;sCACb;;;;;;sCAGD,0JAAC;4BACG,SAAS,IAAM,OAAO,IAAI;4BAC1B,WAAU;sCACb;;;;;;;;;;;;8BAKL,0JAAC;oBAAI,WAAU;8BACX,cAAA,0JAAC;;4BAAE;4BACqB;0CACpB,0JAAC;gCAAE,MAAK;gCAA6B,WAAU;0CAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQvG;GAhDM;;QAIa,0HAAA,CAAA,YAAS;;;KAJtB;uCAkDS","debugId":null}},
    {"offset": {"line": 6266, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/components/RecentlyViewed.js"],"sourcesContent":["// components/RecentlyViewed.js\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { HeartIcon as HeartOutline } from '@heroicons/react/24/outline';\r\nimport { HeartIcon as HeartSolid } from '@heroicons/react/24/solid';\r\nimport { ShoppingBagIcon } from '@heroicons/react/24/outline';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { vi } from 'date-fns/locale';\r\nimport {\r\n    addToFavorite,\r\n    removeFromFavorite,\r\n    getFavorites,\r\n    selectFavoriteStatuses\r\n} from '../store/slices/favoriteSlice';\r\nimport {\r\n    createCartForGuest,\r\n    createCartForUser,\r\n    addItemToCart,\r\n    getCartItems\r\n} from '../store/slices/cartSlice';\r\nimport { indexApi, stockApi } from '../utils/apiClient';\r\nimport { getToken, getCartId } from '../utils/storage';\r\n\r\nconst RECENTLY_VIEWED_KEY = 'recently_viewed_products';\r\n\r\nexport default function RecentlyViewed({\r\n}) {\r\n    const [recentProducts, setRecentProducts] = useState([]);\r\n    const router = useRouter();\r\n    const dispatch = useDispatch();\r\n\r\n    const favorites = useSelector(selectFavoriteStatuses);\r\n    const { items: cartItems } = useSelector((state) => state.cart);\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [stocks, setStocks] = useState([]); // Thêm state stock\r\n    const [productModal, setProductModal] = useState(null); // Modal cho chọn sản phẩm\r\n    const [selectedColor, setSelectedColor] = useState(null);\r\n    const [selectedSize, setSelectedSize] = useState(null);\r\n    const [quantity, setQuantity] = useState(1);\r\n\r\n    // Thêm hàm fetch stocks\r\n    const fetchStocks = async () => {\r\n        try {\r\n            const response = await stockApi.getProductStocks();\r\n            if (response.success) {\r\n                setStocks(response.data);\r\n            } else {\r\n                console.error('Lỗi khi tải dữ liệu tồn kho');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching stocks:', err);\r\n        }\r\n    };\r\n\r\n    // Cập nhật trạng thái khi chọn sản phẩm\r\n    useEffect(() => {\r\n        if (productModal && stocks.length > 0) {\r\n            const firstAvailableColor = productModal.productColors.find(color =>\r\n                isColorAvailable(productModal.id, color.id)\r\n            );\r\n            setSelectedColor(firstAvailableColor || null);\r\n            setSelectedSize(null);\r\n            setQuantity(1);\r\n        }\r\n    }, [productModal, stocks]);\r\n\r\n    useEffect(() => {\r\n        if (selectedColor && productModal?.productSizes && stocks.length > 0) {\r\n            const firstAvailableSize = productModal.productSizes.find(size =>\r\n                isSizeAvailable(productModal.id, selectedColor.id, size.id)\r\n            );\r\n            setSelectedSize(firstAvailableSize || null);\r\n            setQuantity(1);\r\n        }\r\n    }, [selectedColor, productModal, stocks]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                await Promise.all([\r\n                    fetchStocks(), // Thêm fetch stocks\r\n                    dispatch(getFavorites({ page: 1, limit: 100 })).unwrap()\r\n                ]);\r\n\r\n                // Tải thông tin giỏ hàng nếu có\r\n                const cartId = getCartId();\r\n                if (cartId) {\r\n                    dispatch(getCartItems(cartId));\r\n                }\r\n            } catch (error) {\r\n                console.error('Error loading initial data:', error);\r\n                setError('Có lỗi xảy ra khi tải dữ liệu');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, [dispatch]);\r\n\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const products = JSON.parse(localStorage.getItem(RECENTLY_VIEWED_KEY) || '[]');\r\n            setRecentProducts(products);\r\n        } catch (error) {\r\n            console.error('Error loading recently viewed products:', error);\r\n        }\r\n    }, []);\r\n\r\n    const handleProductClick = (slug) => {\r\n        router.push(`/productdetail/${slug}`);\r\n    };\r\n\r\n    if (recentProducts.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const handleFavoriteClick = async (e, productId) => {\r\n        e.stopPropagation();\r\n        try {\r\n            if (favorites[productId]) {\r\n                await dispatch(removeFromFavorite(productId)).unwrap();\r\n            } else {\r\n                await dispatch(addToFavorite(productId)).unwrap();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error handling favorite:', error);\r\n        }\r\n    };\r\n\r\n    // Thêm các hàm quản lý stock từ [slug].js\r\n    const getStockQuantity = (productId, colorId, sizeId) => {\r\n        const stock = stocks.find(\r\n            stock => stock.product_id === productId &&\r\n                stock.color_id === colorId &&\r\n                stock.size_id === sizeId\r\n        );\r\n        return stock ? stock.quantity : 0;\r\n    };\r\n\r\n    const getCartItemQuantity = (productId, colorId, sizeId) => {\r\n        const existingItem = cartItems?.find(item =>\r\n            item.product_id === productId &&\r\n            item.color_id === colorId &&\r\n            item.size_id === sizeId\r\n        );\r\n        return existingItem?.quantity || 0;\r\n    };\r\n\r\n    const isColorAvailable = (productId, colorId) => {\r\n        return stocks.some(\r\n            stock => stock.product_id === productId &&\r\n                stock.color_id === colorId &&\r\n                stock.quantity > 0\r\n        );\r\n    };\r\n\r\n    const isSizeAvailable = (productId, colorId, sizeId) => {\r\n        return stocks.some(\r\n            stock => stock.product_id === productId &&\r\n                stock.color_id === colorId &&\r\n                stock.size_id === sizeId &&\r\n                stock.quantity > 0\r\n        );\r\n    };\r\n\r\n    const getMaxAvailableQuantity = (productId) => {\r\n        if (!selectedColor || !selectedSize) return 0;\r\n\r\n        const stockQuantity = getStockQuantity(productId, selectedColor.id, selectedSize.id);\r\n        const cartQuantity = getCartItemQuantity(\r\n            productId,\r\n            selectedColor.id,\r\n            selectedSize.id\r\n        );\r\n\r\n        return Math.max(0, stockQuantity - cartQuantity);\r\n    };\r\n\r\n    const handleAddToCart = async (showAlert = true) => {\r\n        if (!selectedColor || !selectedSize) {\r\n            alert('Vui lòng chọn màu và kích thước.');\r\n            return;\r\n        }\r\n\r\n        const stockQuantity = getStockQuantity(productModal.id, selectedColor.id, selectedSize.id);\r\n        const cartQuantity = getCartItemQuantity(\r\n            productModal.id,\r\n            selectedColor.id,\r\n            selectedSize.id\r\n        );\r\n\r\n        if (cartQuantity + quantity > stockQuantity) {\r\n            const remainingQuantity = stockQuantity - cartQuantity;\r\n            if (remainingQuantity <= 0) {\r\n                alert('Sản phẩm đã hết hàng hoặc đã có trong giỏ hàng với số lượng tối đa.');\r\n                return;\r\n            }\r\n            alert(`Chỉ còn ${remainingQuantity} sản phẩm có thể thêm vào giỏ hàng.`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            let activeCartId = getCartId();\r\n\r\n            if (!activeCartId) {\r\n                const cartResponse = getToken()\r\n                    ? await dispatch(createCartForUser()).unwrap()\r\n                    : await dispatch(createCartForGuest()).unwrap();\r\n                activeCartId = cartResponse?.id;\r\n            }\r\n\r\n            await dispatch(\r\n                addItemToCart({\r\n                    cartId: activeCartId,\r\n                    itemData: {\r\n                        product_id: productModal.id,\r\n                        color_id: selectedColor.id,\r\n                        size_id: selectedSize.id,\r\n                        quantity,\r\n                    },\r\n                })\r\n            ).unwrap();\r\n\r\n            dispatch(getCartItems(activeCartId));\r\n            localStorage.setItem('cartId', activeCartId);\r\n\r\n            setProductModal(null); // Đóng modal\r\n            if (showAlert) {\r\n                alert('Sản phẩm đã được thêm vào giỏ hàng!');\r\n            }\r\n        } catch (error) {\r\n            alert('Có lỗi xảy ra khi thêm vào giỏ hàng!');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const handleBuyNow = async () => {\r\n        try {\r\n            await handleAddToCart(false);\r\n            router.push('/cart');\r\n        } catch (error) {\r\n            alert('Có lỗi xảy ra khi thêm vào giỏ hàng!');\r\n        }\r\n    };\r\n\r\n    const increaseQuantity = () => {\r\n        const availableQuantity = getMaxAvailableQuantity(productModal?.id);\r\n        if (quantity >= availableQuantity) {\r\n            alert(`Chỉ còn ${availableQuantity} sản phẩm có thể thêm vào giỏ hàng.`);\r\n            return;\r\n        }\r\n        setQuantity(prev => prev + 1);\r\n    };\r\n\r\n    const decreaseQuantity = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n    const openProductModal = (product) => {\r\n        setProductModal(product);\r\n        console.log('product', product);\r\n    };\r\n\r\n    const ProductModal = () => {\r\n        if (!productModal) return null;\r\n\r\n        // Tìm đối tượng màu đang được chọn hoặc sử dụng màu đầu tiên nếu chưa chọn màu nào\r\n        const currentColorObject = selectedColor\r\n            ? productModal.productColors.find(c => c.id === selectedColor.id)\r\n            : productModal.productColors[0];\r\n\r\n        // Lấy ảnh từ productColor\r\n        const currentImage = currentColorObject?.image || 'https://via.placeholder.com/150';\r\n\r\n        return (\r\n            <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                <div className=\"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                        <h3 className=\"text-lg font-bold\">{productModal.product_name}</h3>\r\n                        <button\r\n                            onClick={() => setProductModal(null)}\r\n                            className=\"text-gray-500 hover:text-gray-700\"\r\n                        >\r\n                            &times;\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Hiển thị ảnh theo màu được chọn */}\r\n                    <div className=\"mb-4\">\r\n                        <img\r\n                            src={currentImage}\r\n                            alt={`${productModal.product_name} - ${currentColorObject?.color || 'Màu mặc định'}`}\r\n                            className=\"w-full h-64 object-contain rounded mb-4 border\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"mb-4\">\r\n                        <h4 className=\"font-semibold mb-2\">Chọn màu:</h4>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {productModal.productColors.map((color) => {\r\n                                const hasStock = isColorAvailable(productModal.id, color.id);\r\n                                return (\r\n                                    <div\r\n                                        key={color.id}\r\n                                        className={`\r\n                                            w-8 h-8 rounded-full border relative\r\n                                            ${selectedColor?.id === color.id ? 'ring-2 ring-gray-500' : ''}\r\n                                            ${!hasStock ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-md'}\r\n                                        `}\r\n                                        style={{ backgroundColor: color.hex_code }}\r\n                                        title={`${color.color}${!hasStock ? ' (Hết hàng)' : ''}`}\r\n                                        onClick={() => hasStock && setSelectedColor(color)}\r\n                                    >\r\n                                        {!hasStock && (\r\n                                            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                                <div className=\"w-full h-0.5 bg-gray-400 transform rotate-45\"></div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-4\">\r\n                        <h4 className=\"font-semibold mb-2\">Chọn kích thước:</h4>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {productModal.productSizes.map((size) => {\r\n                                const isAvailable = selectedColor && isSizeAvailable(productModal.id, selectedColor.id, size.id);\r\n                                return (\r\n                                    <button\r\n                                        key={size.id}\r\n                                        className={`\r\n                                            px-4 py-1 border rounded relative\r\n                                            ${selectedSize?.id === size.id ? 'bg-gray-100' : ''}\r\n                                            ${!isAvailable ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'}\r\n                                        `}\r\n                                        onClick={() => isAvailable && setSelectedSize(size)}\r\n                                        disabled={!isAvailable}\r\n                                    >\r\n                                        <span>{size.size}</span>\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-4\">\r\n                        <h4 className=\"font-semibold mb-2\">Số lượng:</h4>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                                className=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\"\r\n                                onClick={decreaseQuantity}\r\n                                disabled={!selectedSize || !selectedColor}\r\n                            >\r\n                                -\r\n                            </button>\r\n                            <input\r\n                                type=\"number\"\r\n                                className=\"w-16 px-2 py-1 border rounded text-center\"\r\n                                min=\"1\"\r\n                                max={getMaxAvailableQuantity(productModal.id)}\r\n                                value={quantity}\r\n                                readOnly\r\n                            />\r\n                            <button\r\n                                className=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\"\r\n                                onClick={increaseQuantity}\r\n                                disabled={!selectedSize || !selectedColor}\r\n                            >\r\n                                +\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                        <button\r\n                            className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition w-full sm:w-auto\"\r\n                            onClick={() => handleAddToCart()}\r\n                            disabled={!selectedSize || !selectedColor || getMaxAvailableQuantity(productModal.id) === 0}\r\n                        >\r\n                            Thêm vào giỏ hàng\r\n                        </button>\r\n                        <button\r\n                            className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition w-full sm:w-auto\"\r\n                            onClick={handleBuyNow}\r\n                            disabled={!selectedSize || !selectedColor || getMaxAvailableQuantity(productModal.id) === 0}\r\n                        >\r\n                            Mua ngay\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            <h2 className=\"text-2xl font-bold mb-6 text-center\">Sản phẩm đã xem gần đây</h2>\r\n\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4\">\r\n                {recentProducts.map((product) => (\r\n                    <div\r\n                        key={product.id}\r\n                        className=\"group bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow relative\"\r\n                    >\r\n                        <div className=\"relative overflow-hidden aspect-[3/4]\" onClick={() => handleProductClick(product.slug)}>\r\n                            <img\r\n                                src={product.mainImage || 'https://via.placeholder.com/300'}\r\n                                alt={product.product_name}\r\n                                className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                            />\r\n\r\n                            {/* Badge giảm giá */}\r\n                            {product.discount_price < product.price && (\r\n                                <div className=\"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 text-xs font-semibold\">\r\n                                    -{Math.round(((product.price - product.discount_price) / product.price) * 100)}%\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"p-3\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <h3\r\n                                    className=\"text-sm md:text-base font-medium mb-1 line-clamp-1 hover:text-red-500 cursor-pointer\"\r\n                                    onClick={() => handleProductClick(product.slug)}\r\n                                >\r\n                                    {product.product_name}\r\n                                </h3>\r\n                                <button\r\n                                    className=\"text-gray-700 hover:text-red-500 transition\"\r\n                                    onClick={(e) => handleFavoriteClick(e, product.id)}\r\n                                >\r\n                                    {favorites[product.id] ? (\r\n                                        <HeartSolid className=\"h-5 w-5 text-red-500\" />\r\n                                    ) : (\r\n                                        <HeartOutline className=\"h-5 w-5\" />\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <div className=\"flex gap-1 overflow-hidden\">\r\n                                    {product.productColors && product.productColors.length > 0 ? (\r\n                                        product.productColors.slice(0, 3).map((color, index) => (\r\n                                            <div\r\n                                                key={index}\r\n                                                className=\"w-4 h-4 rounded-full border\"\r\n                                                style={{ backgroundColor: color.hex_code }}\r\n                                                title={color.color}\r\n                                            />\r\n                                        ))\r\n                                    ) : (\r\n                                        <span className=\"text-xs text-gray-500\">No colors available</span>\r\n                                    )}\r\n                                    {product.colors && product.colors.length > 3 && (\r\n                                        <span className=\"text-xs\">+{product.colors.length - 3}</span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-end justify-between\">\r\n                                <div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <p className=\"text-red-500 font-bold text-sm md:text-base\">\r\n                                            {product.discount_price.toLocaleString('vi-VN')} đ\r\n                                        </p>\r\n                                        <p className=\"text-gray-500 line-through text-xs\">\r\n                                            {product.price.toLocaleString('vi-VN')} đ\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    className=\"text-gray-700 hover:text-red-500 transition\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        openProductModal(product);\r\n                                    }}\r\n                                >\r\n                                    <ShoppingBagIcon className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"text-xs text-gray-500 mt-2\">\r\n                                Đã xem {formatDistanceToNow(new Date(product.timestamp), {\r\n                                    addSuffix: true,\r\n                                    locale: vi\r\n                                })}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <ProductModal />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7017, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1_KLTN_HK2_2024_25/A1/fe_web_app/src/pages/productdetail/%5Bslug%5D.js"],"sourcesContent":["// Các import giữ nguyên\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { getToken, getCartId } from '../../utils/storage';\r\nimport { stockApi } from '../../utils/apiClient';\r\nimport { fetchProductDetail } from '../../store/slices/productSlice';\r\nimport {\r\n    createCartForGuest,\r\n    createCartForUser,\r\n    addItemToCart,\r\n    getCartItems\r\n} from '../../store/slices/cartSlice';\r\nimport { fetchReviewsByProduct, fetchAverageRating, createReview } from '../../store/slices/reviewsSlice';\r\nimport Layout from '../../components/Layout';\r\nimport ProductReviews from '../../components/slugs/ProductReviews';\r\nimport ProductDescription from '../../components/slugs/ProductDescription';\r\nimport SizeGuide from '../../components/SizeGuide';\r\nimport NotFound from '../../components/NotFound';\r\nimport { HeartIcon as HeartOutline } from '@heroicons/react/24/outline';\r\nimport { HeartIcon as HeartSolid } from '@heroicons/react/24/solid';\r\nimport {\r\n    FaFacebook,\r\n    FaPinterest,\r\n    FaTruck,\r\n    FaExchangeAlt,\r\n    FaCheckCircle,\r\n    FaMoneyBillWave,\r\n    FaHeadset,\r\n    FaStore\r\n} from \"react-icons/fa\";\r\nimport {\r\n    BsMessenger,\r\n    BsTwitterX,\r\n    BsLink45Deg\r\n} from \"react-icons/bs\";\r\nimport {\r\n    addToFavorite,\r\n    removeFromFavorite,\r\n    getFavorites,\r\n    selectFavoriteStatuses\r\n} from '../../store/slices/favoriteSlice';\r\nimport RecentlyViewed from '@/components/RecentlyViewed';\r\n\r\n\r\nconst RECENTLY_VIEWED_KEY = 'recently_viewed_products';\r\nconst MAX_RECENT_PRODUCTS = 10;\r\n\r\n\r\nexport default function Slug() {\r\n    // Redux setup\r\n    const dispatch = useDispatch();\r\n    const router = useRouter();\r\n    const { slug } = router.query;\r\n    const cartId = getCartId();\r\n\r\n    // Redux selectors\r\n    const { currentProduct, loading: productLoading, error: productError } = useSelector((state) => state.products);\r\n    const { reviews, averageRating, pagination, reviewsError } = useSelector((state) => state.reviews);\r\n    const { items: cartItems } = useSelector((state) => state.cart);\r\n\r\n    // Thêm vào phần Redux selectors\r\n    const favorites = useSelector(selectFavoriteStatuses);\r\n    const [isUpdatingFavorite, setIsUpdatingFavorite] = useState(false);\r\n\r\n    // Local state\r\n    const [isSizeGuideOpen, setIsSizeGuideOpen] = useState(false);\r\n    const [selectedColor, setSelectedColor] = useState(null);\r\n    const [selectedSize, setSelectedSize] = useState(null);\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [reviewText, setReviewText] = useState('');\r\n    const [reviewRating, setReviewRating] = useState(5);\r\n    const [activeTab, setActiveTab] = useState('reviews');\r\n    const [stocks, setStocks] = useState([]);\r\n    const [stocksLoading, setStocksLoading] = useState(true);\r\n    const [stocksError, setStocksError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        dispatch(getFavorites({ page: 1, limit: 100 }));\r\n    }, [dispatch]);\r\n\r\n\r\n    // API Calls\r\n    useEffect(() => {\r\n        if (slug) {\r\n            dispatch(fetchProductDetail(slug));\r\n        }\r\n    }, [dispatch, slug]);\r\n\r\n    // Cập nhật useEffect fetch stocks\r\n    useEffect(() => {\r\n        const fetchStocks = async () => {\r\n            setStocksLoading(true);\r\n            try {\r\n                const response = await stockApi.getProductStocks();\r\n                if (response.success) {\r\n                    setStocks(response.data);\r\n                } else {\r\n                    throw new Error('Failed to fetch stocks');\r\n                }\r\n            } catch (error) {\r\n                setStocksError(error.message);\r\n            } finally {\r\n                setStocksLoading(false);\r\n            }\r\n        };\r\n        fetchStocks();\r\n    }, []);\r\n\r\n    const handleFavoriteClick = async (e) => {\r\n        e.stopPropagation();\r\n\r\n        if (isUpdatingFavorite) return;\r\n        setIsUpdatingFavorite(true);\r\n\r\n        try {\r\n            if (favorites[currentProduct.id]) {\r\n                await dispatch(removeFromFavorite(currentProduct.id)).unwrap();\r\n            } else {\r\n                await dispatch(addToFavorite(currentProduct.id)).unwrap();\r\n            }\r\n            await dispatch(getFavorites({ page: 1, limit: 100 }));\r\n        } catch (error) {\r\n            console.error('Error handling favorite:', error);\r\n        } finally {\r\n            setIsUpdatingFavorite(false);\r\n        }\r\n    };\r\n\r\n\r\n    // Stock Management Functions\r\n    const getStockQuantity = (colorId, sizeId) => {\r\n        const stock = stocks.find(\r\n            stock => stock.product_id === currentProduct.id &&\r\n                stock.color_id === colorId &&\r\n                stock.size_id === sizeId\r\n        );\r\n        return stock ? stock.quantity : 0;\r\n    };\r\n\r\n    const getCartItemQuantity = (productId, colorId, sizeId) => {\r\n        const existingItem = cartItems?.find(item =>\r\n            item.product_id === productId &&\r\n            item.color_id === colorId &&\r\n            item.size_id === sizeId\r\n        );\r\n        return existingItem?.quantity || 0;\r\n    };\r\n\r\n    const isColorAvailable = (colorId) => {\r\n        return stocks.some(\r\n            stock => stock.product_id === currentProduct.id &&\r\n                stock.color_id === colorId &&\r\n                stock.quantity > 0\r\n        );\r\n    };\r\n\r\n    const isSizeAvailable = (sizeId) => {\r\n        return stocks.some(\r\n            stock => stock.product_id === currentProduct.id &&\r\n                stock.color_id === selectedColor?.id &&\r\n                stock.size_id === sizeId &&\r\n                stock.quantity > 0\r\n        );\r\n    };\r\n\r\n    const getMaxAvailableQuantity = () => {\r\n        if (!selectedColor || !selectedSize) return 0;\r\n\r\n        const stockQuantity = getStockQuantity(selectedColor.id, selectedSize.id);\r\n        const cartQuantity = getCartItemQuantity(\r\n            currentProduct.id,\r\n            selectedColor.id,\r\n            selectedSize.id\r\n        );\r\n\r\n        return Math.max(0, stockQuantity - cartQuantity);\r\n    };\r\n\r\n    const checkTotalStock = () => {\r\n        if (!stocks.length) return false;\r\n\r\n        const totalStock = stocks\r\n            .filter(stock => stock.product_id === currentProduct.id)\r\n            .reduce((sum, stock) => sum + stock.quantity, 0);\r\n        return totalStock > 0;\r\n    };\r\n\r\n    // Selection Management\r\n    useEffect(() => {\r\n        if (currentProduct && stocks.length > 0) {\r\n            const firstAvailableColor = currentProduct.productColors.find(color =>\r\n                stocks.some(stock =>\r\n                    stock.product_id === currentProduct.id &&\r\n                    stock.color_id === color.id &&\r\n                    stock.quantity > 0\r\n                )\r\n            );\r\n            setSelectedColor(firstAvailableColor || null);\r\n            setSelectedSize(null);\r\n            setQuantity(1);\r\n        }\r\n    }, [currentProduct, stocks]);\r\n\r\n    useEffect(() => {\r\n        if (selectedColor && currentProduct?.productSizes && stocks.length > 0) {\r\n            const firstAvailableSize = currentProduct.productSizes.find(size =>\r\n                stocks.some(stock =>\r\n                    stock.product_id === currentProduct.id &&\r\n                    stock.color_id === selectedColor.id &&\r\n                    stock.size_id === size.id &&\r\n                    stock.quantity > 0\r\n                )\r\n            );\r\n            setSelectedSize(firstAvailableSize || null);\r\n            setQuantity(1);\r\n        }\r\n    }, [selectedColor, currentProduct, stocks]);\r\n\r\n    // Cart Functions\r\n    const handleAddToCart = async (showAlert = true) => {\r\n        if (!selectedColor || !selectedSize) {\r\n            alert('Vui lòng chọn màu và kích thước.');\r\n            return;\r\n        }\r\n\r\n        const stockQuantity = getStockQuantity(selectedColor.id, selectedSize.id);\r\n        const cartQuantity = getCartItemQuantity(\r\n            currentProduct.id,\r\n            selectedColor.id,\r\n            selectedSize.id\r\n        );\r\n\r\n        if (cartQuantity + quantity > stockQuantity) {\r\n            const remainingQuantity = stockQuantity - cartQuantity;\r\n            if (remainingQuantity <= 0) {\r\n                alert('Sản phẩm đã hết hàng hoặc đã có trong giỏ hàng với số lượng tối đa.');\r\n                return;\r\n            }\r\n            alert(`Chỉ còn ${remainingQuantity} sản phẩm có thể thêm vào giỏ hàng.`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            let activeCartId = cartId;\r\n\r\n            if (!activeCartId) {\r\n                const cartResponse = getToken()\r\n                    ? await dispatch(createCartForUser()).unwrap()\r\n                    : await dispatch(createCartForGuest()).unwrap();\r\n                activeCartId = cartResponse?.id;\r\n            }\r\n\r\n            await dispatch(\r\n                addItemToCart({\r\n                    cartId: activeCartId,\r\n                    itemData: {\r\n                        product_id: currentProduct.id,\r\n                        color_id: selectedColor.id,\r\n                        size_id: selectedSize.id,\r\n                        quantity,\r\n                    },\r\n                })\r\n            ).unwrap();\r\n\r\n            dispatch(getCartItems(activeCartId));\r\n            localStorage.setItem('cartId', activeCartId);\r\n\r\n            if (showAlert) {\r\n                alert('Sản phẩm đã được thêm vào giỏ hàng!');\r\n            }\r\n        } catch (error) {\r\n            throw error; // Ném lỗi để xử lý ở hàm gọi\r\n        }\r\n    };\r\n\r\n    const handleBuyNow = async () => {\r\n        try {\r\n            await handleAddToCart(false); // Thêm tham số để kiểm soát việc hiển thị alert\r\n            router.push('/cart');\r\n        } catch (error) {\r\n            alert('Có lỗi xảy ra khi thêm vào giỏ hàng!');\r\n        }\r\n    };\r\n\r\n    // Quantity Management\r\n    const increaseQuantity = () => {\r\n        const availableQuantity = getMaxAvailableQuantity();\r\n        if (quantity >= availableQuantity) {\r\n            alert(`Chỉ còn ${availableQuantity} sản phẩm có thể thêm vào giỏ hàng.`);\r\n            return;\r\n        }\r\n        setQuantity(prev => prev + 1);\r\n    };\r\n\r\n    const decreaseQuantity = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n    // Review Management\r\n    useEffect(() => {\r\n        if (currentProduct?.id) {\r\n            dispatch(fetchReviewsByProduct({ productId: currentProduct.id, page: 1, limit: 5 }));\r\n            dispatch(fetchAverageRating(currentProduct.id));\r\n        }\r\n    }, [dispatch, currentProduct]);\r\n\r\n    const addToRecentlyViewed = (product) => {\r\n        try {\r\n            const recentProducts = JSON.parse(localStorage.getItem(RECENTLY_VIEWED_KEY) || '[]');\r\n\r\n            // Chuẩn bị thông tin màu sắc\r\n            const colors = product.productColors.map(color => ({\r\n                id: color.id,\r\n                color: color.color,\r\n                hex_code: color.hex_code,\r\n                image: color.ProductColor?.image,\r\n            }));\r\n\r\n            // Chuẩn bị thông tin size\r\n            const sizes = product.productSizes.map(size => ({\r\n                id: size.id,\r\n                size: size.size,\r\n            }));\r\n\r\n            // Tạo object chứa thông tin đầy đủ của sản phẩm\r\n            const productToSave = {\r\n                id: product.id,\r\n                product_name: product.product_name,\r\n                price: product.price,\r\n                discount_price: product.discount_price,\r\n                description: product.description,\r\n                slug: product.slug,\r\n                productColors: colors,\r\n                productSizes: sizes,\r\n                mainImage: product.productColors[0]?.ProductColor?.image,\r\n                timestamp: new Date().getTime(),\r\n            };\r\n\r\n            // Kiểm tra sản phẩm đã tồn tại\r\n            const existingIndex = recentProducts.findIndex(p => p.id === product.id);\r\n            if (existingIndex > -1) {\r\n                recentProducts.splice(existingIndex, 1);\r\n            }\r\n\r\n            // Thêm vào đầu danh sách\r\n            recentProducts.unshift(productToSave);\r\n\r\n            // Giới hạn số lượng\r\n            if (recentProducts.length > MAX_RECENT_PRODUCTS) {\r\n                recentProducts.pop();\r\n            }\r\n\r\n            localStorage.setItem(RECENTLY_VIEWED_KEY, JSON.stringify(recentProducts));\r\n        } catch (error) {\r\n            console.error('Error saving recently viewed product:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (currentProduct) {\r\n            addToRecentlyViewed(currentProduct);\r\n        }\r\n    }, [currentProduct]);\r\n\r\n\r\n    const handleSubmitReview = async () => {\r\n        if (!reviewText.trim()) {\r\n            alert('Vui lòng nhập nội dung đánh giá');\r\n            return;\r\n        }\r\n\r\n        console.log('reviewRating', reviewRating);\r\n        console.log('reviewText', reviewText);\r\n\r\n        try {\r\n            await dispatch(\r\n                createReview({\r\n                    productId: currentProduct.id,\r\n                    reviewText: reviewText,\r\n                    rating: reviewRating,\r\n                })\r\n            ).unwrap();\r\n\r\n            setReviewText('');\r\n            setReviewRating(5);\r\n            dispatch(fetchReviewsByProduct({ productId: currentProduct.id, page: 1, limit: 5 }));\r\n            dispatch(fetchAverageRating(currentProduct.id));\r\n        } catch (error) {\r\n            alert('Gửi đánh giá thất bại!');\r\n        }\r\n    };\r\n\r\n    const handlePageChange = (newPage) => {\r\n        dispatch(\r\n            fetchReviewsByProduct({\r\n                productId: currentProduct.id,\r\n                page: newPage,\r\n                limit: 5,\r\n            })\r\n        );\r\n    };\r\n\r\n    // Loading States\r\n    if (productLoading || stocksLoading) return <div>Đang tải...</div>;\r\n    if (productError || !currentProduct) {\r\n        return (\r\n            <Layout>\r\n                <NotFound\r\n                    message=\"Không tìm thấy sản phẩm\"\r\n                    description=\"Sản phẩm bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.\"\r\n                />\r\n            </Layout>\r\n        );\r\n    }\r\n    if (stocksError) return <div>Lỗi khi tải dữ liệu tồn kho: {stocksError}</div>;\r\n    if (!currentProduct) return <div>Không tìm thấy sản phẩm.</div>;\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"container mx-auto px-4 py-6\">\r\n                {/* Breadcrumb Navigation */}\r\n                <div className=\"flex items-center text-sm text-gray-600 mb-6\">\r\n                    <Link href=\"/\" className=\"hover:text-gray-900\">\r\n                        Trang chủ\r\n                    </Link>\r\n                    <span className=\"mx-2\">/</span>\r\n                    <span className=\"text-gray-900\">{currentProduct.product_name}</span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col md:flex-row gap-6\">\r\n                    {/* Product Image */}\r\n                    <div className=\"md:w-1/2 flex flex-col items-center\">\r\n                        <div className=\"relative w-full lg:h-[700px] md:h-[600px] sm:h-[500px]\">\r\n                            <img\r\n                                src={\r\n                                    // Nếu có màu được chọn thì hiển thị ảnh của màu đó\r\n                                    selectedColor?.ProductColor?.image ||\r\n                                    // Nếu không có màu được chọn, lấy ảnh của màu đầu tiên trong danh sách\r\n                                    currentProduct.productColors[0]?.ProductColor?.image ||\r\n                                    // Nếu không có ảnh nào thì hiển thị ảnh mặc định\r\n                                    'https://via.placeholder.com/500'\r\n                                }\r\n                                alt={currentProduct.product_name}\r\n                                className=\"w-full h-full object-contain rounded\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-2 mt-4 overflow-x-auto\">\r\n                            {currentProduct.productColors.map((color) => {\r\n                                const hasStock = isColorAvailable(color.id);\r\n\r\n                                return (\r\n                                    <div\r\n                                        key={color.id}\r\n                                        className={`\r\n                                            w-16 h-16 rounded overflow-hidden border-2 relative\r\n                                            ${selectedColor?.id === color.id ? 'ring-2 ring-gray-500 border-gray-500' : 'border-gray-300'}\r\n                                            ${!hasStock ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n                                        `}\r\n                                        onClick={() => hasStock && setSelectedColor(color)}\r\n                                    >\r\n                                        <img\r\n                                            src={color.ProductColor?.image || 'https://via.placeholder.com/100'}\r\n                                            alt={color.color}\r\n                                            className=\"w-full h-full object-cover\"\r\n                                        />\r\n                                        {!hasStock && (\r\n                                            <div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-50\">\r\n                                                <span className=\"text-xs text-red-500 font-bold\">Hết hàng</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"hidden md:block border-l border-gray-300\"></div>\r\n                    {/* Product Details */}\r\n                    <div className=\"md:w-1/2\">\r\n                        <h1 className=\"text-2xl font-bold mb-4 font-sans uppercase tracking-wide\">\r\n                            {currentProduct.product_name}\r\n                        </h1>\r\n                        <button\r\n                            onClick={handleFavoriteClick}\r\n                            disabled={isUpdatingFavorite}\r\n                            className={`\r\n                p-2 rounded-full hover:bg-gray-100 transition-colors\r\n                ${isUpdatingFavorite ? 'opacity-50 cursor-not-allowed' : ''}\r\n            `}\r\n                        >\r\n                            {isUpdatingFavorite ? (\r\n                                <div className=\"w-6 h-6 border-2 border-gray-300 border-t-gray-500 rounded-full animate-spin\" />\r\n                            ) : favorites[currentProduct.id] ? (\r\n                                <HeartSolid className=\"h-6 w-6 text-red-500\" />\r\n                            ) : (\r\n                                <HeartOutline className=\"h-6 w-6 text-gray-400\" />\r\n                            )}\r\n                        </button>\r\n                        <div className=\"mb-4\">\r\n                            <span className=\"text-lg font-semibold\">TÌNH TRẠNG: </span>\r\n                            <span className={`font-bold ${checkTotalStock() ? 'text-green-500' : 'text-red-500'}`}>\r\n                                {checkTotalStock() ? 'Còn hàng' : 'Hết hàng'}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-4 mb-4\">\r\n                            <span className=\"text-lg font-semibold\">GIÁ:</span>\r\n                            <p className=\"text-red-500 font-bold text-xl\">\r\n                                {currentProduct.discount_price.toLocaleString('vi-VN')} VND\r\n                            </p>\r\n                            <p className=\"text-gray-500 line-through\">\r\n                                {currentProduct.price.toLocaleString('vi-VN')} VND\r\n                            </p>\r\n                            {/* Thêm phần trăm giảm giá */}\r\n                            <span className=\"bg-red-500 text-white px-2 py-1 rounded-md text-sm\">\r\n                                -{Math.round(((currentProduct.price - currentProduct.discount_price) / currentProduct.price) * 100)}%\r\n                            </span>\r\n                        </div>\r\n                        {/* Sizes */}\r\n                        <div className=\"mb-4\">\r\n                            <h2 className=\"text-lg font-semibold mb-2\">KÍCH THƯỚC:</h2>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setIsSizeGuideOpen(true)}\r\n                                className=\"text-sm text-black-600 hover:text-black-800 underline mb-2\"\r\n                            >\r\n                                Hướng dẫn chọn size\r\n                            </button>\r\n                            <div className=\"flex gap-2\">\r\n                                {currentProduct.productSizes.map((size) => {\r\n                                    const isAvailable = selectedColor && isSizeAvailable(size.id);\r\n                                    const stockQuantity = selectedColor ? getStockQuantity(selectedColor.id, size.id) : 0;\r\n\r\n                                    return (\r\n                                        <button\r\n                                            key={size.id}\r\n                                            className={`\r\n                                                px-8 py-2 border rounded relative\r\n                                                ${selectedSize?.id === size.id ? 'bg-gray-100' : ''}\r\n                                                ${!isAvailable ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'}\r\n                                            `}\r\n                                            onClick={() => isAvailable && setSelectedSize(size)}\r\n                                            disabled={!isAvailable}\r\n                                        >\r\n                                            <span>{size.size}</span>\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                        {/* Colors */}\r\n                        <div className=\"mb-4\">\r\n                            <h2 className=\"text-lg font-semibold mb-2\">MÀU SẮC:</h2>\r\n                            <div className=\"flex gap-2\">\r\n                                {currentProduct.productColors.map((color) => {\r\n                                    const hasStock = isColorAvailable(color.id);\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={color.id}\r\n                                            className={`\r\n                                                w-8 h-8 rounded-full border relative\r\n                                                ${selectedColor?.id === color.id ? 'ring-2 ring-gray-500' : ''}\r\n                                                ${!hasStock ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-md'}\r\n                                            `}\r\n                                            style={{ backgroundColor: color.hex_code }}\r\n                                            title={`${color.color}${!hasStock ? ' (Hết hàng)' : ''}`}\r\n                                            onClick={() => hasStock && setSelectedColor(color)}\r\n                                        >\r\n                                            {!hasStock && (\r\n                                                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                                    <div className=\"w-full h-0.5 bg-gray-400 transform rotate-45\"></div>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                        {/* Quantity */}\r\n                        <div className=\"mb-4\">\r\n                            <h2 className=\"text-lg font-semibold mb-2\">CHỌN SỐ LƯỢNG:</h2>\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <button\r\n                                    className=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\"\r\n                                    onClick={decreaseQuantity}\r\n                                    disabled={!selectedSize || !selectedColor}\r\n                                >\r\n                                    -\r\n                                </button>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"w-16 px-2 py-1 border rounded text-center\"\r\n                                    min=\"1\"\r\n                                    max={getMaxAvailableQuantity()}\r\n                                    value={quantity}\r\n                                    readOnly\r\n                                />\r\n                                <button\r\n                                    className=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\"\r\n                                    onClick={increaseQuantity}\r\n                                    disabled={!selectedSize || !selectedColor}\r\n                                >\r\n                                    +\r\n                                </button>\r\n                                <span className=\"text-sm text-gray-500\">\r\n                                    (Còn {getMaxAvailableQuantity()} sản phẩm)\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        {/* Add to Cart and Buy Now Buttons */}\r\n                        <div className=\"flex flex-wrap gap-4 mt-4 sm:flex-nowrap sm:gap-4 sm:justify-start\">\r\n                            <button\r\n                                className=\"bg-gray-600 text-white text-xl px-6 py-3 rounded hover:bg-gray-700 transition transform scale-100 hover:scale-105 w-full sm:w-auto\"\r\n                                onClick={handleAddToCart}\r\n                                disabled={!selectedSize || !selectedColor || getMaxAvailableQuantity() === 0}\r\n                            >\r\n                                THÊM VÀO GIỎ\r\n                            </button>\r\n                            <button\r\n                                className=\"bg-red-600 text-white text-xl px-6 py-3 rounded hover:bg-red-700 transition transform scale-100 hover:scale-105 w-full sm:w-auto\"\r\n                                onClick={handleBuyNow}\r\n                                disabled={!selectedSize || !selectedColor || getMaxAvailableQuantity() === 0}\r\n                            >\r\n                                MUA NGAY\r\n                            </button>\r\n                        </div>\r\n                        {/* Social Share Buttons */}\r\n                        {/* Social Share Buttons */}\r\n                        <div className=\"flex items-center gap-2 mb-4 mt-8\">\r\n                            <span className=\"text-gray-600\">Chia sẻ:</span>\r\n                            <div className=\"flex gap-2\">\r\n                                {/* Facebook */}\r\n                                <a\r\n                                    href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"w-8 h-8 flex items-center justify-center bg-blue-600 rounded-full hover:bg-blue-700 transition-colors\"\r\n                                >\r\n                                    <FaFacebook className=\"w-4 h-4 text-white\" />\r\n                                </a>\r\n\r\n                                {/* Messenger */}\r\n                                <a\r\n                                    href={`fb-messenger://share/?link=${encodeURIComponent(window.location.href)}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"w-8 h-8 flex items-center justify-center bg-blue-500 rounded-full hover:bg-blue-600 transition-colors\"\r\n                                >\r\n                                    <BsMessenger className=\"w-4 h-4 text-white\" />\r\n                                </a>\r\n\r\n                                {/* Twitter/X */}\r\n                                <a\r\n                                    href={`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"w-8 h-8 flex items-center justify-center bg-black rounded-full hover:bg-gray-800 transition-colors\"\r\n                                >\r\n                                    <BsTwitterX className=\"w-4 h-4 text-white\" />\r\n                                </a>\r\n\r\n                                {/* Pinterest */}\r\n                                <a\r\n                                    href={`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(window.location.href)}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"w-8 h-8 flex items-center justify-center bg-red-600 rounded-full hover:bg-red-700 transition-colors\"\r\n                                >\r\n                                    <FaPinterest className=\"w-4 h-4 text-white\" />\r\n                                </a>\r\n\r\n                                {/* Copy Link */}\r\n                                <button\r\n                                    onClick={() => {\r\n                                        navigator.clipboard.writeText(window.location.href);\r\n                                        toast.success('Đã sao chép liên kết!');\r\n                                    }}\r\n                                    className=\"w-8 h-8 flex items-center justify-center bg-gray-500 rounded-full hover:bg-gray-600 transition-colors\"\r\n                                >\r\n                                    <BsLink45Deg className=\"w-4 h-4 text-white\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Store Policies */}\r\n                        <div className=\"mt-8 border-t pt-6\">\r\n                            <h3 className=\"text-lg font-medium mb-4\">Chính sách cửa hàng</h3>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                                {[\r\n                                    {\r\n                                        icon: <FaTruck />,\r\n                                        title: \"Miễn phí giao hàng\",\r\n                                        desc: \"Cho đơn hàng từ 200K\"\r\n                                    },\r\n                                    {\r\n                                        icon: <FaExchangeAlt />,\r\n                                        title: \"Đổi sản phẩm dễ dàng\",\r\n                                        desc: \"Trong vòng 7 ngày khi còn nguyên tem mác\"\r\n                                    },\r\n                                    {\r\n                                        icon: <FaCheckCircle />,\r\n                                        title: \"Hàng chính hãng\",\r\n                                        desc: \"Hàng phân phối chính hãng 100%\"\r\n                                    },\r\n                                    {\r\n                                        icon: <FaMoneyBillWave />,\r\n                                        title: \"Thanh toán COD\",\r\n                                        desc: \"Kiểm tra, thanh toán khi nhận hàng\"\r\n                                    },\r\n                                    {\r\n                                        icon: <FaHeadset />,\r\n                                        title: \"Tổng đài hỗ trợ 24/7\",\r\n                                        desc: \"0999999999\"\r\n                                    },\r\n                                    {\r\n                                        icon: <FaStore />,\r\n                                        title: \"Hỗ trợ đổi trả\",\r\n                                        desc: \"Tại tất cả store\"\r\n                                    }\r\n                                ].map((policy, index) => (\r\n                                    <div key={index} className=\"flex items-start gap-2 p-3 border rounded-lg\">\r\n                                        <div className=\"text-blue-600 text-xl\">\r\n                                            {policy.icon}\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"font-medium text-sm\">{policy.title}</h4>\r\n                                            <p className=\"text-gray-600 text-xs\">{policy.desc}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* Tabs */}\r\n                <div className=\"mt-8\">\r\n                    <div className=\"flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0\">\r\n                        <button\r\n                            className={`w-full sm:w-auto px-4 py-2 border text-base sm:text-lg font-bold ${activeTab === 'reviews'\r\n                                ? 'bg-white border-gray-600 text-gray-600'\r\n                                : 'bg-white border-gray-300 text-gray-500'\r\n                                } rounded-md`}\r\n                            onClick={() => setActiveTab('reviews')}\r\n                        >\r\n                            ĐÁNH GIÁ\r\n                        </button>\r\n                        <button\r\n                            className={`w-full sm:w-auto px-4 py-2 border text-base sm:text-lg font-bold ${activeTab === 'description'\r\n                                ? 'bg-white border-gray-600 text-gray-600'\r\n                                : 'bg-white border-gray-300 text-gray-500'\r\n                                } rounded-md`}\r\n                            onClick={() => setActiveTab('description')}\r\n                        >\r\n                            MÔ TẢ SẢN PHẨM\r\n                        </button>\r\n                    </div>\r\n                    {/* Tab Content */}\r\n                    <div className=\"mt-6\">\r\n                        {activeTab === 'description' && <ProductDescription description={currentProduct.description} />}\r\n                        {activeTab === 'reviews' && (\r\n                            <ProductReviews\r\n                                reviews={reviews}\r\n                                averageRating={averageRating}\r\n                                pagination={pagination}\r\n                                reviewsError={reviewsError}\r\n                                handlePageChange={handlePageChange}\r\n                                handleSubmitReview={handleSubmitReview}\r\n                                reviewRating={reviewRating}\r\n                                setReviewRating={setReviewRating}\r\n                                reviewText={reviewText}\r\n                                setReviewText={setReviewText}\r\n                                getToken={getToken}\r\n                                router={router}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <RecentlyViewed />\r\n            <SizeGuide\r\n                isOpen={isSizeGuideOpen}\r\n                closeModal={() => setIsSizeGuideOpen(false)}\r\n            />\r\n        </Layout>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8241, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/entry/page-loader.ts"],"sourcesContent":["const PAGE_PATH = \"/productdetail/[slug]\";\n\n/// <reference types=\"next/client\" />\r\n\r\n// inserted by rust code\r\ndeclare const PAGE_PATH: string\r\n\r\n  // Adapted from https://github.com/vercel/next.js/blob/b7f9f1f98fc8ab602e84825105b5727272b72e7d/packages/next/src/build/webpack/loaders/next-client-pages-loader.ts\r\n;(window.__NEXT_P = window.__NEXT_P || []).push([\r\n  PAGE_PATH,\r\n  () => {\r\n    return require('PAGE')\r\n  },\r\n])\r\n// @ts-expect-error module.hot exists\r\nif (module.hot) {\r\n  // @ts-expect-error module.hot exists\r\n  module.hot.dispose(function () {\r\n    window.__NEXT_P.push([PAGE_PATH])\r\n  })\r\n}\r\n"],"names":[],"mappings":"AAAA,MAAM,YAAY;AAQjB,CAAC,OAAO,QAAQ,GAAG,OAAO,QAAQ,IAAI,EAAE,EAAE,IAAI,CAAC;IAC9C;IACA;QACE;IACF;CACD;AACD,qCAAqC;AACrC,IAAI,OAAO,GAAG,EAAE;IACd,qCAAqC;IACrC,OAAO,GAAG,CAAC,OAAO,CAAC;QACjB,OAAO,QAAQ,CAAC,IAAI,CAAC;YAAC;SAAU;IAClC;AACF","ignoreList":[0],"debugId":null}}]
}